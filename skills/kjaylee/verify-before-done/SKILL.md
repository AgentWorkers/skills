---
name: verify-before-done
description: 在声称工作已完成之前，必须提供新的验证证据。在任何完成声明、提交代码、推送代码、提交Pull Request（PR）或提交状态报告之前，都必须使用此规则。这有助于防止虚假的完成声明。
metadata:
  author: misskim
  version: "1.0"
  origin: Concept from obra/superpowers verification-before-completion
---

# 完成前必须进行验证

## 基本原则

```
검증 증거 없이 완료 주장 절대 금지
```

## 门控函数（Gate Functions）

在做出任何“已完成”或“成功”的声明之前，必须遵循以下步骤：

1. **识别**：证明该声明的命令是什么？
2. **执行**：立即执行该命令（不能依赖之前的结果）。
3. **查看输出**：检查所有的输出内容、退出代码以及失败的次数。
4. **验证**：输出结果是否与声明内容一致？
   - 如果不一致 → 请提供实际状态和相应的证据。
   - 如果一致 → 则可以基于证据做出完成声明。
5. **只有在验证通过后，才能做出声明**。

## 各项声明所需的证据

| 声明内容 | 所需证据 | 不足的证据 |
|---------|---------|---------|
| “测试通过” | 测试命令的输出结果：无失败记录 | 仅依赖之前的测试结果或主观判断 |
| “编译器运行无误” | 编译器的输出：无错误信息 | 仅依赖编译器的部分检查或主观判断 |
| “构建成功” | 构建命令的退出代码为 0 | 仅依赖编译器的输出或日志状态 |
| “错误已修复” | 原始错误再次被测试时能够通过 | 仅依赖代码修改后的测试结果或主观判断 |
| “满足所有需求” | 逐项检查需求清单 | 仅依赖测试结果 |

## 🚨 危险词汇（使用这些词汇时请立即停止）

以下词汇一旦被使用，必须立即停止工作：
- “应该会成功” / “看起来会成功”
- “可能” / “大概”
- “太好了！” / “完美了！” / “结束了！”（在验证完成之前使用）
- “感觉好像修复了”
- “已经手动确认过了”
- “代理工具报告成功了”

## 委派任务也不例外

即使子代理工具报告“成功”，也必须进行**独立验证**：
- 检查版本控制系统（VCS）中的差异记录，确认确实有更改。
- 直接执行相关测试，确认任务是否真的完成。
- 不要盲目相信代理工具的报告。

## 避免找借口

以下是一些常见的借口及其对应的实际情况：
| 常见借口 | 实际情况 |
|---------|---------|
| “现在应该可以正常运行了” | 请执行验证操作。 |
| “我很确定” | 确信≠证据。 |
| “就这一次例外吧” | 没有例外情况。 |
| “编译器通过了” | 编译器的通过结果≠程序在运行时的正确性。 |
| “太累了” | 疲劳≠可以免除验证责任。 |
| “部分检查就足够了” | 部分检查无法证明任何事情。 |

## 为什么这很重要？

不经过验证就声称任务完成会导致以下后果：
- 信任度下降。
- 有缺陷的代码被部署到生产环境中。
- 未发现的遗漏需求可能导致问题。
- 虚假的完成报告会导致重复工作，浪费时间。

**验证是必须的，而不是可选项。**