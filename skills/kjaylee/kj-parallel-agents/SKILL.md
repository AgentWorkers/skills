---
name: parallel-agents
description: 同时派遣多个子代理去执行独立的任务。适用于处理两个或更多不相关的任务时，这些任务可以在没有共享状态或顺序依赖关系的情况下独立进行。通过并行化工作来最大化处理效率。
metadata:
  author: misskim
  version: "1.0"
  origin: Concept from obra/superpowers dispatching-parallel-agents, adapted for Clawdbot sessions_spawn
---

# 并行代理调度

将独立的任务分配给多个并行子代理来同时处理。

## 适用场景

```
여러 작업? → 독립적? → 공유 상태 없음? → 병렬 디스패치!
```

**适用情况：**
- 当3个或更多的测试文件因不同原因失败时；
- 当多个子系统独立出现故障时；
- 当每个问题都能在没有其他问题背景信息的情况下被理解时；
- 在进行研究、实现和测试等不同类型的工作时。

**不适用情况：**
- 当故障之间存在关联（修复一个问题可能也会解决其他问题时）；
- 需要了解整个系统的状态时；
- 当代理之间需要编辑相同的文件时；
- 在进行探索性调试时（即不知道问题出在哪里时）。

## 模式

### 1. 确定独立的工作领域
将任务按领域进行分组：
- 任务A：修复UI错误；
- 任务B：优化API性能；
- 任务C：编写测试用例。

确认每个领域是否都是独立的。

### 2. 编写明确的提示信息
好的提示信息应包含：
- **明确的范围**：一个具体的问题；
- **完整的信息**：包含所有必要的背景信息；
- **明确的输出要求**：明确代理需要返回什么结果。

```
❌ "모든 테스트 고쳐" — 범위 너무 넓음
✅ "src/game/physics.test.ts의 3개 실패 테스트 수정" — 집중됨

❌ "레이스 컨디션 고쳐" — 맥락 없음
✅ "에러 메시지 + 테스트 이름 + 스택 트레이스 포함" — 맥락 충분

❌ "고쳐" — 출력 불명
✅ "근본 원인 요약 + 변경 사항 반환" — 출력 명시
```

### 3. 在Clawdbot中进行任务调度

```
# sessions_spawn으로 병렬 서브에이전트 생성
서브에이전트 1: "physics.test.ts의 충돌 감지 버그 수정"
서브에이전트 2: "render pipeline 성능 최적화"
서브에이전트 3: "새 게임 레벨 에셋 생성" (MiniPC)
```

### 4. 整合结果
当代理返回结果后：
1. **审查每个任务的摘要**：理解所做的更改；
2. **检查是否存在冲突**：是否有多个代理编辑了相同的代码；
3. **进行整体测试**：确认所有修改是否能够协同工作；
4. **进行抽查**：子代理也可能会犯错。

## 常见错误

| 错误 | 更正方法 |
|------|------|
| 范围过广 | 每个代理只负责处理一个领域 |
| 缺乏背景信息 | 提供错误信息及文件路径 |
- 没有设置限制 | 例如“禁止修改生产代码”等规定 |
- 输出信息不明确 | 明确要求提供“根本原因”及“更改内容”的摘要 |

## 节省时间的效果
依次处理3个问题需要3T的时间；
并行处理3个问题大约只需要1T的时间。
独立的工作领域越多，节省的时间就越明显。