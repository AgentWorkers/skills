---
name: reminder-engine
description: "使用 OpenClaw 的 Cron 作业来创建、列出、取消或延迟提醒（支持一次性或重复性提醒）。适用于用户提出如下请求的场景：‘20 分钟后提醒我’、‘明天上午 9 点提醒我’、‘每周一至周五上午 10:30 提醒我’、‘列出我的所有提醒’、‘取消某个提醒’或‘将这个提醒延迟执行’。该技能强调提醒安排的准确性（考虑时区差异）、在创建作业前的确认流程，以及确保提醒文本在触发时易于阅读的格式。"
---
# 提醒引擎

将自然语言形式的提醒转换为 OpenClaw 的 `cron` 任务。

## 工作流程

### 1) 解析用户请求
对用户请求进行分类：
- **一次性提醒**：例如：“20 分钟后”、“明天上午 9 点”、“3 月 1 日上午 10 点”
- **周期性提醒**：例如：“每天上午 9 点”、“每周一”、“每 2 小时”
- **管理操作**：例如：“列出所有提醒”、“取消某个提醒”、“启用/禁用提醒”、“将某个提醒推迟”

提取以下信息：
- 提醒内容（提醒执行时需要显示的文本）
- 通知渠道（默认为当前聊天频道，除非用户另有指定）
- 时区（默认为运行时的时区，除非用户指定）

### 2) 确认提醒时间
在创建、更新或删除提醒任务之前，务必向用户确认以下信息：
- 计算出的提醒时间（以人类可读的形式显示，并包含时区）
- 提醒是单次性的还是周期性的
- 提醒的具体内容

如果用户的表述不够清晰（例如：“下周五”、“早上某个时间点”），请询问用户以获取更准确的信息。

### 3) 创建 `cron` 任务
使用 `cron` 工具来创建提醒任务。

**规则**：
- 对于一次性提醒，建议使用 `schedule.kind="at"`。
- 对于周期性提醒，建议使用 `schedule.kind="cron"`（如果可能的话，请指定时区 `tz`）。
- 设置 `sessionTarget="main"` 和 `payload.kind="systemEvent"`。
- 提醒内容的格式应为：“Reminder: ”（尤其是对于提前很久设置的提醒）。
- 如果有帮助，可以添加一些补充说明（例如：“Reminder: 提交发票（您说过这需要在客户会议前完成）”。

### 4) 查看/取消/推迟提醒
- **查看提醒列表**：使用 `cron.list` 命令，显示任务的 ID、下次执行时间以及任务名称/简要描述。
- **取消提醒**：使用 `cron.remove(jobId)` 命令（建议通过任务 ID 来取消；如果用户提供了具体的提醒内容，可以在列表中查找并确认后再取消）。
- **推迟提醒**：可以将其视为一次性的取消操作，或者重新创建一个提醒任务。

## 提醒内容的编写要求
- 内容要简洁明了，且具有明确的行动导向。
- 避免使用敏感信息或保密内容。
- 如果提醒是针对公共聊天频道发送的，需要提前警告用户。

## 安全性注意事项
- 未经用户明确确认，切勿创建大量重复的周期性提醒。
- 除非用户明确要求，否则切勿将提醒信息发送给多个接收者。
- 提醒内容中严禁包含访问密钥或令牌。

## 示例
- 用户：“20 分钟后提醒我伸展一下身体”
  - 创建一个一次性 `at` 类型的提醒任务。
  - 提醒内容：`Reminder: stretch.`

- 用户：“每周一上午 10 点提醒我站起来”
  - 创建一个周期性 `cron` 任务，并设置本地时区。
  - 提醒内容：`Reminder: stand up (weekday standup alarm).`

- 用户：“列出我的所有提醒”
  - 显示所有提醒任务的详细信息，包括任务 ID，以便用户可以取消特定的任务。

- 用户：“取消上午的站立会议提醒”
  - 查看所有相关的提醒任务，确认要取消哪个任务后进行删除。