---
name: code-detective
description: “找出代码中的错误！”这是一款用于练习调试技巧的互动游戏，共有3个难度级别。当用户请求“找出错误”、“练习调试”或希望测试自己对代码的敏锐度时，可以使用这款游戏。
user-invocable: true
---
# Code Detective — 在代码中查找错误

这是一款用于练习调试技能的游戏。玩家需要在代码中寻找错误。

## 使用方法

### 1. 启动游戏

当玩家选择“查找错误”或“开始调试游戏”时：

```
🔍 Code Detective — Найди баг!

Я покажу код с ошибкой, а ты найдёшь её!

Выбери сложность:
[🟢 Легко] [🟡 Средне] [🔴 Сложно]
```

### 2. 问题格式

展示代码，并使用带有 `buttons` 参数的 `message`：

```json
{
  "action": "send",
  "channel": "telegram",
  "target": "<user_id>",
  "message": "🐛 Найди баг в этом коде (вопрос 1/5):\n\n```python
def greet(name):
    print("你好, " + name)
    greet("阿尔乔姆")
\n
\n有什么问题吗？
  "buttons":
    [{"text": "💡 提示", "callback_data": "hint:q1"}],
    [{"text": "🔄 跳过", "callback_data": "skip:q1"}]
}
```

### 3. Уровни сложности

**🟢 Легко:** Синтаксические ошибки, очевидные опечатки
```python
# 示例：缺少右括号
name = "阿尔乔姆"
print(name)
```

**🟡 Средне:** Логические ошибки, типичные паттерны
```javascript
// 示例：在循环中使用了 `var` 而不是 `let`
for (var i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 100);
}
// 输出结果将是 3, 3, 3，而不是 0, 1, 2
```

**🔴 Сложно:** Сложные баги, несколько ошибок
```python
# 示例：未定义的变量
def counter():
    count = 0
    def increment():
        count += 1  // 这里有错误！
        return count
    return increment()
```

### 4. Типичные баги для игры

**Python:**
- Забытые кавычки в строке
- Отступы (indentation)
- Переменная до объявления
- != вместо ==
- Забытый return
- Изменение global без global

**JavaScript:**
- === vs ==
- Забытый await
- this в стрелочных функциях
- var вместо let/const в циклах

**Общие:**
- Бесконечные циклы
- Off-by-one ошибки
- Забытые break в switch

### 5. Подсказки

Если пользователь просит подсказку — дай направление, но не ответ:

```
💡 提示：请查看包含文字的那些行...
```

### 6. Правильный ответ

Когда пользователь угадал:

```
✅ 没错！缺少右括号！
🎯 +15 分
💡 建议：在集成开发环境（IDE）中，代码高亮功能可以帮助你找到这类错误。

[➡️ 下一个问题]
```

### 7. Неправильный ответ

```
❌ 不完全正确！

问题出在第 4 行：greet("阿尔乔姆)。
这里缺少右括号。

[➡️ 下一个问题]
```

### 8. Финал игры

```
🔍 Code Detective 已完成！
━━━━━━━━━━━━━━━━━━
🎯 找到的错误数量：4/5
⭐ 经验值：+400
📈 你正变得越来越优秀的调试专家！

[🔄 再玩一次]
```

## Стиль общения

- Поощряй: "Хороший глаз!", "Ты на верном пути!"
- Объясняй ошибку просто
- Давай советы как избегать таких багов
- Используй эмодзи: 🐛 🔍 💡 ✅ ❌

## Пример полного цикла

```
用户：查找错误！
机器人：🔍 Code Detective！
请选择难度：
[🟢 简单] [🟡 中等] [🔴 困难]

---

用户：[🟢 简单]
机器人：🐛 找到错误（问题 1/3）：

```python
x = 10
y = 0
result = x / y
print(result)
```

[💡 提示]

---

用户：除以零的操作！

机器人：✅ 没错！这是 `ZeroDivisionError`（除以零的错误）！
🎯 +15 分

[➡️ 下一个问题]