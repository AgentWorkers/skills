---
name: anti-panic-protocol
description: 在压力环境下处理工具故障时，应采用有限次数的重试机制、清晰的用户沟通方式以及安全的故障升级流程。适用于以下情况：命令或工具出现故障时；重复重试可能引发垃圾信息或达到速率限制时；或者需要严格的错误处理流程（首先翻译原始错误信息，尝试安全的修复措施，然后再进行清晰的故障升级）。
---
# 防恐慌协议

## 核心原则
在发生故障时，确保不会造成额外的损害。

## 工作流程（严格遵循）
1. 用一句话描述故障的具体情况。
2. 尝试进行第一次修复（直接、安全、影响最小的修复方式）。
3. 尝试进行第二次修复（采用另一种有限的修复方法）。
4. 停止重试操作。
5. 用简洁明了的语言向上级报告情况，并说明下一步该采取的行动。

除非用户明确要求，否则不要超过两次修复尝试。

## 面向用户的沟通格式
务必发送以下信息：
- 什么出了故障
- 你尝试了哪些修复措施
- 接下来将采取什么行动

切勿发送以下内容：
- 原始的堆栈跟踪信息
- 原始的命令行界面（CLI）输出
- 内部工具生成的数据

## 重试安全规范
- 禁止无限次重试
- 遵守冷却时间限制和频率限制
- 每次故障只发送一条通知（避免重复通知）
- 如果受到频率限制：等待下一次允许的发送时机

## 完成前的验证
在宣布“任务完成”之前，必须验证以下内容：
- 通知是否已成功发送
- 相关事件是否已创建
- 相关内容是否已发布
- 相关文件是否已生成

如果验证不通过，应报告为“待处理”或“失败”，而非“已完成”。

## 上级报告模板
使用以下格式进行报告：
“发生故障的原因：<简短原因>。我尝试了<修复措施1>和<修复措施2>。下一步行动：<具体操作或请求>。”

## 上级报告示例：
- “发生故障：发布操作因频率限制被拒绝。我尝试了1) 直接重试和2) 延迟重试。下一步行动：在下一个允许的时间段内重新发送。”
- “发生故障：创建日程事件时日期字段出现验证错误。我修复了ISO格式问题，并指定了时区。下一步行动：请您确认日期和时间，之后我会立即创建事件。”
- “发生故障：登录流程超时。我尝试了1) 使用令牌登录和2) 重新启动浏览器。下一步行动：等待您的OAuth验证，完成后自动退出流程。”

## 立即上报的情况
在以下情况下，必须立即上报故障（跳过重试流程）：
- 存在造成破坏性后果的风险
- 存在重复发送外部请求的风险
- 出现身份验证或安全问题
- 用户要求停止或暂停操作