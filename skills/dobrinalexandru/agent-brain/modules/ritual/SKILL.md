# ä»ªå¼è®°å¿† ğŸ”„

**çŠ¶æ€:** ğŸ“‹ ä»£ç†æŒ‡å— | **æ¨¡å—:** ä»ªå¼ | **æ‰€å±éƒ¨åˆ†:** ä»£ç†å¤§è„‘

è¯¥æ¨¡å—ç”¨äºæ£€æµ‹é‡å¤è¡Œä¸ºå¹¶è·Ÿè¸ªç”¨æˆ·çš„ä¹ æƒ¯ã€‚ä»£ç†éœ€è¦ç›‘æ§è¿™äº›é‡å¤è¡Œä¸ºï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨ä¸ºâ€œæ¨¡å¼â€æ¡ç›®ï¼ˆpattern entriesï¼‰ã€‚

## åŠŸèƒ½ä»‹ç»

è¯¥æ¨¡å—æŒ‡å¯¼ä»£ç†æ³¨æ„é‡å¤å‡ºç°çš„åŠ¨ä½œï¼Œå¹¶å°†è¿™äº›åŠ¨ä½œè®°å½•ä¸ºâ€œæ¨¡å¼â€æ¡ç›®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥æ¨¡å—ä¸ä¼šè‡ªåŠ¨è¿è¡Œâ€”â€”ä»£ç†å¿…é¡»ä½¿ç”¨ `similar` å‘½ä»¤æ‰‹åŠ¨æ£€æµ‹è¿™äº›æ¨¡å¼ã€‚

## æ£€æµ‹æœºåˆ¶

ä»£ç†ä½¿ç”¨ `similar` å‘½ä»¤æ¥æŸ¥æ‰¾ç›¸å…³çš„æ¡ç›®ï¼š

### åœ¨å­˜å‚¨æŸä¸ªç¨‹åºæˆ–åå¥½è®¾ç½®å
```bash
# After storing, check for similar entries
./scripts/memory.sh similar "<content>" 0.10

# If 3+ SIMILAR_ENTRIES of same type â†’ create a pattern
./scripts/memory.sh add pattern "User always asks for examples when learning" \
  inferred "learning,style,examples"
```

è¿™æ˜¯ä¸€ä¸ª**æ‰‹åŠ¨**æ­¥éª¤ï¼Œéœ€è¦ä»£ç†è‡ªè¡Œæ‰§è¡Œâ€”â€”å¹¶éè‡ªåŠ¨å®Œæˆçš„ã€‚

### `similar` å‘½ä»¤çš„åŠŸèƒ½ï¼š
- ä½¿ç”¨ TF-IDF å’Œä½™å¼¦ç›¸ä¼¼åº¦ç®—æ³•è¿›è¡Œæ¯”è¾ƒï¼ˆä¸ä¾èµ–å¤–éƒ¨åº“ï¼‰
- è¿‡æ»¤æ‰æ— æ„ä¹‰çš„è¯æ±‡ï¼ˆstopwordsï¼‰ä»¥æå‡æ¯”è¾ƒçš„å‡†ç¡®æ€§
- åªè¿”å›å¾—åˆ†é«˜äºé˜ˆå€¼çš„æ¡ç›®ï¼ˆé»˜è®¤é˜ˆå€¼ä¸º 0.10ï¼‰
- è·¨ä¼šè¯ï¼ˆsessionsï¼‰ä¿æŒæ•°æ®æŒä¹…æ€§ï¼ˆæ•°æ®ç”±ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†ï¼‰

### è¢«è§†ä¸ºâ€œç›¸ä¼¼â€çš„æ¡ä»¶ï¼š
- TF-IDF ç›¸ä¼¼åº¦å¾—åˆ† >= 0.10ï¼ˆå¯é…ç½®é˜ˆå€¼ï¼‰
- æ ‡ç­¾ç›¸åŒæˆ–éƒ¨åˆ†é‡å 
- åŠ¨ä½œç±»å‹ç›¸åŒï¼ˆç¨‹åº/åå¥½è®¾ç½®ï¼‰

## åæ¨¡å¼æ£€æµ‹ï¼ˆè‡ªåŠ¨æœºåˆ¶ï¼‰

è¯¥æ¨¡å—åŒ…å«å”¯ä¸€çš„è‡ªåŠ¨æ£€æµ‹æœºåˆ¶ï¼šå½“æ‰§è¡Œ `correct` å‘½ä»¤ä¸”å¤šæ¬¡ä¿®æ­£æ“ä½œä½¿ç”¨ç›¸åŒçš„æ ‡ç­¾æ—¶ï¼Œç³»ç»Ÿä¼šå»ºè®®åˆ›å»ºä¸€ä¸ªâ€œåæ¨¡å¼â€æ¡ç›®ã€‚è¿™ä¸€åŠŸèƒ½å·²åœ¨ä»£ç ä¸­å®ç°ã€‚
```bash
# After 3 corrections with tag "code.database":
# System prints: ANTI_PATTERN_DETECTED: tag 'code.database' has 3 corrections
# Suggests: add anti-pattern "Avoid inferring code.database - ask explicitly" inferred "code.database,caution"
```

## æ¨¡å¼æ¡ç›®çš„å­˜å‚¨

å­˜å‚¨çš„â€œæ¨¡å¼â€æ¡ç›®åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
- `source`: â€œæ¨æ–­å¾—å‡ºâ€ï¼ˆéç”¨æˆ·ç›´æ¥è¾“å…¥ï¼‰
- `confidence`: â€œä¸ç¡®å®šâ€ï¼ˆåœ¨å¾—åˆ°ç¡®è®¤ä¹‹å‰ï¼‰
- æ ‡ç­¾ï¼šç”¨äºå…³è”ç›¸å…³ä¸»é¢˜é¢†åŸŸ

## æ¨¡å¼çš„ç”Ÿå‘½å‘¨æœŸ

```
Behavior observed once     â†’ stored as fact/preference/procedure
Agent runs similar, finds 3+ matches â†’ agent creates pattern entry (uncertain)
User confirms pattern      â†’ ./scripts/memory.sh update <id> confidence sure
User denies pattern        â†’ ./scripts/memory.sh supersede <id> <new_id>
Pattern unused 60+ days    â†’ decayed via standard decay
```

## è¯¥æ¨¡å—ä¸æ‰§è¡Œçš„æ“ä½œï¼š
- è‡ªåŠ¨æ£€æµ‹æ¨¡å¼ï¼ˆéœ€è¦ä»£ç†æ‰‹åŠ¨è¿è¡Œ `similar` å‘½ä»¤ï¼‰
- æ‰§è¡Œè‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹
- è°ƒç”¨å¤–éƒ¨ API æˆ–æœåŠ¡
- è¿è¡Œå®šæ—¶ä»»åŠ¡

## é›†æˆæ–¹å¼ï¼š
- **å½’æ¡£**: ä»£ç†é€šè¿‡è¯»å– `similar` çš„æ£€æµ‹ç»“æœæ¥æ‰‹åŠ¨è¯†åˆ«æ¨¡å¼
- **è¯„ä¼°**: æ¨¡å¼æ¡ç›®çš„çŠ¶æ€æœ€åˆä¸ºâ€œä¸ç¡®å®šâ€ï¼Œåœ¨å¾—åˆ°ç¡®è®¤åæ‰ä¼šå‡çº§ä¸ºâ€œå·²ç¡®è®¤â€çŠ¶æ€