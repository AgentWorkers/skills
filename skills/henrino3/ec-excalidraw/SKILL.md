---
name: excalidraw
description: 使用 Excalidraw JSON 格式的数据生成手绘风格的图表、流程图和架构图，并将这些图表保存为 PNG 格式的图像。
---

# Excalidraw 图表生成器

该工具可以生成美观的手绘风格图表，并将其渲染为 PNG 图像。

## 工作流程

1. **生成 JSON 数据**：根据用户的需求，创建 Excalidraw 图表的元素数组。
2. **保存到文件**：将生成的 JSON 数据保存到 `/tmp/<name>.excalidraw` 文件中。
3. **渲染图像**：执行以下命令进行渲染：`node ~/clawd/skills/excalidraw/scripts/render.js /tmp/<name>.excalidraw /tmp/<name>.png`。
4. **根据使用场景进行交付**：

    - **如果通过聊天工具（如 Telegram、Discord、Slack 等）交流**：直接在聊天中发送 PNG 图像。
        **注意**：**绝对不要为用户创建单独的 `.excalidraw` 文件，应直接将其渲染为 PNG 图像并发送。**
    - **如果需要创建 Google 文档**：将 PNG 图像上传到 Google Drive，然后使用 Google 文档的 API 将图像插入文档中。**无需创建单独的文件或链接**。
    - **如果用户明确要求提供 `.excalidraw` 文件**：在这种情况下，才提供原始的 JSON 数据文件，以便用户在 Excalidraw 应用中进行编辑。

## 快速参考

（此处应包含 Excalidraw 的基本使用方法和常见图表的生成步骤）

## 元素类型

| 元素类型 | 形状 | 主要属性 |
|------|-------|-----------|
| `rectangle` | 矩形 | x, y, 宽度, 高度 |
| `ellipse` | 椭圆 | x, y, 宽度, 高度 |
| `diamond` | 菱形 | x, y, 宽度, 高度 |
| `arrow` | 箭头 | 用于连接其他形状（详见“箭头绑定”部分） |
| `line` | 直线 | x, y, 点坐标（格式：[[0,0],[dx,dy]] |
| `text` | 文本标签 | x, y, 文本内容, 字体大小, 字体样式（1=手写风格, 2=标准字体, 3=代码风格） |

## 图形样式（适用于所有形状）

（此处应包含图形的填充颜色、线条样式、粗糙度等设置）

**填充样式**：`hachure`（斜线）、`cross-hatch`（交叉线）、`solid`（实线）
**粗糙度**：0=清晰；1=手绘风格；2=非常草率的风格

## 箭头绑定（非常重要）

**箭头必须使用 `from` 和 `to` 属性进行绑定**。渲染器会自动计算箭头的起始点和终点坐标，无需手动计算。

### 简单箭头（直线，连接两个形状）
（此处应提供简单的箭头生成代码示例）

### 多段箭头（需要绕过障碍物的路径）
对于需要绕过障碍物的箭头，使用 `absolutePoints` 和中间路径点进行绘制：
（此处应提供多段箭头的生成代码示例）

- **第一个点**：位于起始形状的边缘附近（会自动对齐到实际边缘）。
- **最后一个点**：位于目标形状的边缘附近（会自动对齐到实际边缘）。
- **中间点**：用于确定箭头的路径。

### 箭头标签
在箭头的中间位置添加单独的文本标签：
（此处应提供箭头标签的放置方法）

## 箭头样式
- `"strokeStyle":"dashed"`：虚线箭头
- `"startArrowhead": true`：双向箭头

## 模板：带绑定的流程图
（此处应提供流程图的生成代码示例）

## 布局指南

- **节点大小**：140-200 × 50-70 像素
- **菱形**：180-200 × 100-120 像素（文本区域可适当调整高度）
- **节点间距**：垂直间距 60-100 像素；水平间距 80-120 像素
- **文本位置**：手动将文本放置在形状内部（通常距离形状左上角约 15-30 像素）
- **箭头标签**：将箭头标签作为单独的文本元素放置在箭头路径的中间位置

## 颜色方案

- **填充颜色**：`#a5d8ff`（蓝色）、`#b2f2bb`（绿色）、`#ffec99`（黄色）、`#ffc9c9`（红色）、`#d0bfff`（紫色）、`#f3d9fa`（粉色）、`#fff4e6`（米色）
- **线条颜色**：`#1e1e1e`（深色）、`#1971c2`（蓝色）、`#2f9e44`（绿色）、`#e8590c`（橙色）、`#862e9c`（紫色）
- **文本标签颜色**：`#868e96`（灰色，用于注释）

## 提示

- 每个元素都需要一个唯一的 `id`（用于绑定操作）。
- 箭头必须使用 `from` 和 `to` 属性进行连接，无需手动计算坐标。
- 设置 `roughness=0` 可获得清晰的图表效果；`roughness=1` 可获得草率的绘图效果。
- 文本字体样式 `fontFamily=1` 适用于手写风格；`fontFamily=3` 适用于代码风格。
- 将相关元素进行分组，并根据类型使用不同的颜色进行区分。
- 对于嵌套布局，可以使用一个较大的背景矩形作为容器。