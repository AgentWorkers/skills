---
name: farmos-weather
description: 通过Agronomy模块查询农田的天气数据和预报。
tags: [farming, weather, forecast]
---
# FarmOS 天气服务

提供农场田地的当前天气状况和预报信息，数据来源于农艺模块。

## 使用场景

**该功能支持的内容：**  
- 当前天气状况  
- 天气预报  
- 生长积温（GDD，Growing Degree Days）  
- 喷药条件评估  
- 农场田地的历史天气数据  

**相关查询语句：**  
- “天气怎么样？”  
- “我们现在可以喷药吗？”  
- “X田地的生长积温是多少？”  
- “天气预报是什么？”  
- “这周会下雨吗？”  
- “现在的温度和风速是多少？”  
- “田地的天气状况如何？”  

**不支持的内容：**  
- 有关冰雹、洪水或霜冻等天气造成的损害的实地观察数据（请使用farmos-observations功能，并指定weather_damage类型进行记录）。该功能仅提供天气信息，而观察数据用于记录实际发生的损害情况。  

**最低有效输入：**  
- “天气”或田地ID。如果未指定田地，系统会使用最近的田地ID（因为所有69块田地都位于印第安纳州中部）。  

## API基础地址  
http://100.102.77.110:8012  

## API端点  

### 健康检查  
GET /api/weather/health  
返回：天气服务的运行状态。  

### 当前天气  
GET /api/weather/field/{field_id}/current  
返回：特定田地的当前天气状况（温度、降水量、风速）。  

### 天气预报  
GET /api/weather/field/{field_id}/forecast?days=7  
返回：未来7天的每日和每小时天气预报数据。  

### 历史天气记录  
GET /api/weather/field/{field_id}/historical?days=30  
返回：指定田地的历史天气记录。  

### 生长积温  
GET /api/weather/field/{field_id}/gdd?startDate=YYYY-MM-DD&endDate=YYYY-MM-DD&baseTemp=10  
返回：指定时间范围内的生长积温数据。  

### 喷药条件评估  
GET /api/weather/field/{field_id}/spray-conditions  
返回：喷药条件评估结果（包括风速、降雨概率和温度信息）。  

### 根据坐标查询天气  
GET /api/weather/coordinates?latitude={lat}&longitude={lon}&type=current  
返回：根据坐标查询的天气信息（无需提供田地ID）。如需获取预报数据，请使用type=forecast。  

### 集成仪表板  
GET /api/integration/dashboard  
返回：包含天气数据在内的农艺综合信息。  

## 数据完整性说明：  
1. `/api/integration/dashboard` 提供农艺综合数据，仅用于快速查看，不可作为主要天气信息来源。  
2. 如果某个天气API端点无法响应或返回空数据，请明确告知用户：“天气服务当前无法正常使用。”切勿随意猜测天气情况。  
3. 在查询生长积温时，请务必提供日期范围，以便用户了解具体数据范围（例如：“4月1日至今天的生长积温为1,142。”）  

## 模块间的关联  
在回答天气相关问题时，需考虑农场内的其他相关因素：  

**天气与任务：**  
- 在回答“我们可以喷药吗？”或“我们应该去田里干活吗？”之前，先查看farmos-tasks中列出的任务安排。将天气预报与具体计划任务关联起来（例如：“周四到周六有降雨，如果你计划喷洒14号田地的作物，今天是最佳时机。”）  
- 在报告天气预报时，注意可能受天气影响的任务（例如：“本周有3项喷药任务，但周三风速会增大，今天和明天是最佳喷药时间。”）  
- 当生长积温达到关键阈值时（玉米的V6生长阶段需450 GDD、V7阶段需1,100 GDD、V8阶段需1,400 GDD），及时通知相关人员（例如：“12号田地的生长积温达到了1,100 GDD，现在是侧施肥的最佳时机。需要我创建一个任务吗？”）  

**天气与观察数据：**  
- 长时间降雨后气温升高时，需警惕病害风险（例如：“连续3天降雨，气温超过80华氏度，适合灰叶病和黑斑病的发生，建议本周检查玉米田。”）  
- 遭受霜冻或极端天气影响后，需检查作物是否受损（例如：“昨晚首次出现霜冻，建议检查晚播的田地是否受损。”）  
- 将近期天气与观察数据相结合（例如：“如果近期有病害发生，需注意其与天气的关联。”）  

**天气与设备：**  
- 如果预报有降雨且计划进行田间作业，需考虑天气对设备使用的影响（例如：“周四开始下雨，所有需要进入田间的设备都应提前准备好。”）  

在查询任何与田地作业相关的问题时，可以同时查看farmos-tasks和farmos-observations的数据。对于简单的“温度是多少？”之类的问题，无需每次都进行交叉核对；只有当天气对计划产生实质性影响时才需要交叉参考。  

**使用注意事项：**  
- 农场位于印第安纳州中部。如果无法获取特定田地的天气信息，可以使用当地的通用天气数据。  
- 喷药条件至关重要：风速应低于10英里/小时，未来24小时内无降雨，且温度符合要求。  
- 对于“我们可以喷药吗？”这样的问题，可通过spray-conditions端点查询风速、降雨概率和温度等信息。  
- 田地ID为整数，共有69块田地；大多数天气查询可以使用附近的田地ID。  
- 对于基于坐标的查询（无需提供田地ID），可使用/coordinates端点并输入农场的大致位置（例如：纬度约40.25，经度约-85.67）。