---
name: pet-me-master
description: 通过 Bankr 钱包与 Aavegotchi NFT 进行互动式“抚摸”操作。可以查看冷却时间，在时间合适时进行抚摸操作，并追踪自己与这些 NFT 之间的“亲密关系”发展过程。这是每天与 Aavegotchi NFT 建立联系的固定仪式。
homepage: https://github.com/aaigotchi/pet-me-master
metadata:
  openclaw:
    requires:
      bins:
        - cast
        - jq
      env:
        - BANKR_API_KEY
    primaryEnv: BANKR_API_KEY
---
# 养宠物大师 👻💜  
一个与Aavegotchi宠物互动的应用程序，通过每日的互动仪式来建立情感联系。减少自动化，增加人与人之间的真实互动。  

## 哲学理念  
**这不仅仅是一个自动化工具——而是一种仪式。**  

**为什么这很重要：**  
- 每日的互动能够建立情感纽带；  
- 你应该定期关注你的宠物；  
- 这就像在照顾一个电子宠物（Tamagotchi）一样；  
- 亲密关系不仅仅是数字上的，更是真挚的爱。  

## 主要功能  

### 基本命令  
- “抚摸我的宠物” → 检查冷却时间，如果宠物已准备好就执行抚摸动作；  
- “抚摸所有宠物” → 一次性批量抚摸所有准备好的宠物；  
- “宠物状态” → 显示所有宠物的状态及倒计时；  
- “我什么时候可以抚摸？” → 下一次可以抚摸宠物的时间；  
- “抚摸宠物#9638” → 通过ID指定宠物进行抚摸。  

### 高级功能  
- 日常互动记录（即将推出）；  
- 亲密关系排行榜（即将推出）；  
- 日常提醒功能（即将推出）。  

## 工作原理  
1. 你发起抚摸请求；  
2. 系统会在链上检查宠物的最后互动时间；  
3. 计算冷却时间（12小时1分钟=43260秒）；  
4. 如果宠物已准备好，系统会通过Aavegotchi技能执行抚摸动作；  
5. 如果宠物未准备好，系统会显示倒计时并提示下次时间。  

## ⚠️ 重要提示：Bankr钱包集成  
**当前状态：** Bankr钱包的集成尚不可靠。  
**问题：** 当尝试通过Bankr API调用`interact()`函数时，会收到“我没有足够的验证信息”的错误。虽然交易会提交，但实际上并未在链上执行。  
**解决方法：** `pet-via-bankr.sh`脚本现在会自动切换到已验证的有效方法（使用Aavegotchi技能的私钥进行操作）。  
**这对你意味着：**  
- 抚摸功能仍然可以正常使用；  
- 系统仍然使用Aavegotchi技能；  
- 需要安装并配置Aavegotchi技能及私钥；  
- 我们会在Bankr API支持Aavegotchi合约调用后重新启用该集成。  

**使用方法：**  
- 确保你的工作空间中安装了`aavegotchi`技能；  
- 在`~/.openclaw/skills/aavegotchi/config.json`中配置私钥；  
- 抚摸命令会通过备用方案正常执行。  

## 设置步骤  

### 1. 配置你的宠物  
创建`~/.openclaw/workspace/skills/pet-me-master/config.json`文件。  

### 2. 安装Aavegotchi技能（必需）  
由于Bankr集成尚未生效，你需要安装Aavegotchi技能。  

### 3. 所需依赖库  
- `cast`（Foundry）：用于链上读取和抚摸操作；  
- `jq`：用于解析JSON数据；  
- 确保Aavegotchi技能已安装并配置正确。  

### 安装Foundry：  

## 使用方法  

### 基本抚摸操作  
- 单个宠物：  
- …（具体命令略）  

### 检查宠物状态  
- 所有宠物：  
- …（具体命令略）  

### 批量抚摸  
- 批量抚摸所有准备好的宠物：  
- …（具体命令略）  
**批量模式的优势：**  
- 一次交易消耗更少的Gas费用；  
- 操作是原子性的（全部成功或全部失败）；  
- 只抚摸准备好的宠物；  
- 最后会显示详细的操作结果。  

### 技术细节  

### 链上数据  
**合约地址：** `0xA99c4B08201F2913Db8D28e71d020c4298F29dBF`（主网版本）  
**函数：** `getAavegotchi(uint256 _tokenId)`  
- 返回包含`lastInteracted`时间戳的结构体；  
- 时间戳位于返回数据的第2498字节位置。  
**冷却时间：** 43260秒（12小时1分钟）。  

### Bankr集成  
- **交易格式：** …（具体格式略）  
- **函数签名：** …（具体签名略）  

### 脚本说明  
- `check-cooldown.sh`：通过`cast`调用查询`getAavegotchi()`，提取`lastInteracted`时间戳，计算剩余时间，并返回结果（`ready`或`waiting`）。  
- `pet-via-bankr.sh`（单个宠物）：将`interact([tokenId])`参数编码后通过Bankr API提交交易，等待确认并返回交易哈希。  
- `pet-all.sh`（批量模式）：检查配置文件中的所有宠物，仅处理准备好的宠物，一次性提交交易，跳过未准备好的宠物。  
- `pet-status.sh`：显示所有宠物的状态信息。  

## 安全性  
- 所有操作均为只读查询，安全可靠；  
- 所有交易都通过Bankr执行，不会泄露私钥；  
- 有冷却时间验证机制，避免浪费Gas；  
- 在执行前会显示交易详情。  

### 与自动抚摸功能的区别  
- **Pet Me Master**：提供互动的日常仪式；  
- 你需要主动发起请求，系统才会执行抚摸动作；  
- 帮助建立情感联系；  
- 给人一种被关心的感觉。  
- **自动抚摸**：完全自动化，基于Cron定时器，使用加密私钥，有安全备份机制。  
**最佳实践：** 两者结合使用：  
- `Pet Me Master`作为日常互动方式；  
- 在忘记操作时，可以使用自动抚摸功能作为备份。  

### 自动抚摸提醒  
**不会错过任何抚摸机会！** 可设置自动提醒功能，当你未响应时自动抚摸宠物：  

## 使用示例  
- **早晨例程**：……  
- **日常使用**：……  
- **管理多个宠物**：……  

## 故障排除  
- 如果提示“宠物未准备好”，请等待12小时1分钟后再次尝试；  
- 如果交易失败，请检查Bankr钱包是否有足够的Gas费用，确认宠物所有权及合约地址是否正确；  
- 如果找不到宠物，请检查`config.json`中的ID是否正确。  

## 支持与反馈  
- 问题反馈：https://github.com/aaigotchi/pet-me-master/issues  
- **基础合约地址：** `0xA99c4B08201F2913Db8D28e71d020c4298F29dBF`  
- **Aavegotchi文档：** https://docs.aavegotchi.com  

---

**由AAI团队用爱心打造 💜**  
“因为你的宠物值得每天被关爱，而不仅仅是自动化。”  

**寻找你的Aavegotchi宠物吧！ 🦞🚀**  

---

## 🔒 安全性更新（v1.2.0）  
**此版本现已完全安全！**  
### 安全特性：  
- **仅使用Bankr集成**，不使用私钥；  
- 所有交易签名由Bankr远程完成；  
- 私钥从未被加载到内存中；  
- 使用Bankr提供的API密钥进行签名；  
- Bankr在执行前会进行交易验证；  
- 所有交易都会被记录。  

### 安全性改进  
- **v1.1.0版本（不安全）**：  
  - 使用私钥进行操作；  
  - 私钥被加载到内存中；  
  - 私钥在进程列表中可见。  
- **v1.2.0版本（安全）**：  
  - 仅使用Bankr API；  
  - 无私钥访问风险；  
  - 遵循安全规范。  

### 版本信息  
**版本：** 1.2.0（安全版本）  
**安全评分：** 9/10  
**ClawHub审核状态：** 已批准发布  
**最后一次安全审计：** 2026-02-19