---
name: opencortex
description: OpenClaw代理的自改进内存架构：将默认的扁平化内存结构转换为一种结构化、能够自我维护的知识系统，该系统会随着时间的推移变得越来越智能。适用场景包括：（1）设置新的OpenClaw实例；（2）用户希望改进或整理内存管理；（3）用户希望代理减少遗忘信息的情况；（4）使用最佳实践重新启动代理。**不适用于**运行时的内存搜索查询（请使用内置的内存管理工具）。相关触发命令包括：“set up memory”（设置内存）、”organize yourself”（整理内存）、”stop forgetting”（防止遗忘）、”memory architecture”（内存架构调整）、”self-improving”（自我优化）、”cortex”（核心处理模块）、”bootstrap memory”（内存初始化）、”memory optimization”（内存优化）。
---
# OpenCortex — 自我提升的记忆架构

将一个普通的 OpenClaw 代理转变为一个能够持续积累知识的系统。

## 功能概述

1. **将记忆内容** 组织成具有特定用途的文件，而非存储在一个扁平化的文件中。
2. **执行夜间维护任务**，将每日的工作成果转化为永久性的知识。
3. **进行每周的总结分析**，发现跨日的行为模式。
4. **建立行为准则**，以培养良好的记忆管理习惯。
5. **通过日常对话构建用户的语音特征档案**，用于代笔工作。
6. **提供安全的 Git 备份功能**，并自动清理敏感信息。

## 安装流程

从该技能目录运行 `scripts/install.sh` 脚本。该脚本是幂等的（可以重复执行而不会产生副作用）。

### 安装步骤

- 脚本会：
  - 创建文件结构（不会覆盖现有文件）。
  - 设置 cron 作业（每日数据整理、每周总结分析）。
  - （可选）配置带有敏感信息清理功能的 Git 备份。

安装完成后，会生成 `memory/VOICE.md` 文件，该文件记录了用户的语言风格、词汇使用、表达习惯和决策方式。请在代笔时使用该文件（例如撰写社区帖子、电子邮件或社交媒体内容），但不要用于日常对话。

安装完成后，请查看并自定义以下文件：
- `SOUL.md`：用户的个性和身份信息。
- `USER.md`：关于用户的详细信息。
- `MEMORY.md`：行为准则（根据需要添加或删除内容）。
- `.secrets-map`：用于存储用户的敏感信息，以便在备份时进行替换。

## 架构概述

### 默认安装的行为准则

| 编号 | 名称 | 目的 |
|-------|------|---------|
| P1   | 首先委派任务 | 评估任务是否适合委托给子代理处理；确保自己随时待命。 |
| P2   | 将内容记录下来 | 将想法和决策记录在文件中，而非仅存储在脑海中。 |
| P3   | 在执行外部操作前询问 | 在发送电子邮件、发布公开内容或执行可能造成影响的操作前先确认。 |
| P4   | 工具文档化 | 为每个工具/API 编写文档，明确其功能和使用方法。 |
| P5   | 记录决策过程 | 记录决策及其背后的理由，避免重复提问。 |
| P6   | 子代理事后汇报 | 子代理在完成任务后需将学习内容写入日志。 |
| P7   | 记录失败情况 | 在日志中标记失败或需要修正的错误，以便后续分析。 |

### Cron 作业安排

| 时间表 | 作业名称 | 功能描述 |
|--------|------------|-------------------|
| 每天凌晨 3 点（本地时间） | 数据整理 | 读取每日日志，整理成项目/工具/基础设施相关的文件，优化内容后存档。 |
| 每周周日凌晨 5 点 | 总结分析 | 分析一周内的行为模式、重复出现的问题及未完成的任务。 |

您可以通过编辑 `openclaw cron list` 文件，然后运行 `openclaw cron edit <id> --cron "..."` 命令来自定义 Cron 作业的时间。

夜间数据整理任务还会通过 `clawhub update opencortex` 命令检查 OpenCortex 的更新情况。如果有新版本可用，系统会自动下载并安装。

## Git 备份（可选）

如果启用了备份功能，系统会生成以下文件：
- `scripts/git-backup.sh`：每 6 小时自动提交一次数据。
- `scripts/git-scrub-secrets.sh`：在提交前将敏感信息替换为占位符。
- `scripts/git-restore-secrets.sh`：推送代码后恢复敏感信息。
- `.secrets-map`：将敏感信息映射到占位符（这些文件在 Git 中会被忽略，权限设置为 600）。

**添加敏感信息的方法**：在 `.secrets-map` 文件中以以下格式添加信息：`实际秘密|{{占位符名称}}`。

### 自定义方法

- **添加新项目**：创建 `memory/projects/my-project.md` 文件，并将其添加到 `MEMORY.md` 的索引中。夜间数据整理任务会将相关的日志条目关联到该项目。
- **添加新行为准则**：将其添加到 `MEMORY.md` 的 `🔴 PRINCIPLES` 部分。内容应简短明了（一句即可）。
- **添加操作手册**：创建 `memory/runbooks/my-procedure.md` 文件，其中包含详细的操作步骤。子代理可以直接参考这些手册。
- **添加新工具**：在 `TOOLS.md` 文件中记录工具的名称、使用方法及其功能描述，以便未来能够快速查找相关信息。

## 系统的自我提升机制

每天，这个代理都会变得更加知识丰富、组织更加有条理。