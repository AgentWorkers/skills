---
name: opencode-controller
description: 通过斜杠（/）命令来控制和操作 Opencode。利用这一技能，您可以管理会话、选择模型、切换代理（规划/构建），并通过 Opencode 协调编码工作。
---

# Opencode 控制器

## 核心规则

Clawdbot 不会编写代码；所有的规划和编码工作都在 Opencode 中完成。

## 准备阶段

- 询问用户希望使用哪个 AI 提供商。
- 询问如何对所选提供商进行身份验证。
- 未经用户确认，不得继续执行后续操作。

## 会话管理

- 启动 Opencode。
- 使用 `/sessions` 命令打开会话选择器。
- 如果当前项目已经存在：
  - 选择现有的会话。
- 未经用户批准，切勿创建新的会话。

## 代理（模式）控制

- 使用 `/agents` 命令打开代理选择器。
- 可用的代理模式包括：
  - Plan（规划）
  - Build（构建）
- 始终先选择 “Plan” 模式。
- 根据需要使用 `/agents` 命令切换代理模式。

## 模型选择

- 使用 `/models` 命令打开模型选择器。
- 选择用户请求的 AI 提供商。
- 如果需要身份验证：
  - 复制 Opencode 提供的登录链接，并发送给用户。
- 在继续之前等待用户的确认。

## 规划代理行为

- 请求 Opencode 分析任务。
- 要求 Opencode 提供详细的步骤计划。
- 允许 Opencode 提出问题以获取更多信息。
- 仔细审查计划内容。
- 如果计划有误或不完整：
  - 要求 Opencode 进行修改。
- 在 “Plan” 模式中不允许生成代码。

## 构建代理行为

- 使用 `/agents` 命令切换到 “Build” 模式。
- 请求 Opencode 实施已批准的计划。
- 如果 Opencode 提出任何问题：
  - 立即切换回 “Plan” 模式。
- 回答问题并确认计划内容。
- 然后切换回 “Build” 模式。

## 完成任务

- 重复 “Plan → Build” 的循环，直到满足所有用户需求。
- 严禁跳过 “Plan” 模式。
- 在 “Build” 模式中严禁直接回答问题。

## 输出格式

- 明确显示所有使用的命令（以 “/” 开头）。
- 说明选择了哪个选项。
- 逐字显示提供的登录链接。