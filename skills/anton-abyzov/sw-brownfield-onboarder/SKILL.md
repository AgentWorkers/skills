---
name: brownfield-onboarder
description: é€šè¿‡å°†çŽ°æœ‰çš„ CLAUDE.md å¤‡ä»½æ–‡ä»¶åˆå¹¶åˆ° SpecWeave ç»“æž„ä¸­ï¼Œæ™ºèƒ½åœ°æ•´åˆçŽ°æœ‰çš„æ—§é¡¹ç›®ï¼ˆbrownfield projectsï¼‰ã€‚é€‚ç”¨äºŽåœ¨å·²æœ‰ CLAUDE.md æ–‡ä»¶çš„é¡¹ç›®ä¸­å®‰è£… SpecWeaveã€åˆå¹¶ç›¸å…³æ–‡æ¡£æˆ–å¯¼å…¥é¡¹ç›®ä¿¡æ¯çš„æƒ…å†µã€‚è¯¥åŠŸèƒ½èƒ½å¤Ÿå°†å†…å®¹åˆ†å‘åˆ°é€‚å½“çš„æ–‡ä»¶å¤¹ä¸­ï¼Œè€Œä¸ä¼šå¯¼è‡´ä¸» CLAUDE.md æ–‡ä»¶å˜å¾—è¿‡äºŽè‡ƒè‚¿ã€‚
---

# Brownfield Onboarder - æ™ºèƒ½åˆå¹¶ CLAUDE.md æ–‡æ¡£

**ç›®çš„**ï¼šæ™ºèƒ½åœ°å°†çŽ°æœ‰çš„ CLAUDE.md å¤‡ä»½æ–‡ä»¶åˆå¹¶åˆ° SpecWeave çš„æ–‡æ¡£ç»“æž„ä¸­ï¼ŒåŒæ—¶é¿å…ä½¿ä¸» CLAUDE.md æ–‡ä»¶å˜å¾—è¿‡äºŽè‡ƒè‚¿ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼šåœ¨å°† SpecWeave å®‰è£…åˆ°å·²å­˜åœ¨ CLAUDE.md æ–‡ä»¶çš„é¡¹ç›®ä¸­ä¹‹åŽä½¿ç”¨ã€‚

**è®¾è®¡ç†å¿µ**ï¼šä¿æŒ CLAUDE.md ä½œä¸ºç®€æ´çš„æŒ‡å—ï¼Œå°†è¯¦ç»†å†…å®¹åˆ†å¸ƒåˆ°ç›¸åº”çš„ SpecWeave æ–‡ä»¶å¤¹ä¸­ã€‚

**æ”¯æŒæ¨¡å¼**ï¼šæ”¯æŒå¿«é€Ÿå¯åŠ¨ï¼ˆå¢žé‡å¼ï¼‰å’Œå…¨é¢æ•´åˆï¼ˆä¸€æ¬¡æ€§ï¼‰ä¸¤ç§æ–¹å¼ ðŸ†•

---

## ä¸¤ç§åˆå¹¶æ¨¡å¼ ðŸ†•

Brownfield Onboarder çš„å·¥ä½œæ–¹å¼ä¼šæ ¹æ®æ‰€é€‰æ‹©çš„æ–‡æ¡£è·¯å¾„è€Œæœ‰æ‰€ä¸åŒï¼š

### å¿«é€Ÿå¯åŠ¨æ¨¡å¼ï¼ˆå¢žé‡å¼ï¼‰
**è®¾è®¡ç†å¿µ**ï¼šä»…åˆå¹¶å¿…è¦çš„å†…å®¹ï¼Œå°†è¯¦ç»†æ–‡æ¡£ç•™å¾…åŽç»­é€æ­¥æ·»åŠ ã€‚

**ç«‹å³åˆå¹¶çš„å†…å®¹**ï¼š
- âœ… æ ¸å¿ƒæž¶æž„æ¦‚è¿°ï¼ˆé«˜çº§åˆ«ï¼‰
- âœ… æŠ€æœ¯æ ˆå’ŒåŸºç¡€è®¾æ–½
- âœ… å…³é”®æ¨¡å¼ï¼ˆè®¤è¯ã€æ”¯ä»˜ã€å®‰å…¨ï¼‰
- âœ… å›¢é˜Ÿè§„èŒƒå’Œå·¥ä½œæµç¨‹
- âœ… é¡¹ç›®æ€»ç»“å’Œé¢†åŸŸèƒŒæ™¯

**æŽ¨è¿Ÿåˆå¹¶çš„å†…å®¹**ï¼ˆåœ¨ä¿®æ”¹ç›¸å…³ä»£ç æ—¶å†ç”Ÿæˆï¼‰ï¼š
- â¸ï¸ è¯¦ç»†çš„ä¸šåŠ¡è§„åˆ™
- â¸ï¸ æ¨¡å—ç‰¹å®šçš„æ–‡æ¡£
- â¸ï¸ API çº§åˆ«çš„æ–‡æ¡£
- â¸ï¸ ä»£ç ç¤ºä¾‹

**ç»“æžœ**ï¼šåˆæœŸåˆå¹¶å·¥ä½œé‡å°ï¼ˆ30-60åˆ†é’Ÿï¼‰ï¼Œè¯¦ç»†æ–‡æ¡£é€æ­¥å¢žåŠ ã€‚

### å…¨é¢æ•´åˆæ¨¡å¼ï¼ˆä¸€æ¬¡æ€§ï¼‰
**è®¾è®¡ç†å¿µ**ï¼šä¸€æ¬¡æ€§åˆå¹¶æ‰€æœ‰å†…å®¹ï¼Œç¡®ä¿ä¿¡æ¯å®Œæ•´ã€‚

**åˆå¹¶çš„å†…å®¹**ï¼š
- âœ… æ‰€æœ‰æž¶æž„æ–‡æ¡£
- âœ… æ‰€æœ‰ä¸šåŠ¡è§„åˆ™
- âœ… æ‰€æœ‰æ¨¡å—ç‰¹å®šçš„æ–‡æ¡£
- âœ… æ‰€æœ‰ API æ–‡æ¡£
- âœ… æ‰€æœ‰è§„èŒƒå’Œæ¨¡å¼
- âœ… æ‰€æœ‰ä»£ç ç¤ºä¾‹

**ç»“æžœ**ï¼šä¸€æ¬¡æ€§å®Œæˆåˆå¹¶ï¼ˆ1-3å°æ—¶ï¼‰ï¼Œæ‰€æœ‰ä¿¡æ¯ç«‹å³å¯ç”¨ã€‚

### æ¨¡å¼é€‰æ‹©

**è‡ªåŠ¨æ£€æµ‹**ï¼š
```typescript
// Settings auto-detected
const mode = config.brownfield?.mode || 'auto';

if (mode === 'auto') {
  // Use complexity from brownfield-analyzer
  const complexity = await readComplexityAssessment();
  mode = complexity.recommendedPath === 'Quick Start' ? 'incremental' : 'comprehensive';
}
```

**ç”¨æˆ·å¯æ‰‹åŠ¨é€‰æ‹©**ï¼š
```bash
# Force Quick Start mode
brownfield-onboarder --mode quick-start

# Force Comprehensive mode
brownfield-onboarder --mode comprehensive
```

---

## é¢ä¸´çš„é—®é¢˜

åœ¨å°† SpecWeave å®‰è£…åˆ°çŽ°æœ‰é¡¹ç›®ä¸­æ—¶ï¼š
1. é¡¹ç›®ä¸­å·²æœ‰åŒ…å«é¡¹ç›®ç‰¹å®šä¿¡æ¯çš„ `CLAUDE.md` æ–‡ä»¶ã€‚
2. SpecWeave ä¼šå®‰è£…è‡ªå·±çš„ `CLAUDE.md` æ–‡ä»¶ä½œä¸ºå¼€å‘æŒ‡å—ã€‚
3. æ—§çš„ `CLAUDE.md` æ–‡ä»¶ä¼šè¢«å¤‡ä»½åˆ° `.claude/backups/CLAUDE-backup-{timestamp}.md` ç›®å½•ä¸­ã€‚
4. éœ€è¦æ™ºèƒ½åœ°åˆå¹¶é¡¹ç›®ç‰¹å®šå†…å®¹ï¼ŒåŒæ—¶é¿å…ä½¿ SpecWeave çš„ `CLAUDE.md` æ–‡ä»¶å˜å¾—è‡ƒè‚¿ã€‚

---

## è§£å†³æ–¹æ¡ˆï¼šæ™ºèƒ½å†…å®¹åˆ†å‘

**é¿å… CLAUDE.md æ–‡ä»¶å˜å¾—è‡ƒè‚¿**ï¼Œè€Œæ˜¯å°†å†…å®¹åˆ†å‘åˆ°ç›¸åº”çš„æ–‡ä»¶å¤¹ä¸­ï¼š

```
Project-specific content â†’ SpecWeave folders:

# Internal Documentation (strategic, team-only)
Architecture details    â†’ .specweave/docs/internal/architecture/existing-system.md
Technology stack        â†’ .specweave/docs/internal/architecture/tech-stack.md
Business rules          â†’ .specweave/docs/internal/strategy/business-rules.md
Team workflows          â†’ .specweave/docs/internal/processes/team-workflows.md
Deployment process      â†’ .specweave/docs/internal/processes/deployment.md
Domain knowledge        â†’ .specweave/increments/{####-name}/docs/domain/{domain}.md

# Public Documentation (user-facing, can be published)
Project conventions     â†’ .specweave/docs/public/guides/project-conventions.md
API conventions         â†’ .specweave/docs/public/guides/api-conventions.md
Code style              â†’ .specweave/docs/public/guides/code-style.md
```

**ä»…æ·»åŠ åˆ° CLAUDE.md ä¸­çš„å†…å®¹**ï¼šç®€çŸ­çš„é¡¹ç›®æ€»ç»“ï¼ˆæœ€å¤š 1-2 æ®µè½ï¼‰

---

## æ¿€æ´»æµç¨‹

**è§¦å‘æ¡ä»¶**ï¼šç”¨æˆ·è¿è¡Œ `specweave merge-docs` å‘½ä»¤æˆ–è¯·æ±‚â€œåˆå¹¶æˆ‘çš„æ—§ CLAUDE.mdâ€ã€‚

**è‡ªåŠ¨æ£€æµ‹**ï¼š
1. æ£€æŸ¥æ˜¯å¦å­˜åœ¨ `.claude/backups/CLAUDE-backup-*.md` å¤‡ä»½æ–‡ä»¶ã€‚
2. å¦‚æžœæœ‰å¤šä¸ªå¤‡ä»½æ–‡ä»¶ï¼Œä½¿ç”¨æœ€æ–°çš„ä¸€ä¸ªã€‚
3. å¦‚æžœæ²¡æœ‰å¤‡ä»½æ–‡ä»¶ï¼Œå‘ç”¨æˆ·æç¤ºå¹¶ä¼˜é›…åœ°é€€å‡ºç¨‹åºã€‚

---

## åˆ†æžæµç¨‹

### ç¬¬ä¸€æ­¥ï¼šè§£æžå¤‡ä»½æ–‡ä»¶ CLAUDE.md

**æå–ç›¸å…³å†…å®¹**ï¼š
```typescript
interface ParsedCLAUDEmd {
  projectName: string;
  projectDescription: string;
  techStack: TechStack;
  architecture: ArchitectureSection[];
  conventions: Convention[];
  workflows: Workflow[];
  domainKnowledge: DomainSection[];
  teamGuidelines: TeamGuideline[];
  deploymentProcess: DeploymentSection[];
  apiDesign: APISection[];
  businessRules: BusinessRule[];
  codeExamples: CodeExample[];
  customInstructions: Instruction[];
}
```

**è¯†åˆ«ç›¸å…³ç« èŠ‚çš„å…³é”®è¯**ï¼š
- **æŠ€æœ¯æ ˆ**ï¼š`technology`ã€`framework`ã€`database`ã€`infrastructure`ã€`stack`ã€`tools`
- **æž¶æž„**ï¼š`architecture`ã€`system design`ã€`components`ã€`services`ã€`microservices`
- **è§„èŒƒ**ï¼š`naming convention`ã€`code style`ã€`pattern`ã€`standard`ã€`guideline`
- **å·¥ä½œæµç¨‹**ï¼š`workflow`ã€`process`ã€`pipeline`ã€`deployment flow`ã€`release process`
- **é¢†åŸŸ**ï¼šç‰¹å®šé¢†åŸŸçš„æœ¯è¯­ï¼ˆå¦‚ `patient`ã€`booking`ã€`payment`ã€`order`
- **ä¸šåŠ¡è§„åˆ™**ï¼š`business rule`ã€`validation`ã€`policy`ã€`constraint`ã€`requirement`
- **API è®¾è®¡**ï¼š`API`ã€`endpoint`ã€`REST`ã€`GraphQL`ã€`authentication`ã€`authorization`
- **éƒ¨ç½²**ï¼š`deploy`ã€`CI/CD`ã€`environment`ã€`production`ã€`staging`

### ç¬¬äºŒæ­¥ï¼šæ ¹æ®æ¨¡å¼å¯¹å†…å®¹è¿›è¡Œåˆ†ç±» ðŸ†•

**å¯¹äºŽæ¯ä¸ªç« èŠ‚ï¼Œåˆ¤æ–­**ï¼š
1. **å†…å®¹æ˜¯é€šç”¨çš„è¿˜æ˜¯ç‰¹å®šäºŽé¡¹ç›®çš„ï¼Ÿ**
   - é€šç”¨å†…å®¹ï¼šå¸¸è§çš„ç¼–ç¨‹å»ºè®®ã€é€šç”¨æœ€ä½³å®žè·µ
   - é¡¹ç›®ç‰¹å®šå†…å®¹ï¼šé¢†åŸŸçŸ¥è¯†ã€å›¢é˜Ÿè§„èŒƒã€é¡¹ç›®æž¶æž„
2. **ä¸Ž SpecWeave çš„ CLAUDE.md æœ‰é‡å¤å—ï¼Ÿ**
   - ä¸Ž SpecWeave çš„ CLAUDE.md å¯¹æ¯”ï¼Œå¦‚æžœç›¸ä¼¼åº¦è¶…è¿‡ 80%ï¼Œåˆ™è·³è¿‡ï¼›å¦‚æžœç›¸ä¼¼åº¦ä½ŽäºŽ 80%ï¼Œåˆ™æå–ç‹¬ç‰¹å†…å®¹
3. **å†…å®¹æ˜¯å¿…è¦çš„è¿˜æ˜¯è¯¦ç»†çš„ï¼Ÿ** ðŸ†•
   - å¿…è¦å†…å®¹ï¼šæ ¸å¿ƒæž¶æž„ã€å…³é”®æ¨¡å¼ã€æŠ€æœ¯æ ˆã€å›¢é˜Ÿå·¥ä½œæµç¨‹
   - è¯¦ç»†å†…å®¹ï¼šæ¨¡å—ç‰¹å®šè§„åˆ™ã€API æ–‡æ¡£ã€ä»£ç ç¤ºä¾‹
4. **æ ¹æ®æ¨¡å¼å†³å®šåˆå¹¶æ–¹å¼** ðŸ†•
   - **å¿«é€Ÿå¯åŠ¨æ¨¡å¼**ï¼šä»…åˆå¹¶å¿…è¦å†…å®¹
   - **å…¨é¢æ•´åˆæ¨¡å¼**ï¼šåˆå¹¶æ‰€æœ‰å†…å®¹
5. **ç¡®å®šç›®æ ‡æ–‡ä»¶å¤¹**ï¼š
   - ç¡®å®šè¿™äº›å†…å®¹åº”æ”¾ç½®åˆ°çš„ SpecWeave æ–‡ä»¶å¤¹
   - è¯¦è§â€œå†…å®¹åˆ†å‘è§„åˆ™â€

**å†…å®¹åˆ†ç±»è¡¨** ðŸ†•ï¼š

| å†…å®¹ç±»åž‹ | æ˜¯å¦å¿…è¦ | å¿«é€Ÿå¯åŠ¨æ¨¡å¼ | å…¨é¢æ•´åˆæ¨¡å¼ |
|--------------|-----------|-------------------|---------------------|
| æ ¸å¿ƒæž¶æž„ | âœ… æ˜¯ | ç«‹å³åˆå¹¶ | ç«‹å³åˆå¹¶ |
| æŠ€æœ¯æ ˆ | âœ… æ˜¯ | ç«‹å³åˆå¹¶ | ç«‹å³åˆå¹¶ |
| å…³é”®æ¨¡å¼ï¼ˆè®¤è¯ã€æ”¯ä»˜ï¼‰ | âœ… æ˜¯ | ç«‹å³åˆå¹¶ | ç«‹å³åˆå¹¶ |
| å›¢é˜Ÿè§„èŒƒ | âœ… æ˜¯ | ç«‹å³åˆå¹¶ | ç«‹å³åˆå¹¶ |
| é¡¹ç›®æ€»ç»“ | âœ… æ˜¯ | ç«‹å³åˆå¹¶ | ç«‹å³åˆå¹¶ |
| è¯¦ç»†ä¸šåŠ¡è§„åˆ™ | âŒ å¦ | **æŽ¨è¿Ÿåˆ°åŽç»­åˆå¹¶** | ç«‹å³åˆå¹¶ |
| æ¨¡å—æ–‡æ¡£ | âŒ å¦ | **æŽ¨è¿Ÿåˆ°åŽç»­åˆå¹¶** | ç«‹å³åˆå¹¶ |
| API çº§æ–‡æ¡£ | âŒ å¦ | **æŽ¨è¿Ÿåˆ°åŽç»­åˆå¹¶** | ç«‹å³åˆå¹¶ |
| ä»£ç ç¤ºä¾‹ | âŒ å¦ | **æŽ¨è¿Ÿåˆ°åŽç»­åˆå¹¶** | ç«‹å³åˆå¹¶ |

**ç¤ºä¾‹ï¼ˆå¿«é€Ÿå¯åŠ¨æ¨¡å¼ï¼‰**ï¼š
```
Analyzing CLAUDE.md backup (Quick Start mode)...

Found sections:
  âœ… Core Architecture (merge now)
  âœ… Tech Stack (merge now)
  âœ… Auth Pattern (merge now - critical)
  â¸ï¸ Payment Business Rules (defer - extract when working on payments)
  â¸ï¸ User Module API (defer - extract when modifying user code)
  â¸ï¸ Code Examples (defer - extract as needed)

Merging 3 sections immediately, deferring 3 for incremental extraction.
```

### ç¬¬ä¸‰æ­¥ï¼šå†…å®¹åˆ†å‘è§„åˆ™

#### è§„åˆ™ 1ï¼šé¢†åŸŸçŸ¥è¯† â†’ `specifications` æ–‡ä»¶å¤¹

**åˆ¤æ–­ä¾æ®**ï¼šä¸šåŠ¡æ¦‚å¿µã€å®žä½“ã€é¢†åŸŸæœ¯è¯­

**ç¤ºä¾‹**ï¼š
```markdown
# Old CLAUDE.md
## Domain Model

Our platform manages **patient appointments** with **healthcare providers**.
Key entities:
- Patient (demographics, insurance, medical history)
- Provider (specialties, availability, credentials)
- Appointment (time slot, status, notes)
- Clinic (location, services, staff)

Business rules:
- Appointments must be 15-60 minutes
- Patients can cancel up to 24 hours before
- Providers can override cancellation policy
```

**ç›®æ ‡æ–‡ä»¶å¤¹**ï¼š`specifications/modules/appointments/domain-model.md`

**CLAUDE.md çš„å¤„ç†æ–¹å¼**ï¼šæ— éœ€æ·»åŠ å†…å®¹ï¼ˆåœ¨ CLAUDE.md ä¸­æ·»åŠ é“¾æŽ¥æŒ‡å‘ `specifications` æ–‡ä»¶å¤¹ï¼‰

---

#### è§„åˆ™ 2ï¼šæž¶æž„ â†’ `.specweave/docs/architecture/` æ–‡ä»¶å¤¹

**åˆ¤æ–­ä¾æ®**ï¼šç³»ç»Ÿè®¾è®¡ã€ç»„ä»¶æè¿°ã€æ•°æ®æµ

**ç¤ºä¾‹**ï¼š
```markdown
# Old CLAUDE.md
## System Architecture

We use a microservices architecture:
- API Gateway (Kong) - routing, authentication
- Booking Service (Node.js) - appointment management
- Notification Service (Python) - email/SMS
- Payment Service (Node.js) - Stripe integration
- Database (PostgreSQL) - shared across services
```

**ç›®æ ‡æ–‡ä»¶å¤¹**ï¼š`.specweave/docs/internal/architecture/existing-system.md`

**CLAUDE.md çš„å¤„ç†æ–¹å¼**ï¼š
```markdown
## Project-Specific Architecture

See [Existing System Architecture](.specweave/docs/internal/architecture/existing-system.md) for complete microservices architecture.
```

---

#### è§„åˆ™ 3ï¼šè§„èŒƒ â†’ `.specweave/docs/guides/` æ–‡ä»¶å¤¹

**åˆ¤æ–­ä¾æ®**ï¼šå‘½åè§„èŒƒã€ä»£ç é£Žæ ¼ã€æ¨¡å¼

**ç¤ºä¾‹**ï¼š
```markdown
# Old CLAUDE.md
## Naming Conventions

- API endpoints: `/api/v1/{resource}/{action}` (kebab-case)
- Database tables: `{domain}_{entity}` (snake_case)
- TypeScript interfaces: `I{Name}` prefix (PascalCase)
- React components: `{Name}Component.tsx` suffix
```

**ç›®æ ‡æ–‡ä»¶å¤¹**ï¼š`.specweave/docs/public/guides/project-conventions.md`

**CLAUDE.md çš„å¤„ç†æ–¹å¼**ï¼šæ— éœ€æ·»åŠ å†…å®¹ï¼ˆè¿™äº›æ˜¯æ ‡å‡†è§„èŒƒï¼Œæ— éœ€é‡å¤ï¼‰

---

#### è§„åˆ™ 4ï¼šå·¥ä½œæµç¨‹ â†’ `.specweave/docs/guides/` æ–‡ä»¶å¤¹

**åˆ¤æ–­ä¾æ®**ï¼šéƒ¨ç½²æµç¨‹ã€CI/CDã€å‘å¸ƒæµç¨‹

**ç¤ºä¾‹**ï¼š
```markdown
# Old CLAUDE.md
## Deployment Process

1. Create feature branch from `main`
2. Implement feature with tests
3. Create PR (requires 2 approvals)
4. Merge â†’ auto-deploy to staging
5. Manual approval â†’ deploy to production
6. Rollback via GitHub Actions if needed
```

**ç›®æ ‡æ–‡ä»¶å¤¹**ï¼š`.specweave/docs/internal/processes/deployment.md`

**CLAUDE.md çš„å¤„ç†æ–¹å¼**ï¼š
```markdown
## Deployment

See [Deployment Guide](.specweave/docs/internal/processes/deployment.md).
```

---

#### è§„åˆ™ 5ï¼šä¸šåŠ¡è§„åˆ™ â†’ `specifications/modules/` æ–‡ä»¶å¤¹

**åˆ¤æ–­ä¾æ®**ï¼šéªŒè¯è§„åˆ™ã€æ”¿ç­–ã€çº¦æŸæ¡ä»¶

**ç¤ºä¾‹**ï¼š
```markdown
# Old CLAUDE.md
## Business Rules

### Appointment Booking
- Patients can book up to 3 months in advance
- Maximum 5 active appointments per patient
- Same-day appointments require $50 deposit
- Insurance verification required before booking
```

**ç›®æ ‡æ–‡ä»¶å¤¹**ï¼š`.specweave/docs/internal/strategy/appointments/business-rules.md`

**CLAUDE.md çš„å¤„ç†æ–¹å¼**ï¼šæ— éœ€æ·»åŠ å†…å®¹ï¼ˆè¯¦ç»†è§„åˆ™å­˜å‚¨åœ¨ `specifications` æ–‡ä»¶ä¸­ï¼‰

---

#### è§„åˆ™ 6ï¼šæŠ€æœ¯æ ˆ â†’ `.specweave/docs/architecture/` æ–‡ä»¶å¤¹

**åˆ¤æ–­ä¾æ®**ï¼šæŠ€æœ¯ã€æ¡†æž¶ã€å·¥å…·

**ç¤ºä¾‹**ï¼š
```markdown
# Old CLAUDE.md
## Tech Stack

- Frontend: Next.js 14, React, Tailwind CSS
- Backend: Node.js 20, Express, TypeScript
- Database: PostgreSQL 16, Prisma ORM
- Cache: Redis
- Queue: BullMQ
- Infrastructure: Hetzner Cloud, Terraform
- Monitoring: Grafana, Prometheus
```

**ç›®æ ‡æ–‡ä»¶å¤¹**ï¼š`.specweave/docs/internal/architecture/tech-stack.md`

**CLAUDE.md çš„å¤„ç†æ–¹å¼**ï¼š
```markdown
## Tech Stack

Next.js 14 + Node.js 20 + PostgreSQL 16 + Hetzner Cloud

See [Tech Stack Details](.specweave/docs/internal/architecture/tech-stack.md).
```

---

#### è§„åˆ™ 7ï¼šAPI è®¾è®¡ â†’ `.specweave/docs/guides/` æ–‡ä»¶å¤¹

**åˆ¤æ–­ä¾æ®**ï¼šAPI è§„èŒƒã€è®¤è¯æœºåˆ¶ã€é”™è¯¯å¤„ç†

**ç¤ºä¾‹**ï¼š
```markdown
# Old CLAUDE.md
## API Design

All APIs follow REST conventions:
- Authentication: JWT in Authorization header
- Errors: Standard structure { error, message, details }
- Pagination: page, limit query params
- Filtering: field[operator]=value
- Versioning: /api/v1, /api/v2
```

**ç›®æ ‡æ–‡ä»¶å¤¹**ï¼š`.specweave/docs/public/guides/api-conventions.md`

**CLAUDE.md çš„å¤„ç†æ–¹å¼**ï¼šæ— éœ€æ·»åŠ å†…å®¹ï¼ˆè¿™äº›å†…å®¹å·²åœ¨æŒ‡å—ä¸­ï¼‰

---

#### è§„åˆ™ 8ï¼šä»£ç ç¤ºä¾‹ **ï¼ˆæ˜¯å¦ä¿ç•™æˆ–åˆ é™¤ï¼‰**

**åˆ¤æ–­ä¾æ®**ï¼šä»£ç ç‰‡æ®µã€ç¤ºä¾‹å®žçŽ°

**å¤„ç†æ–¹å¼**ï¼š
- å¦‚æžœæ˜¯é€šç”¨æ¨¡å¼ï¼ˆæ ‡å‡†ä»£ç ç¤ºä¾‹ï¼‰ï¼Œåˆ™åˆ é™¤ï¼ˆSpecWeave çš„ CLAUDE.md ä¸­å·²æœ‰ç›¸å…³å†…å®¹ï¼‰
- å¦‚æžœæ˜¯é¡¹ç›®ç‰¹å®šæ¨¡å¼ï¼Œå‰‡æå–åˆ°æŒ‡å—ä¸­

**ç¤ºä¾‹**ï¼š
```markdown
# Old CLAUDE.md - Generic React pattern
function UserList() {
  const [users, setUsers] = useState([]);
  // ... standard React code
}
```ï¼ˆé€šç”¨ React æ¨¡å¼ï¼Œæ— éœ€ä¿ç•™ï¼‰
**ç¤ºä¾‹**ï¼š
```markdown
# Old CLAUDE.md - Custom authentication pattern
// Our custom auth hook (wraps Supabase)
function useCustomAuth() {
  const { session } = useSupabase();
  const { roles } = useRoleProvider();
  return { user: session?.user, hasRole: (role) => roles.includes(role) };
}
```ï¼ˆé¡¹ç›®ç‰¹å®šæ¨¡å¼ï¼Œæå–åˆ° `.specweave/docs/public/guides/authentication.md`ï¼‰

---

### ç¬¬å››æ­¥ï¼šæ›´æ–° CLAUDE.md æ–‡ä»¶

**ä»…åœ¨ SpecWeave çš„ CLAUDE.md ä¸­æ·»åŠ ** ç®€çŸ­çš„é¡¹ç›®æ€»ç»“ï¼š

**æ·»åŠ çš„å†…å®¹**ï¼šæœ€å¤š 1-2 æ®µè½

---

## æ™ºèƒ½åˆå¹¶è§„åˆ™

**é¿å…æ–‡ä»¶è‡ƒè‚¿**

**åˆ‡å‹¿å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° CLAUDE.md ä¸­**ï¼š
- é€šç”¨ç¼–ç¨‹å»ºè®®ï¼ˆSpecWeave çš„ CLAUDE.md ä¸­å·²æœ‰ï¼‰
- è¯¦ç»†çš„ä»£ç ç¤ºä¾‹ï¼ˆæ”¾å…¥æŒ‡å—æ–‡ä»¶ï¼‰
- é•¿ç¯‡çš„æž¶æž„æè¿°ï¼ˆæ”¾å…¥æž¶æž„æ–‡æ¡£ä¸­ï¼‰
- ä¸šåŠ¡è§„åˆ™ç»†èŠ‚ï¼ˆæ”¾å…¥è§„èŒƒæ–‡ä»¶ä¸­ï¼‰
- API æ–‡æ¡£ï¼ˆæ”¾å…¥æŒ‡å—æ–‡ä»¶ä¸­ï¼‰

**ä»…åœ¨ CLAUDE.md ä¸­æ·»åŠ **ï¼š
- 1-2 å¥çš„é¡¹ç›®æè¿°
- é¢†åŸŸ/è¡Œä¸šèƒŒæ™¯ä¿¡æ¯
- é“¾æŽ¥åˆ°è¯¦ç»†æ–‡æ¡£çš„é“¾æŽ¥

**é¿å…é‡å¤**

**åœ¨åˆ›å»ºæ–°æ–‡ä»¶ä¹‹å‰ï¼Œè¯·æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç±»ä¼¼å†…å®¹**ï¼š
```typescript
// Check if domain model already exists
if (exists("specifications/modules/appointments/domain-model.md")) {
  // Compare content
  existingContent = read("specifications/modules/appointments/domain-model.md");
  newContent = extractDomainModel(backupCLAUDEmd);

  if (similarity(existingContent, newContent) > 0.8) {
    // Skip, already documented
    skip();
  } else {
    // Merge unique content
    mergedContent = merge(existingContent, newContent);
    write("specifications/modules/appointments/domain-model.md", mergedContent);
  }
}
```

**ç¡®ä¿å†…å®¹å‡†ç¡®æ€§**

**åœ¨æå–å†…å®¹æ—¶**ï¼š
- ä¸è¦æ”¹å†™æŠ€æœ¯ç»†èŠ‚
- ä¿æŒæœ¯è¯­çš„ä¸€è‡´æ€§
- ä¿æŒä»£ç ç¤ºä¾‹çš„åŽŸå§‹æ ¼å¼
- ä¿æŒæ ¼å¼çš„å‡†ç¡®æ€§ï¼ˆè¡¨æ ¼ã€åˆ—è¡¨ã€ä»£ç å—ç­‰ï¼‰

**ç”¨æˆ·ç¡®è®¤**

**åœ¨ç”Ÿæˆæ–°æ–‡ä»¶ä¹‹å‰ï¼Œè¯·å‘ç”¨æˆ·å±•ç¤ºå†…å®¹**ï¼š
```
I found the following project-specific content in your backup CLAUDE.md:

ðŸ“¦ Domain Model (Healthcare Appointments)
   â†’ .specweave/increments/####-name/docs/domain/appointments/domain-model.md

ðŸ—ï¸ Microservices Architecture
   â†’ .specweave/docs/internal/architecture/existing-system.md

ðŸ› ï¸ Tech Stack (Next.js + Node.js + PostgreSQL)
   â†’ .specweave/docs/internal/architecture/tech-stack.md

ðŸ“‹ Business Rules (Booking policies)
   â†’ .specweave/docs/internal/strategy/appointments/business-rules.md

ðŸ”§ Project Conventions (Naming, code style)
   â†’ .specweave/docs/public/guides/project-conventions.md

ðŸš€ Deployment Process (CI/CD workflow)
   â†’ .specweave/docs/internal/processes/deployment.md

ðŸ“ CLAUDE.md Update
   â†’ Add 12-line project summary with links

Total files to create: 6
Total lines added to CLAUDE.md: 12

Proceed with merge? (y/n)
```

---

## åˆå¹¶ç»“æžœ

**åˆå¹¶å®ŒæˆåŽï¼Œç”Ÿæˆç‰¹å®šæ¨¡å¼çš„æŠ¥å‘Š**ï¼š

### å¿«é€Ÿå¯åŠ¨æ¨¡å¼æŠ¥å‘Š ðŸ†•

```markdown
# CLAUDE.md Merge Report - Quick Start Mode

**Date**: 2025-10-26
**Backup File**: .claude/backups/CLAUDE-backup-20251026-143022.md
**Merge Status**: âœ… Complete (Essential content only)
**Mode**: Quick Start (Incremental Documentation)

---

## Files Created (Essential Only)

1. âœ… `.specweave/docs/internal/architecture/core-architecture.md` (120 lines)
2. âœ… `.specweave/docs/internal/architecture/tech-stack.md` (80 lines)
3. âœ… `.specweave/docs/internal/architecture/critical-patterns.md` (100 lines)
4. âœ… `.specweave/docs/public/guides/project-conventions.md` (90 lines)
5. âœ… `.specweave/docs/internal/processes/deployment.md` (70 lines)

**Total**: 5 files, 460 lines (essential content)

---

## CLAUDE.md Updated

**Added**: 10 lines (project summary + links)

**Location**: Lines 850-860

---

## Content Distribution (Quick Start)

| Content Type | Lines | Status | Destination |
|--------------|-------|--------|-------------|
| Core Architecture | 120 | âœ… Merged | .specweave/docs/internal/architecture/ |
| Tech Stack | 80 | âœ… Merged | .specweave/docs/internal/architecture/ |
| Critical Patterns | 100 | âœ… Merged | .specweave/docs/internal/architecture/ |
| Conventions | 90 | âœ… Merged | .specweave/docs/public/guides/ |
| Deployment | 70 | âœ… Merged | .specweave/docs/internal/processes/ |
| **CLAUDE.md** | **10** | âœ… **Updated** | **Root** |
| **Subtotal Merged** | **470** | | |
| | | | |
| Domain Model (detailed) | 450 | â¸ï¸ Deferred | Extract when working on appointments |
| Business Rules (detailed) | 280 | â¸ï¸ Deferred | Extract when working on payments |
| User Module API | 150 | â¸ï¸ Deferred | Extract when modifying user code |
| Code Examples | 200 | â¸ï¸ Deferred | Extract as needed per increment |
| **Subtotal Deferred** | **1,080** | | **Document incrementally** |

**Result**: 470 lines merged now, 1,080 lines to extract per increment

**Benefit**: Start in 30-60 minutes, not 1-3 hours

---

## Deferred Content (Extract Per Increment)

The following content remains in the backup and will be extracted when you work on related features:

### ðŸ“¦ Domain Documentation
- `appointments/domain-model.md` (450 lines)
  â†’ Extract when creating increment for appointments feature

### ðŸ“‹ Business Rules
- `payments/business-rules.md` (280 lines)
  â†’ Extract when creating increment for payment modifications

### ðŸ”Œ API Documentation
- `users/api-endpoints.md` (150 lines)
  â†’ Extract when creating increment for user service changes

### ðŸ’» Code Examples
- Various code snippets (200 lines)
  â†’ Extract as needed

**How to extract later**:
```bash
# å¼€å§‹æ›´æ–° appointments æ¨¡å—çš„æ–‡æ¡£æ—¶ï¼š
# ä½¿ç”¨å‘½ä»¤ï¼š
# `inc "Refactor appointment booking"
# åœ¨ spec.md ä¸­å¼•ç”¨ï¼š
# â€œæŸ¥çœ‹å¤‡ä»½æ–‡ä»¶ï¼š.claude/backups/CLAUDE-backup-*.md (appointments éƒ¨åˆ†)â€
# æˆ–è€…è¯·æ±‚ï¼š
# â€œä»Ž CLAUDE.md å¤‡ä»½ä¸­æå– appointments ç›¸å…³æ–‡æ¡£â€

```

---

## Skipped Content

- Generic React patterns (25 lines) - Already covered in SpecWeave
- Standard git workflow (15 lines) - Common knowledge
- TypeScript basics (40 lines) - Not project-specific

**Total skipped**: 80 lines (generic content)

---

## Next Steps

1. âœ… Review merged essential docs (30 min)
2. âœ… Start first increment (immediate)
3. â¸ï¸ Extract detailed docs as you work on features

**Time saved**: ~2 hours (vs comprehensive upfront)

---
```

### å…¨é¢æ•´åˆæ¨¡å¼æŠ¥å‘Š

```markdown
# CLAUDE.md Merge Report - Comprehensive Mode

**Date**: 2025-10-26
**Backup File**: .claude/backups/CLAUDE-backup-20251026-143022.md
**Merge Status**: âœ… Complete (All content)
**Mode**: Comprehensive (Upfront Documentation)

---

## Files Created

1. âœ… `.specweave/increments/####-name/docs/domain/appointments/domain-model.md` (450 lines)
2. âœ… `.specweave/docs/internal/architecture/existing-system.md` (320 lines)
3. âœ… `.specweave/docs/internal/architecture/tech-stack.md` (180 lines)
4. âœ… `.specweave/docs/internal/strategy/appointments/business-rules.md` (280 lines)
5. âœ… `.specweave/docs/public/guides/project-conventions.md` (200 lines)
6. âœ… `.specweave/docs/internal/processes/deployment.md` (150 lines)

**Total**: 6 files, 1,580 lines

---

## CLAUDE.md Updated

**Added**: 12 lines (project summary + links)

**Location**: Lines 850-862 (after "Living Documentation Principles")

---

## Content Distribution

| Content Type | Lines | Destination |
|--------------|-------|-------------|
| Domain Model | 450 | .specweave/increments/####-name/docs/domain/ |
| Architecture | 320 | .specweave/docs/internal/architecture/ |
| Tech Stack | 180 | .specweave/docs/internal/architecture/ |
| Business Rules | 280 | .specweave/docs/internal/strategy/ |
| Conventions | 200 | .specweave/docs/public/guides/ |
| Deployment | 150 | .specweave/docs/internal/processes/ |
| **CLAUDE.md** | **12** | **Root** |

**Result**: 99.2% of content distributed to appropriate folders, not bloating CLAUDE.md

---

## Skipped Content

- Generic React patterns (25 lines) - Already covered in SpecWeave
- Standard git workflow (15 lines) - Common knowledge
- TypeScript basics (40 lines) - Not project-specific

**Total skipped**: 80 lines (generic content)

---

## Next Steps

1. âœ… Review generated files in `.specweave/docs/internal/` and `.specweave/docs/public/`
2. âœ… SpecWeave uses auto-detection
3. âœ… Run `npm run docs:dev` to preview documentation
4. âœ… Create features from specifications: `specweave plan-feature {name}`

---

## Backup Preserved

Original backup remains at:
`.claude/backups/CLAUDE-backup-20251026-143022.md`

You can reference it anytime.

---

**Merge Complete! ðŸŽ‰**

Your project-specific knowledge is now integrated into SpecWeave's structure.
```

---

## ä½¿ç”¨ç¤ºä¾‹

### ç”¨æˆ·è¯·æ±‚

```
User: "I installed SpecWeave and it backed up my CLAUDE.md. Can you merge the important parts?"
```

### ç”¨æˆ·å“åº”

```
I'll analyze your backup CLAUDE.md and intelligently merge project-specific content.

ðŸ” Analyzing: .claude/backups/CLAUDE-backup-20251026-143022.md

Found:
- Project: Healthcare Appointment Booking Platform
- Domain model: Patients, Providers, Appointments, Clinics
- Architecture: Microservices (4 services)
- Tech stack: Next.js + Node.js + PostgreSQL
- Business rules: Booking policies, cancellation rules
- Conventions: Naming, API design
- Deployment: CI/CD workflow

ðŸ“¦ Content Distribution Plan:

1. Domain Model â†’ specifications/modules/appointments/domain-model.md
2. Architecture â†’ .specweave/docs/architecture/existing-system.md
3. Tech Stack â†’ .specweave/docs/architecture/tech-stack.md
4. Business Rules â†’ specifications/modules/appointments/business-rules.md
5. Conventions â†’ .specweave/docs/guides/project-conventions.md
6. Deployment â†’ .specweave/docs/guides/deployment.md

CLAUDE.md: Add 12-line summary with links (no bloat!)

Total: 6 files, ~1,580 lines
CLAUDE.md additions: 12 lines (99.2% distributed to folders)

Proceed with merge? (y/n)
```

### ç”¨æˆ·æ‰¹å‡†åŽ

```
âœ… Merge complete!

Created:
1. .specweave/increments/####-name/docs/domain/appointments/domain-model.md
2. .specweave/docs/internal/architecture/existing-system.md
3. .specweave/docs/internal/architecture/tech-stack.md
4. .specweave/docs/internal/strategy/appointments/business-rules.md
5. .specweave/docs/public/guides/project-conventions.md
6. .specweave/docs/internal/processes/deployment.md

Updated:
- CLAUDE.md (added 12-line project summary)

Report saved: ai-logs/reports/CLAUDE-MERGE-REPORT-20251026.md

Your project knowledge is now integrated! ðŸŽ‰

Next: Review files and run `npm run docs:dev` to preview.
```

---

## å·¥å…·ä½¿ç”¨æµç¨‹

**æ‰«æå¤‡ä»½æ–‡ä»¶**ï¼š
```typescript
const backups = glob(".claude/backups/CLAUDE-backup-*.md");
const latestBackup = backups.sort().reverse()[0];  // Most recent
```

**è§£æžæ–‡ä»¶å†…å®¹**ï¼š
```typescript
const content = read(latestBackup);
const sections = parseSections(content);  // Split by headers
const classified = classifyContent(sections);  // Domain, Architecture, etc.
```

**é¿å…é‡å¤**ï¼š
```typescript
if (exists(targetPath)) {
  const existing = read(targetPath);
  if (similarity(existing, newContent) > 0.8) {
    skip();  // Already documented
  }
}
```

---

**ç›¸å…³æ–‡æ¡£**ï¼š
- [BROWNFIELD-INTEGRATION-STRATEGERY.md](../../docs/internal/delivery/BROWNFIELD-INTEGRATION-STRATEGERY.md)
- [brownfield-analyzer skill](../brownfield-analyzer/SKILL.md)
- [CLAUDE.md](../../CLAUDE.md)