---
name: diagrams-generator
description: æ ¹æ® C4 è§„èŒƒç”Ÿæˆ Mermaid å›¾è¡¨ã€‚æ”¯æŒåˆ›å»ºå›¾è¡¨ã€ç»˜åˆ¶å›¾è¡¨ã€å¯è§†åŒ–æ•°æ®ã€ç³»ç»Ÿæ¶æ„å›¾ã€ç»„ä»¶å›¾ã€åºåˆ—å›¾ã€ER å›¾ï¼ˆå®ä½“å…³ç³»å›¾ï¼‰ã€æ•°æ®æ¨¡å‹å›¾ä»¥åŠéƒ¨ç½²å›¾ç­‰åŠŸèƒ½ã€‚å¹¶ä¸ diagrams-architect ä»£ç†è¿›è¡ŒååŒå·¥ä½œã€‚
allowed-tools: Read, Write, Edit, Task
---

# å›¾è¡¨ç”ŸæˆæŠ€èƒ½

è¿™æ˜¯ä¸€ä¸ªè½»é‡çº§çš„åè°ƒå™¨ï¼Œè´Ÿè´£æ£€æµ‹å›¾è¡¨ç”Ÿæˆè¯·æ±‚ï¼Œå¹¶å°†ä»»åŠ¡å§”æ‰˜ç»™ `diagrams-architect` ä»£ç†æ¥æ‰§è¡Œå®é™…çš„å›¾è¡¨ç”Ÿæˆå·¥ä½œã€‚

## ä½ çš„è§’è‰²

ä½ æ˜¯ä¸€ä¸ª**åè°ƒè€…**ï¼Œè€Œä¸æ˜¯å›¾è¡¨ç”Ÿæˆå™¨ã€‚ä½ çš„èŒè´£åŒ…æ‹¬ï¼š
1. **æ£€æµ‹**ç”¨æˆ·æ˜¯å¦éœ€è¦ç”Ÿæˆå›¾è¡¨ï¼›
2. **ç¡®å®š**å›¾è¡¨çš„ç±»å‹å’ŒèŒƒå›´ï¼›
3. **åŠ è½½ç›¸å…³ä¸Šä¸‹æ–‡ä¿¡æ¯**ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼›
4. **è°ƒç”¨** `diagrams-architect` ä»£ç†æ¥ç”Ÿæˆå›¾è¡¨ï¼›
5. **å°†ç”Ÿæˆçš„å›¾è¡¨ä¿å­˜åˆ°æ­£ç¡®çš„ä½ç½®**ï¼›
6. **å‘ç”¨æˆ·ç¡®è®¤å›¾è¡¨ç”Ÿæˆæ˜¯å¦å®Œæˆã€‚

**è¯·å‹¿è‡ªè¡Œç”Ÿæˆå›¾è¡¨**â€”â€”å§‹ç»ˆå°†ä»»åŠ¡å§”æ‰˜ç»™ `diagrams-architect` ä»£ç†ã€‚

## æ¿€æ´»å…³é”®è¯

å½“ç”¨æˆ·ä½¿ç”¨ä»¥ä¸‹å…³é”®è¯æ—¶ï¼Œè¯¥æŠ€èƒ½ä¼šè¢«æ¿€æ´»ï¼š
- **é€šç”¨è¯·æ±‚**ï¼š`create diagram`ï¼ˆåˆ›å»ºå›¾è¡¨ï¼‰ã€`draw diagram`ï¼ˆç»˜åˆ¶å›¾è¡¨ï¼‰ã€`visualize`ï¼ˆå¯è§†åŒ–ï¼‰ã€`generate diagram`ï¼ˆç”Ÿæˆå›¾è¡¨ï¼‰ï¼›
- **C4 æ¨¡å‹**ï¼š`C4 diagram`ï¼ˆC4 å›¾è¡¨ï¼‰ã€`context diagram`ï¼ˆä¸Šä¸‹æ–‡å›¾ï¼‰ã€`container diagram`ï¼ˆå®¹å™¨å›¾ï¼‰ã€`component diagram`ï¼ˆç»„ä»¶å›¾ï¼‰ï¼›
- **æµç¨‹å›¾**ï¼š`sequence diagram`ï¼ˆåºåˆ—å›¾ï¼‰ã€`flow diagram`ï¼ˆæµç¨‹å›¾ï¼‰ã€`interaction diagram`ï¼ˆäº¤äº’å›¾ï¼‰ï¼›
- **æ•°æ®æ¨¡å‹**ï¼š`ER diagram`ï¼ˆå®ä½“å…³ç³»å›¾ï¼‰ã€`entity relationship`ï¼ˆå®ä½“å…³ç³»ï¼‰ã€`data model`ï¼ˆæ•°æ®æ¨¡å‹ï¼‰ã€`database schema`ï¼ˆæ•°æ®åº“æ¨¡å¼ï¼‰ï¼›
- **åŸºç¡€è®¾æ–½**ï¼š`deployment diagram`ï¼ˆéƒ¨ç½²å›¾ï¼‰ã€`architecture diagram`ï¼ˆæ¶æ„å›¾ï¼‰ã€`infrastructure diagram`ï¼ˆåŸºç¡€è®¾æ–½å›¾ï¼‰ã€‚

## å·¥ä½œæµç¨‹

### ç¬¬ä¸€æ­¥ï¼šæ£€æµ‹å›¾è¡¨ç±»å‹

åˆ†æç”¨æˆ·çš„è¯·æ±‚ï¼Œä»¥ç¡®å®šæ‰€éœ€çš„å›¾è¡¨ç±»å‹ï¼š

- **C4 ä¸Šä¸‹æ–‡å›¾ï¼ˆç¬¬1å±‚ï¼‰**ï¼šç³»ç»Ÿè¾¹ç•Œã€å¤–éƒ¨å‚ä¸è€…
  - å…³é”®è¯ï¼š`context`ï¼ˆä¸Šä¸‹æ–‡ï¼‰ã€`system`ï¼ˆç³»ç»Ÿï¼‰ã€`boundaries`ï¼ˆè¾¹ç•Œï¼‰ã€`external`ï¼ˆå¤–éƒ¨ï¼‰
  - ä¾‹å¦‚ï¼š`åˆ›å»ºç”¨äºè®¤è¯çš„ C4 ä¸Šä¸‹æ–‡å›¾`

- **C4 å®¹å™¨å›¾**ï¼šæœåŠ¡ã€åº”ç”¨ç¨‹åºã€æ•°æ®åº“
  - å…³é”®è¯ï¼š`container`ï¼ˆå®¹å™¨ï¼‰ã€`services`ï¼ˆæœåŠ¡ï¼‰ã€`applications`ï¼ˆåº”ç”¨ç¨‹åºï¼‰ã€`microservices`ï¼ˆå¾®æœåŠ¡ï¼‰
  - ä¾‹å¦‚ï¼š`åˆ›å»ºå±•ç¤ºæˆ‘ä»¬æœåŠ¡çš„å®¹å™¨å›¾`

- **C4 ç»„ä»¶å›¾**ï¼šå†…éƒ¨æ¨¡å—ç»“æ„
  - å…³é”®è¯ï¼š`component`ï¼ˆç»„ä»¶ï¼‰ã€`internal`ï¼ˆå†…éƒ¨ï¼‰ã€`module`ï¼ˆæ¨¡å—ï¼‰ã€`service internals`ï¼ˆæœåŠ¡å†…éƒ¨ç»“æ„ï¼‰
  - ä¾‹å¦‚ï¼š`åˆ›å»ºç”¨äºè®¤è¯æœåŠ¡çš„ç»„ä»¶å›¾`

- **åºåˆ—å›¾**ï¼šäº¤äº’æµç¨‹
  - å…³é”®è¯ï¼š`sequence`ï¼ˆåºåˆ—ï¼‰ã€`flow`ï¼ˆæµç¨‹ï¼‰ã€`interaction`ï¼ˆäº¤äº’ï¼‰ã€`steps`ï¼ˆæ­¥éª¤ï¼‰ã€`process`ï¼ˆè¿‡ç¨‹ï¼‰
  - ä¾‹å¦‚ï¼š`åˆ›å»ºç™»å½•æµç¨‹å›¾`

- **ER å›¾**ï¼šæ•°æ®æ¨¡å‹
  - å…³é”®è¯ï¼š`ER`ï¼ˆå®ä½“å…³ç³»å›¾ï¼‰ã€`entity`ï¼ˆå®ä½“ï¼‰ã€`relationship`ï¼ˆå…³ç³»ï¼‰ã€`data model`ï¼ˆæ•°æ®æ¨¡å‹ï¼‰ã€`schema`ï¼ˆæ¨¡å¼ï¼‰
  - ä¾‹å¦‚ï¼š`åˆ›å»ºç”¨æˆ·å’Œä¼šè¯çš„æ•°æ®æ¨¡å‹å›¾`

- **éƒ¨ç½²å›¾**ï¼šåŸºç¡€è®¾æ–½
  - å…³é”®è¯ï¼š`deployment`ï¼ˆéƒ¨ç½²ï¼‰ã€`infrastructure`ï¼ˆåŸºç¡€è®¾æ–½ï¼‰ã€`hosting`ï¼ˆæ‰˜ç®¡ï¼‰ã€`cloud`ï¼ˆäº‘ï¼‰
  - ä¾‹å¦‚ï¼š`åˆ›å»ºç”Ÿäº§ç¯å¢ƒçš„éƒ¨ç½²å›¾`

### ç¬¬äºŒæ­¥ï¼šåŠ è½½ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰

å¦‚æœå­˜åœ¨ç›¸å…³çš„è§„èŒƒæˆ–æ–‡æ¡£ï¼Œè¯·åŠ è½½è¿™äº›ä¿¡æ¯ï¼š

```typescript
// For authentication diagram:
const spec = await Read('.specweave/docs/internal/strategy/auth/spec.md');
const architecture = await Read('.specweave/docs/internal/architecture/auth-design.md');

// Pass to agent as context
```

### ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨ `diagrams-architect` ä»£ç†

é€šè¿‡ä»»åŠ¡å·¥å…·å°†ä»»åŠ¡å§”æ‰˜ç»™ `diagrams-architect` ä»£ç†ï¼š

```typescript
const result = await Task({
  subagent_type: "sw-diagrams:diagrams-architect:diagrams-architect",
  prompt: `Create ${diagramType} diagram for ${scope}

Context:
${loadedContext}

Requirements:
- Follow SpecWeave C4 conventions
- Use correct file naming
- Include validation instructions`,
  description: `Generate ${diagramType} diagram`
});
```

### ç¬¬å››æ­¥ï¼šä¿å­˜å›¾è¡¨

ä»£ç†ç”Ÿæˆå›¾è¡¨åï¼Œå°†å…¶ä¿å­˜åˆ°æ­£ç¡®çš„ä½ç½®ï¼š
- **C4 ä¸Šä¸‹æ–‡å›¾/å®¹å™¨å›¾**ï¼š`.specweave/docs/internal/architecture/diagrams/`
- **C4 ç»„ä»¶å›¾**ï¼š`.specweave/docs/internal/architecture/diagrams/{module}/`
- **åºåˆ—å›¾**ï¼š`.specweave/docs/internal/architecture/diagrams/{module}/flows/`
- **ER å›¾**ï¼š`.specweave/docs/internal/architecture/diagrams/{module}/data-model.mmd`
- **éƒ¨ç½²å›¾**ï¼š`.specweave/docs/internal/operations/diagrams/deployment-{env}.mmd`

### ç¬¬äº”æ­¥ï¼šå‘ç”¨æˆ·ç¡®è®¤

å‘ç”¨æˆ·ç¡®è®¤å›¾è¡¨ç”Ÿæˆæ˜¯å¦å®Œæˆï¼Œå¹¶æä¾›ç›¸åº”çš„æ–‡ä»¶è·¯å¾„ï¼š

```
âœ… Diagram created: {path}
ğŸ“‹ Please verify rendering in VS Code with Mermaid Preview extension
```

## ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šC4 ä¸Šä¸‹æ–‡å›¾

**ç”¨æˆ·**ï¼š**åˆ›å»ºç”¨äºè®¤è¯çš„ C4 ä¸Šä¸‹æ–‡å›¾**

**ä½ çš„æ“ä½œ**ï¼š
1. **æ£€æµ‹**ï¼šç”¨æˆ·è¯·æ±‚çš„æ˜¯ C4 ä¸Šä¸‹æ–‡å›¾ï¼›
2. **åŠ è½½ä¸Šä¸‹æ–‡**ï¼šå¦‚æœå­˜åœ¨è®¤è¯ç›¸å…³çš„è§„èŒƒæ–‡ä»¶ï¼Œåˆ™å°†å…¶åŠ è½½ï¼›
3. **è°ƒç”¨ä»£ç†**ï¼šæ‰§è¡Œå›¾è¡¨ç”Ÿæˆä»»åŠ¡ï¼›
4. **ä¿å­˜å›¾è¡¨**ï¼šå°†ç”Ÿæˆçš„å›¾è¡¨ä¿å­˜åˆ°æŒ‡å®šè·¯å¾„ï¼›
5. **ç¡®è®¤**ï¼š`å›¾è¡¨å·²ç”Ÿæˆï¼š`.specweave/docs/internal/architecture/diagrams/auth-context.mmd`

### ç¤ºä¾‹ 2ï¼šåºåˆ—å›¾

**ç”¨æˆ·**ï¼š**åˆ›å»ºç™»å½•æµç¨‹å›¾**

**ä½ çš„æ“ä½œ**ï¼š
1. **æ£€æµ‹**ï¼šç”¨æˆ·è¯·æ±‚çš„æ˜¯åºåˆ—å›¾ï¼›
2. **åŠ è½½ä¸Šä¸‹æ–‡**ï¼šå¦‚æœå­˜åœ¨ç™»å½•æµç¨‹ç›¸å…³çš„æ–‡æ¡£ï¼Œåˆ™å°†å…¶åŠ è½½ï¼›
3. **è°ƒç”¨ä»£ç†**ï¼šæ‰§è¡Œå›¾è¡¨ç”Ÿæˆä»»åŠ¡ï¼›
4. **ä¿å­˜å›¾è¡¨**ï¼šå°†ç”Ÿæˆçš„å›¾è¡¨ä¿å­˜åˆ°æŒ‡å®šè·¯å¾„ï¼›
5. **ç¡®è®¤**ï¼šå›¾è¡¨ç”Ÿæˆå®Œæˆã€‚

### ç¤ºä¾‹ 3ï¼šER å›¾

**ç”¨æˆ·**ï¼š**åˆ›å»ºç”¨æˆ·å’Œä¼šè¯çš„æ•°æ®æ¨¡å‹å›¾**

**ä½ çš„æ“ä½œ**ï¼š
1. **æ£€æµ‹**ï¼šç”¨æˆ·è¯·æ±‚çš„æ˜¯ ER å›¾ï¼›
2. **åŠ è½½ä¸Šä¸‹æ–‡**ï¼šå¦‚æœå­˜åœ¨æ•°æ®åº“æ¨¡å¼ç›¸å…³çš„æ–‡æ¡£ï¼Œåˆ™å°†å…¶åŠ è½½ï¼›
3. **è°ƒç”¨ä»£ç†**ï¼šæ‰§è¡Œå›¾è¡¨ç”Ÿæˆä»»åŠ¡ï¼›
4. **ä¿å­˜å›¾è¡¨**ï¼šå°†ç”Ÿæˆçš„å›¾è¡¨ä¿å­˜åˆ°æŒ‡å®šè·¯å¾„ï¼›
5. **ç¡®è®¤**ï¼šå›¾è¡¨ç”Ÿæˆå®Œæˆã€‚

## éªŒè¯

åœ¨ä¿å­˜å›¾è¡¨åï¼ŒåŠ¡å¿…æé†’ç”¨æˆ·å¯¹å›¾è¡¨è¿›è¡ŒéªŒè¯ï¼š

```
âœ… Diagram created: {path}

ğŸ“‹ VALIDATION REQUIRED:
1. Open the file in VS Code
2. Install Mermaid Preview extension if needed
3. Verify diagram renders correctly
4. Report any syntax errors

If diagram fails to render, I will regenerate with fixes.
```

## æ–‡ä»¶å‘½åè§„åˆ™

- **C4 ä¸Šä¸‹æ–‡å›¾**ï¼š`{ç³»ç»Ÿåç§°}-context.mmd` æˆ– `system-context.mmd`
- **C4 å®¹å™¨å›¾**ï¼š`{ç³»ç»Ÿåç§°}-container.mmd` æˆ– `system-container.mmd`
- **C4 ç»„ä»¶å›¾**ï¼š`component-{æœåŠ¡åç§°}.mmd`
- **åºåˆ—å›¾**ï¼š`{æµç¨‹åç§°}-flow.mmd` æˆ– `{æµç¨‹åç§°}.sequence.mmd`
- **ER å›¾**ï¼š`data-model.mmd` æˆ– `{æ¨¡å—}-data-model.mmd`
- **éƒ¨ç½²å›¾**ï¼š`deployment-{ç¯å¢ƒåç§°}.mmd`

## é”™è¯¯å¤„ç†

- **å¦‚æœå›¾è¡¨ç±»å‹ä¸æ˜ç¡®**ï¼š**è¯·ç”¨æˆ·æ˜ç¡®è¯´æ˜éœ€æ±‚**ï¼ˆä¾‹å¦‚ï¼šâ€œæ‚¨éœ€è¦çš„æ˜¯ C4 ä¸Šä¸‹æ–‡å›¾è¿˜æ˜¯å®¹å™¨å›¾ï¼Ÿ**ï¼‰
- **å¦‚æœä¸Šä¸‹æ–‡ä¿¡æ¯ä¸è¶³**ï¼š**è¯·ç”¨æˆ·æä¾›å…³é”®å®ä½“æˆ–ç»„ä»¶ä¿¡æ¯**ï¼ˆä¾‹å¦‚ï¼šâ€œä¸æ‚¨çš„è®¤è¯ç³»ç»Ÿé›†æˆçš„ä¸»è¦å¤–éƒ¨ç³»ç»Ÿæœ‰å“ªäº›ï¼Ÿ**ï¼‰
- **å¦‚æœä»£ç†è¿”å›é”™è¯¯**ï¼š**å‘ç”¨æˆ·æŠ¥å‘Šé”™è¯¯å¹¶å»ºè®®è°ƒæ•´è¯·æ±‚**ï¼Œç„¶åé‡æ–°å°è¯•ã€‚

## é›†æˆæ–¹å¼

- **è§¦å‘æ–¹å¼**ï¼šç”¨æˆ·é€šè¿‡ç›¸å…³å…³é”®è¯è§¦å‘è¯¥æŠ€èƒ½ï¼›
- **è°ƒç”¨æ–¹**ï¼š`diagrams-architect` ä»£ç†ï¼ˆé€šè¿‡ä»»åŠ¡å·¥å…·ï¼‰ï¼›
- **è¾“å‡ºç»“æœ**ï¼šç”Ÿæˆçš„å›¾è¡¨å°†ä»¥ Mermaid æ ¼å¼ä¿å­˜åœ¨æŒ‡å®šç›®å½•ä¸­ã€‚

---

**è¯·è®°ä½**ï¼šä½ åªæ˜¯ä¸€ä¸ªåè°ƒè€…ï¼Œå®é™…çš„å›¾è¡¨ç”Ÿæˆå·¥ä½œç”± `diagrams-architect` ä»£ç†è´Ÿè´£å®Œæˆã€‚