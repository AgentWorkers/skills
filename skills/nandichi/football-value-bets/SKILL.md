---
name: football-value-bets
description: 专业足球投注分析技能：根据球员表现、历史交锋记录、球队排名、球员伤病情况以及价值分析来生成数据驱动的投注建议。系统会跟踪投注结果，并提供命中率（hitrate）和投资回报率（ROI）等指标。适用于用户需要足球投注建议、投注单、累积投注方案或精选推荐时使用。
  Professional football bet analysis skill. Generates data-driven bet slips
  based on form, H2H, standings, injuries and value analysis. Includes
  result tracking with hitrate and ROI. Use when the user asks for a
  football bet, bet slip, accumulator, tips, or picks.
metadata:
  openclaw:
    requires:
      bins: ["python3"]
      env: ["FOOTBALL_DATA_API_KEY"]
    primaryEnv: "FOOTBALL_DATA_API_KEY"
---
# 足球价值投注

生成专业的、基于数据的足球投注单。完全依靠统计数据和分析，不依赖直觉。

## 何时激活此功能

在用户以下情况下激活此功能：
- 请求进行足球投注、投注单、累积投注或推荐投注选项；
- 请求用于投注的比赛分析；
- 请求投注统计数据、比赛结果或投资回报率（ROI）；
- 请求足球比赛的推荐投注建议。

## 先决条件

**一次性安装依赖项：**
```bash
pip install requests
```

**设置API密钥（可通过football-data.org/client/register免费获取）：**
```bash
export FOOTBALL_DATA_API_KEY="your-key-here"
```

或直接在`{baseDir}/config/settings.json`文件中的`api_key`字段中填写密钥。

---

## 模式1：生成投注单

### 第1步 – 获取数据

获取当前的比赛数据：
```bash
python3 {baseDir}/scripts/match_fetcher.py --mode full
```

返回的JSON数据包包含以下内容：
- 今日和明天的所有预定比赛；
- 每支球队的联赛排名和近期表现数据；
- 过去5场之间的交锋记录（主客场对阵情况）。

覆盖的联赛包括：英超联赛（Premier League）、德甲联赛（Bundesliga）、意甲联赛（Serie A）、西甲联赛（La Liga）、法甲联赛（Ligue 1）、荷甲联赛（Eredivisie）以及欧冠联赛（Champions League）。

如果用户需要特定日期的数据：
```bash
python3 {baseDir}/scripts/match_fetcher.py --mode full --date-from 2026-02-15 --date-to 2026-02-15
```

### 第2步 – 分析每场比赛

根据以下因素分析每场比赛（按重要性排序）：

**A. 球队近期表现（过去5-10场比赛）**
- 使用排名数据中的“form”字段（例如：“W,W,D,L,W”表示胜、平、负、平）；
- 计算每场比赛的胜率及平均进球数；
- 关注主场和客场的表现趋势。

**B. 主客场统计数据**
- 主队：主场进球数与失球数；
- 客队：客场进球数与失球数；
- 比较主客场之间的净胜球差。

**C. 主客场交锋记录（H2H）**
- 查看历史交锋记录：哪支球队更胜一筹？
- 寻找规律：是否存在一方总是得分的情况？比赛是否以高进球数或低进球数结束？

**D. 球队排名和比赛动机**
- 排名靠前的球队（争冠或欧冠参赛球队）：动机强烈，表现稳定；
- 中游球队：表现难以预测，需谨慎对待；
- 排名靠后的球队（可能面临降级）：有时会表现出色或表现疲软；
- 球队排名变化可作为参考因素。

**E. 额外信息（通过网络搜索）**
- 在数据分析后，通过网络搜索每场比赛的相关信息：
  - 关键球员的伤病和禁赛情况（FotMob、Transfermarkt网站）；
  - 最新新闻（如教练更换、内部问题、转会动态）；
  - 最近比赛的预期进球数（xG数据）；
  - 冬季室外比赛的天气状况。

可以使用以下搜索关键词：`[球队A] vs [球队B] 球队新闻 伤病` 或 `[球队A] 2025-26赛季预期进球数`。

**F. 计算赔率**
- 根据分析结果估算每个结果的合理赔率；
- 与常见博彩公司的赔率进行比较；
- **价值判断**：当你的预估概率高于博彩公司的赔率时，该投注具有价值；
- **赔率所隐含的概率**：赔率1.00表示50%的概率。

### 第3步 – 选择投注选项

仅选择符合以下所有标准的投注选项：
1. 预估胜率 > 45%；
2. 赔率范围：1.70 – 2.50；
3. 根据数据分析有明确的比赛动机；
- 每场比赛最多选择1个投注选项。

允许的投注类型包括：
- **1 / X / 2**：主胜、平局、客胜；
- **1X / X2**：双倍投注；
- **BTTS（Both Teams To Score）**：两队均进球；
- **Over/Under 2.5 goals**：总进球数超过/少于2.5球；
- **Handicap -1**：主队胜出且净胜球差大于2球。

### 第4步 – 诚实性检查

如果找到的具有价值的投注选项少于3个：
**不要生成投注单**，并诚实地告知用户：“根据现有数据，今天没有合适的投注选项。原因：[简要说明]。请等待更好的赔率或下个比赛日。”

此步骤是强制性的。诚实比收益更重要。

### 第5步 – 生成输出结果

生成两种版本的投注单：

**版本A：主要投注单（3-4个选项，总赔率8-15倍）**

| 比赛 | 投注选项 | 赔率 | 比赛动机 | 预估概率 | 风险等级 |
|-------|------|------|------------|--------|------|
| 阿贾克斯 - 埃因霍温 | BTTS Yes | 1.85 | 近10场交锋中双方均有进球 | 52% | 低风险 |
| 阿森纳 - 切尔西 | Over 2.5 | 1.90 | 本赛季平均每场比赛3.2球，两队进攻力较强 | 48% | 中等风险 |
| ... | ... | ... | ... | ... | ... |

总赔率：XX.XX
建议投注金额：5-10欧元
潜在收益：XX.XX欧元

**版本B：备用投注单（2-3个选项，总赔率4-8倍）**

格式与版本A相同，但选择的投注选项风险较低（概率较高，赔率较低）。

**务必在底部注明：**
- 每个版本的预计命中率（例如：“主要投注单的命中率约为15%，单个投注选项的平均命中率约为50%”）；
- 其他建议：“如果希望降低风险，可以选择单注投注”；
- 免责声明：“理性投注。每张投注单的最大投注金额为5-10欧元，每月累计投注限额为75欧元。”

### 第6步 – 保存投注单

自动保存投注单以供后续跟踪：
```bash
python3 {baseDir}/scripts/bet_tracker.py --mode save --data '{
  "type": "main",
  "stake": 5.0,
  "picks": [
    {
      "match": "Ajax - PSV",
      "competition": "Eredivisie",
      "pick": "BTTS Yes",
      "odds": 1.85,
      "estimated_probability": 0.52,
      "motivation": "Both teams scored in 8/10 recent matches",
      "risk": "low"
    }
  ],
  "total_odds": 12.50,
  "notes": ""
}'
```

对备用投注单使用`"type": "backup"`进行相同操作。

---

## 模式2：记录投注结果

当用户告知投注结果（赢或输）时：
```bash
# Mark entire slip
python3 {baseDir}/scripts/bet_tracker.py --mode result --date 2026-02-15 --slip-idx 1 --result win

# Mark specific pick
python3 {baseDir}/scripts/bet_tracker.py --mode result --date 2026-02-15 --slip-idx 1 --pick-idx 2 --result loss
```

结果选项包括：`win`（赢）、`loss`（输）、`void`（无效）。

务必询问用户具体的比赛日期以及涉及的投注单类型（主要投注单还是备用投注单）。

---

## 模式3：查看统计数据

当用户询问比赛结果、统计数据、投资回报率或投注命中率时：
```bash
python3 {baseDir}/scripts/bet_tracker.py --mode stats
```

以易于阅读的格式展示JSON输出结果：
- 全部的投注命中率和投资回报率；
- 当前月份的投注金额、实际收益、盈亏情况以及剩余预算；
- 表现最好和最差的月份。

如果当月预算接近用完（使用比例超过80%），请及时提醒用户。

---

## 模式4：查看投注历史

```bash
python3 {baseDir}/scripts/bet_tracker.py --mode history --days 30
```

显示过去N天的所有投注记录。

---

## 分析质量规则

请严格遵守以下规则：
1. **每张投注单最多包含5个投注选项**。选项过多会显著降低投注成功率。
2. **每个投注选项的赔率不应低于1.50或高于3.00**。赔率过低意味着价值较低，过高则风险过高。
3. **同一场比赛中不要选择两个相同的投注选项**。相关性会降低投注的价值。
4. **所有投注选项都必须有数据支持**。仅凭直觉进行投注是不可取的。
5. **务必进行诚实性检查**。没有经过充分分析的投注单是不合格的。
6. **避免选择德比战和杯赛**，除非数据足够可靠。这类比赛的不确定性较高。
7. **务必查看球员伤病情况**。缺少关键球员的球队表现可能大不相同。
8. **考虑赛季阶段**。赛季初期数据可靠性较低；赛季末期球队的比赛动机可能发生变化。

## 预算与理性投注

相关配置信息位于`{baseDir}/config/settings.json`文件中：
- 每次投注的最大金额：5-10欧元；
- 每月的投注限额：75欧元；
- 在生成新的投注单之前，请务必检查当月的投注情况。

如果当月预算已达到或接近限额（超过90%）：
- 通知用户；
- 建议用户等待下个月再继续投注；
- 除非用户明确表示继续投注，否则不要生成新的投注单。

## 文风和表达方式

- 采用英文输出；
- 语言专业且易于理解；
- 不使用夸张宣传语句，不做出任何承诺；
- 重点展示数据和概率；
- 如实告知投注风险。