---
name: adaptive-reasoning
description: **自动评估任务复杂性并调整推理难度**：每当用户发送消息时，系统会自动评估任务的复杂性，并判断是否需要启用“扩展思维模式”（即更高级的推理方式）来提升回复的质量。这一过程会在回答复杂问题之前作为预处理步骤执行。
---

# 自适应推理

在响应之前，先自我评估任务的复杂性，并动态调整推理的深度。

## 快速评估（每次请求时都会在脑海中进行）

根据以下维度对请求进行0-10分的评分：

| 评估因素 | 权重 | 例子 |
|--------|--------|----------|
| **多步骤逻辑** | +3 | 规划、证明、调试流程 |
| **模糊性** | +2 | 含糊的问题、权衡因素、需要根据具体情况判断 |
| **代码架构** | +2 | 系统设计、代码重构、安全审查 |
| **数学/形式化推理** | +2 | 计算、算法、逻辑难题 |
| **新颖问题** | +1 | 没有明显的解决模式，需要创造性思考 |
| **高风险** | +1 | 影响生产流程的变更、不可逆的操作 |

**扣分项：**
- 常规/重复性任务：-2分 |
- 有明确单一答案的问题：-2分 |
- 简单的查询/获取信息：-3分 |

## 决策阈值

| 评分 | 对应操作 |
|-------|--------|
| ≤2 | 快速响应，无需进行推理。 |
| 3-5 | 给出标准答案，进行简要的内部思考。 |
| 6-7 | 考虑使用“/reasoning on”功能或暂停以明确思考。 |
| ≥8 | **启用扩展性思考**。复杂问题需要这种高级推理方式。 |

## 自动激活推理

**无需询问，直接激活推理功能。**

| 评分 | 对应操作 |
|-------|--------|
| ≤5 | 按常规方式响应，不进行任何调整。 |
| 6-7 | 在响应末尾添加 🧠 图标，表示正在使用推理功能。 |
| ≥8 | 在响应末尾添加 🧠🔥 图标，表示正在进行深度思考。 |

### 可视化指示

在响应的**最后**始终添加推理状态的图标：

- **评分 6-7：** `🧠`（表示处于思考模式） |
- **评分 ≥8：** `🧠🔥`（表示处于深度思考模式） |
- **评分 ≤5：** 无图标（表示处于快速响应模式） |

### 激活推理的方法

在响应前，可以使用 `session_status` 工具或内部命令 `/reasoning on` 来激活推理功能：

```
/reasoning on
```

或者通过外部工具来激活：
```json
{"action": "session_status", "reasoning": "on"}
```

完成复杂任务后，可以选择禁用推理功能以节省后续请求所需的资源：
```
/reasoning off
```

## 示例

**低复杂性（评分：1）**
> “东京现在几点了？”
→ 进行简单查询，立即回答，不显示图标。

**中等复杂性（评分：4）**
> “重构这个函数，使其更易于阅读。”
→ 给出标准答案，并附上简要解释，不显示图标。

**高复杂性（评分：7）**
> “根据这些限制为这个 API 设计一个缓存策略……”
→ 启用推理功能，响应中会包含 🧠 图标。

**非常高复杂性（评分：9）**
> “调试这个分布式系统在负载情况下为何会出现竞态条件。”
→ 启用扩展性思考功能，响应中会包含 🧠🔥 图标。

## 集成方式

该功能通过内部预处理机制实现，无需外部工具。

**用于显式控制：**
- `/reasoning on` — 启用扩展性思考 |
- `/reasoning off` — 禁用推理功能（以加快响应速度） |
- `/status` — 查看当前的推理状态 |

## 何时不需要升级推理功能

- 用户明确要求快速回答（如“直接告诉我”、“简而言之”） |
- 对时间敏感的请求，速度比深度更重要 |
- 聊天或社交性质的消息（如闲聊、问候） |
- 当前会话中已经处于推理模式 |
- 用户之前已经禁用了推理功能 |

## 自动降级机制

完成复杂任务后（评分 ≥6），如果接下来的请求很简单（评分 ≤3）：
- 自动禁用推理功能以节省资源 |
- 恢复快速响应模式。