---
name: diet-tracker
description: 该功能用于记录每日饮食情况并计算营养信息，以帮助用户实现减肥目标。当用户提供自己的饮食信息时，该工具可以追踪用户的卡路里摄入量和宏量营养素的摄取情况，并提醒用户记录饮食内容。该功能会从 `USER.md` 文件中读取用户的身高、体重、年龄、性别和活动水平数据，以估算每日总能量消耗（TDEE）。随后，根据每日卡路里的盈余或亏损情况来预测体重变化。同时，该工具还支持设置蛋白质、碳水化合物和脂肪等宏量营养素的摄入目标。
---
# 饮食记录器

此功能帮助您记录每日饮食情况，以实现减肥目标。

## 使用方法

1. 该功能会读取 `USER.md` 文件中的用户相关信息，以获取以下内容：
    * 每日卡路里摄入目标
    * 宏量营养素摄入目标（蛋白质、碳水化合物、脂肪）——可选
    * 身高、体重、年龄和活动水平，用于计算总每日能量消耗（TDEE）。

2. 当您提供餐食信息时（例如：“我午餐吃了一个三明治”），该功能会：
    * 识别餐食中的食物种类
    * 使用 `get_food_nutrition.py` 脚本从网络获取食物的营养成分信息（卡路里、蛋白质、碳水化合物、脂肪）
    * 将餐食信息和营养成分添加到当天的记录文件（`memory/YYYY-MM-DD.md`）中
    * 计算该餐食的总卡路里和宏量营养素摄入量
    * 更新每日总摄入量和剩余卡路里预算
    * 根据每日摄入的卡路里预测体重变化
    * 如果设置了宏量营养素目标，会跟踪您在蛋白质、碳水化合物和脂肪摄入方面的进展

3. 当您询问剩余卡路里预算时，该功能会：
    * 读取当天的记录文件
    * 计算迄今为止消耗的总卡路里
    * 从每日卡路里目标中减去已消耗的卡路里
    * 显示剩余卡路里数量
    * 如果设置了宏量营养素目标，会显示剩余的蛋白质、碳水化合物和脂肪摄入量
    * 根据累计的每日卡路里预测体重变化

## 所需脚本

*   `scripts/get_food_nutrition.py`：从网络获取指定食物的营养成分信息，并计算总每日能量消耗（TDEE）
*   `scripts/update_memory.py`：更新当天的记录文件，添加餐食信息和营养成分

## 数据来源

*   `references/food_database.json`：包含常见食物及其营养成分的数据库（作为备用数据源）

## 工作流程

1. 饮食记录器功能从 `USER.md` 文件中读取用户相关信息：
    * 每日卡路里摄入目标
    * 身高、体重、年龄和活动水平
    * 活动水平：
        * 久坐不动（很少或没有运动）
        * 轻度活动（每周进行1-3天轻度运动/体育活动）
        * 中等活动（每周进行3-5天中等强度运动/体育活动）
        * 高强度活动（每周进行6-7天高强度运动/体育活动）
        * 非常活跃（进行高强度运动/体育活动，或从事体力劳动，每周进行两次训练）

2. 用户提供餐食信息。
3. 功能识别餐食中的食物种类。
4. 功能使用 `scripts/get_food_nutrition.py` 获取食物营养成分信息；如果网络信息不可用，则使用 `references/food_database.json` 文件。
5. 功能使用 `scripts/update_memory.py` 更新当天的记录文件。
6. 功能计算餐食的总卡路里和宏量营养素摄入量，并更新每日摄入量。
7. 功能向用户报告餐食信息、剩余卡路里预算以及预测的体重变化范围。

**注意：** 使用 `exec cat` 命令可以确认文件类型。