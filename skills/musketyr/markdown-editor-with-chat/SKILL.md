---
name: markdown-editor-with-chat
description: 这是一个轻量级的 Markdown 编辑器，支持通过 OpenClaw 门户进行实时聊天（可选）。该编辑器基于文件系统运行，无需使用数据库。
metadata:
  openclaw:
    emoji: "📝"
    requires:
      bins: ["node"]
      env:
        - MARKDOWN_DIR
---
# 带有聊天功能的Markdown编辑器

这是一个轻量级、独立的Markdown编辑器，可以从本地目录提供文件支持，并可选地集成OpenClaw网关聊天功能。

## 特点

- **基于文件系统**：可以指向包含Markdown文件的任何目录。
- **无需数据库**：文件本身就是数据来源。
- **文件夹导航**：可以浏览嵌套的文件夹。
- **实时预览**：在输入Markdown内容的同时查看渲染后的效果。
- **可选聊天功能**：可以通过OpenClaw网关获取AI辅助。
- **完全无外部依赖**：仅使用Node.js开发，代码自包含（无需额外HTML文件）。

## 快速启动

在浏览器中打开 `http://localhost:3333`。

## 命令行参数

| 参数 | 缩写 | 是否必填 | 默认值 | 说明 |
|----------|-------|----------|---------|-------------|
| `--folder` | `-f` | 是* | - | 包含Markdown文件的目录 |
| `--port` | `-p` | 否 | 3333 | 服务器端口 |
| `--host` | `-h` | 否 | 127.0.0.1 | 服务器主机（默认为localhost） |
| `--help` | | 否 | | 显示帮助信息 |

*除非设置了 `MARKDOWN_DIR` 环境变量，否则该参数为必填项。

## 环境变量（备用配置）

| 变量 | 是否必填 | 默认值 | 说明 |
|----------|----------|---------|-------------|
| `MARKDOWN_DIR` | 是* | - | 包含Markdown文件的目录 |
| `PORT` | 否 | 3333 | 服务器端口 |
| `HOST` | 否 | 127.0.0.1 | 服务器主机 |
| `OPENCLAW_GATEWAY_URL` | 否 | - | 聊天功能的网关URL |
| `OPENCLAW_GATEWAY_TOKEN` | 否 | - | 聊天功能的认证令牌 |

命令行参数的配置优先于环境变量。

## 安全性

- **默认仅绑定到localhost**：服务器仅监听127.0.0.1地址，拒绝外部IP访问。
- **遵循同源策略**：不支持CORS请求，浏览器会强制执行同源策略。
- **防止路径遍历攻击**：无法访问 `MARKDOWN_DIR` 之外的文件。
- **代码中不存储敏感信息**：所有敏感信息都通过环境变量传递。
- **网关代理**：令牌不会暴露给浏览器。

这是一个用于本地开发的工具。由于其设计目的是在受控制的本地目录上使用，因此API被设计得非常简单（不支持身份验证）。

## API接口

- `GET /`：提供编辑器用户界面。
- `GET /api/files`：列出文件和文件夹。
- `GET /api/files/:path`：获取文件内容。
- `PUT /api/files/:path`：保存文件内容。
- `POST /api/files/:path`：创建新文件。
- `POST /api/chat`：将聊天请求代理到OpenClaw网关（如果已配置）。

## 使用场景

- 浏览和编辑Markdown文档。
- 个人Markdown笔记库。
- 带有AI辅助的笔记记录工具。
- 用于查看文档的浏览器应用。