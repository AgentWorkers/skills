---
name: fleet-doctrine
description: 多模型AI团队的模型路由策略：该策略用于生成子代理、为定时任务选择模型、分配编码任务，以及决定哪个模型应处理特定任务。涵盖了Opus、Codex、Sonnet、Geminii和Grok等模型的路由规则。
---
# Fleet Doctrine — 模型路由规则

## 别名
- `opus` → `anthropic/claude-opus-4-6`
- `sonnet` → `anthropic/claude-sonnet-4-6`
- `codex` → `openai-codex/gpt-5.3-codex`
- Gemini: `google/gemini-3-pro-preview`
- Grok: `xai/grok-4`

## 路由规则

### Opus — 指挥模型
**适用场景：** 主要会话、任务协调、安全决策、财务处理、审核其他模型的输出、任何高风险或需要明确判断的任务。
**不适用场景：** 常规定时任务、简单查询、邮件摘要、模板化任务。

### Codex — 首席工程师模型
**适用场景：** 大规模编码任务（代码重构、新功能开发、整个代码库的维护）、代码审查、调试复杂问题、检查其他模型的输出。
**使用方式：** `sessions_spawn(model: "codex", task: "...")` 或使用 `--model codex` 参数创建子代理。
**配合使用：** 与 Grok 协同工作或获取第二意见。

### Sonnet — 功效型模型
**适用场景：** 定时任务、邮件简报、录取报告、常规行政工作、快速查询、草稿撰写、重复性或模板化任务。
**默认使用场景：** 所有定时任务（除非需要推理能力）。

### Gemini — 创意与视觉模型
**适用场景：** 图像生成、分析长文档（超过 100 万词的内容）、视觉任务、需要不同视角的任务。
**擅长处理：** 大规模数据、多模态输入。

### Grok — 快速备份模型
**适用场景：** 与 Codex 并行工作、快速处理任务、检查其他模型的输出、需要快速第二意见时。
**适合用于：** 轻量级代码审查、快速研究、草稿生成。

## 决策流程
1. 任务涉及安全、财务或高风险内容？ → 使用 **Opus**。
2. 任务需要大规模编码或代码库维护？ → 使用 **Codex**（并配合 Grok）。
3. 任务需要图像生成或处理超过 100 万词的内容？ → 使用 **Gemini**。
4. 任务是常规的、定时的或模板化的？ → 使用 **Sonnet**。
5. 需要快速第二意见？ → 使用 **Grok**。
6. 不确定？ → 由 **Opus** 决定，然后分配任务。

## 备用规则
如果某个模型在您的实例上不可用，应使用默认模型（通常是 Sonnet）。本规则强调的是“意图”——使用当前可用的最佳模型来完成任务。如有疑问，应使用现有模型而非放弃任务。

## 避免的错误用法：
- 不要将 Opus 用于邮件摘要或定时任务。
- 不要将 Sonnet 用于复杂的多步骤推理任务。
- 不要将 Codex 用于非编码任务。
- 除非有意寻求第二意见，否则不要在同一任务中同时使用多个模型。