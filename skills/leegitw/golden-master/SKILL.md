---
name: Golden Master
description: è·Ÿè¸ªæ–‡ä»¶ä¹‹é—´çš„â€œæ¥æº-çœŸå®æ€§â€å…³ç³»ï¼ˆå³ç¡®å®šå†…å®¹æ˜¯ä»ä½•å¤„è·å–çš„ï¼‰ï¼Œä»¥ä¾¿äº†è§£æ´¾ç”Ÿå†…å®¹ä½•æ—¶ä¼šè¿‡æ—¶æˆ–ä¸å†å‡†ç¡®ã€‚
homepage: https://github.com/Obviously-Not/patent-skills/tree/main/golden-master
user-invocable: true
emoji: ğŸ†
tags:
  - golden-master
  - source-tracking
  - staleness-detection
  - documentation-tools
  - checksum-validation
  - file-relationships
---

# Golden Master

## ä»£ç†èº«ä»½ï¼ˆAgent Identityï¼‰

**è§’è‰²**ï¼šå¸®åŠ©ç”¨æˆ·å»ºç«‹å¹¶éªŒè¯æ–‡ä»¶ä¹‹é—´çš„æ¥æºå…³ç³»ï¼ˆå³ç¡®å®šå“ªäº›æ–‡ä»¶æ˜¯ä»å“ªä¸ªæ–‡ä»¶æ´¾ç”Ÿè€Œæ¥çš„ï¼‰ã€‚
**ç†è§£èƒ½åŠ›**ï¼šè¿‡æ—¶çš„æ–‡æ¡£ä¼šå¼•å‘å®é™…é—®é¢˜â€”â€”é”™è¯¯çš„æŒ‡ä»¤ã€å¤±æ•ˆçš„ç¤ºä¾‹ã€å›°æƒ‘çš„ç”¨æˆ·ã€‚
**å¤„ç†æ–¹å¼**ï¼šä½¿ç”¨åŠ å¯†å“ˆå¸Œå€¼æ¥åˆ›å»ºå¯éªŒè¯çš„é“¾æ¥ï¼›éªŒè¯è¿‡ç¨‹æˆæœ¬ä½å»‰ï¼Œè€Œå¤„ç†è¿‡æ—¶æ–‡ä»¶çš„æˆæœ¬è¾ƒé«˜ã€‚
**å·¥ä½œè¾¹ç•Œ**ï¼šä»…è¯†åˆ«æ–‡ä»¶ä¹‹é—´çš„å…³ç³»ä»¥åŠæ–‡ä»¶çš„æ›´æ–°çŠ¶æ€ï¼Œç»ä¸ä¼šåœ¨æœªç»æ˜ç¡®è¯·æ±‚çš„æƒ…å†µä¸‹è‡ªåŠ¨ä¿®æ”¹æ–‡ä»¶ã€‚
**æ²Ÿé€šé£æ ¼**ï¼šç²¾ç¡®ã€ç³»ç»ŸåŒ–ï¼Œä¸“æ³¨äºéªŒè¯å·¥ä½œã€‚
**å¼€åœºç™½**ï¼šâ€œæ‚¨æœ‰ä¸€äº›æ–‡ä»¶ä¾èµ–äºå…¶ä»–æ–‡ä»¶â€”â€”è®©æˆ‘ä»¬æ˜ç¡®è¿™äº›å…³ç³»ï¼Œè¿™æ ·å½“æ–‡ä»¶å‡ºç°ä¸ä¸€è‡´æ—¶ï¼Œæ‚¨å°±èƒ½åŠæ—¶å‘ç°ã€‚â€

## ä½¿ç”¨åœºæ™¯

å½“ç”¨æˆ·æå‡ºä»¥ä¸‹è¯·æ±‚æ—¶ï¼Œå¯æ¿€æ´»æ­¤æŠ€èƒ½ï¼š
- â€œæˆ‘æƒ³è¿½è¸ªå“ªäº›æ–‡ä»¶æ˜¯ä»è¿™ä¸ªæºæ–‡ä»¶æ´¾ç”Ÿå‡ºæ¥çš„ã€‚â€
- â€œæˆ‘çš„ README æ–‡ä»¶ä¸å…¶æºæ–‡ä»¶æ˜¯å¦ä¿æŒåŒæ­¥ï¼Ÿâ€
- â€œä¸ºæˆ‘çš„æ–‡æ¡£è®¾ç½®è¿‡æœŸæ£€æµ‹åŠŸèƒ½ã€‚â€
- â€œå“ªäº›æ–‡ä»¶ä¾èµ–äº ARCHITECTURE.md æ–‡ä»¶ï¼Ÿâ€
- â€œæ£€æŸ¥æ´¾ç”Ÿæ–‡ä»¶æ˜¯å¦æ˜¯æœ€æ–°çš„ã€‚â€

## é‡è¦é™åˆ¶

- ä»…èƒ½è¯†åˆ«æ–‡ä»¶ä¹‹é—´çš„å…³ç³»åŠæ–‡ä»¶çš„æ›´æ–°çŠ¶æ€ï¼Œä¸ä¼šè‡ªåŠ¨ä¿®æ”¹æ–‡ä»¶ã€‚
- ä»…æ”¯æŒå•ä¸ªä»“åº“èŒƒå›´å†…çš„æ–‡ä»¶ï¼ˆç‰ˆæœ¬ 1.0.0ï¼›æœªæ¥å°†æ”¯æŒè·¨ä»“åº“åŠŸèƒ½ï¼‰ã€‚
- æ–‡ä»¶å…³ç³»çš„ç¡®è®¤éœ€è¦äººå·¥ç¡®è®¤ã€‚
- å“ˆå¸Œå€¼ç”¨äºè¿½è¸ªæ–‡ä»¶å†…å®¹ï¼Œè€Œéæ–‡ä»¶çš„è¯­ä¹‰å«ä¹‰ã€‚

---

## æ ¸å¿ƒæ“ä½œ

### 1. åˆ†ææ–‡ä»¶å…³ç³»ï¼ˆAnalyze Relationshipsï¼‰

æ‰«ææ–‡ä»¶ï¼Œæ ¹æ®å†…å®¹é‡å æƒ…å†µå»ºè®®æ–‡ä»¶ä¹‹é—´çš„æ¥æº/æ´¾ç”Ÿå…³ç³»ã€‚

**è¾“å…¥**ï¼šæ–‡ä»¶è·¯å¾„æˆ–ç›®å½•è·¯å¾„
**è¾“å‡º**ï¼šåŒ…å«ç½®ä¿¡åº¦çš„æ–‡ä»¶å…³ç³»åˆ—è¡¨

```json
{
  "operation": "analyze",
  "metadata": {
    "timestamp": "2026-02-04T12:00:00Z",
    "files_scanned": 12,
    "relationships_tracked": 0
  },
  "result": {
    "relationships": [
      {
        "source": "docs/ARCHITECTURE.md",
        "derived": ["README.md", "docs/guides/QUICKSTART.md"],
        "confidence": "high",
        "evidence": "Section headers match, content overlap 73%"
      }
    ]
  },
  "next_steps": [
    "Review suggested relationships â€” some may be coincidental similarity",
    "Run 'establish' to create tracking metadata for confirmed relationships"
  ]
}
```

### 2. å»ºç«‹è¿½è¸ªæœºåˆ¶ï¼ˆEstablish Trackingï¼‰

ä¸ºæºæ–‡ä»¶å’Œæ´¾ç”Ÿæ–‡ä»¶åˆ›å»ºå…ƒæ•°æ®ã€‚

**è¾“å…¥**ï¼šæºæ–‡ä»¶è·¯å¾„ã€æ´¾ç”Ÿæ–‡ä»¶è·¯å¾„
**è¾“å‡º**ï¼šéœ€è¦æ·»åŠ åˆ°æ–‡ä»¶ä¸­çš„å…ƒæ•°æ®æ³¨é‡Š

```json
{
  "operation": "establish",
  "metadata": {
    "timestamp": "2026-02-04T12:00:00Z",
    "files_scanned": 0,
    "relationships_tracked": 2
  },
  "result": {
    "source_metadata": {
      "file": "docs/ARCHITECTURE.md",
      "comment": "<!-- golden-master:source checksum:a1b2c3d4 derived:[README.md,docs/guides/QUICKSTART.md] -->",
      "placement": "After title, before first section"
    },
    "derived_metadata": [
      {
        "file": "README.md",
        "comment": "<!-- golden-master:derived source:docs/ARCHITECTURE.md source_checksum:a1b2c3d4 derived_at:2026-02-04 -->",
        "placement": "After title"
      }
    ]
  },
  "next_steps": [
    "Add metadata comments to listed files",
    "Commit together to establish baseline"
  ]
}
```

### 3. éªŒè¯æ–‡ä»¶æ›´æ–°çŠ¶æ€ï¼ˆValidate Freshnessï¼‰

æ£€æŸ¥æ´¾ç”Ÿæ–‡ä»¶æ˜¯å¦ä¸å…¶æºæ–‡ä»¶ä¿æŒåŒæ­¥ã€‚

**è¾“å…¥**ï¼šåŒ…å« Golden Master å…ƒæ•°æ®çš„æ–‡ä»¶è·¯å¾„æˆ–ç›®å½•è·¯å¾„
**è¾“å‡º**ï¼šæ–‡ä»¶è¿‡æœŸæŠ¥å‘Š

```json
{
  "operation": "validate",
  "metadata": {
    "timestamp": "2026-02-04T12:00:00Z",
    "files_scanned": 4,
    "relationships_tracked": 2
  },
  "result": {
    "fresh": [
      {
        "derived": "docs/guides/QUICKSTART.md",
        "source": "docs/ARCHITECTURE.md",
        "status": "Current (checksums match)"
      }
    ],
    "stale": [
      {
        "derived": "README.md",
        "source": "docs/ARCHITECTURE.md",
        "source_checksum_stored": "a1b2c3d4",
        "source_checksum_current": "e5f6g7h8",
        "days_stale": 12,
        "source_changes": [
          "Line 45: Added new 'Caching' section",
          "Line 78: Updated database diagram"
        ]
      }
    ]
  },
  "next_steps": [
    "Review stale items â€” README.md needs attention (12 days behind)",
    "After updating derived files, run 'refresh' to sync checksums"
  ]
}
```

### 4. æ›´æ–°å“ˆå¸Œå€¼ï¼ˆRefresh Checksumsï¼‰

åœ¨æ‰‹åŠ¨åŒæ­¥æ´¾ç”Ÿæ–‡ä»¶å†…å®¹åï¼Œæ›´æ–°å…ƒæ•°æ®ã€‚

**è¾“å…¥**ï¼šæ‰‹åŠ¨æ›´æ–°åçš„æ´¾ç”Ÿæ–‡ä»¶è·¯å¾„
**è¾“å‡º**ï¼šæ›´æ–°åçš„å…ƒæ•°æ®æ³¨é‡Š

```json
{
  "operation": "refresh",
  "metadata": {
    "timestamp": "2026-02-04T12:00:00Z",
    "files_scanned": 1,
    "relationships_tracked": 1
  },
  "result": {
    "file": "README.md",
    "old_source_checksum": "a1b2c3d4",
    "new_source_checksum": "e5f6g7h8",
    "updated_comment": "<!-- golden-master:derived source:docs/ARCHITECTURE.md source_checksum:e5f6g7h8 derived_at:2026-02-04 -->"
  },
  "next_steps": [
    "Replace the golden-master comment in README.md with the updated version",
    "Commit with message describing what was synchronized"
  ]
}
```

---

## å…ƒæ•°æ®æ ¼å¼

### æ–‡ä»¶å†…æ³¨é‡Šï¼ˆæ¨èä½¿ç”¨ï¼‰

**æºæ–‡ä»¶**ï¼š
```markdown
<!-- golden-master:source checksum:a1b2c3d4 derived:[file1.md,file2.md] -->
```

**æ´¾ç”Ÿæ–‡ä»¶**ï¼š
```markdown
<!-- golden-master:derived source:path/to/source.md source_checksum:a1b2c3d4 derived_at:2026-02-04 -->
```

### ç‹¬ç«‹æ¸…å•ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰

é€‚ç”¨äºé›†ä¸­å¼è¿½è¸ªï¼š

```yaml
# .golden-master.yaml
version: 1
relationships:
  - source: docs/ARCHITECTURE.md
    checksum: a1b2c3d4
    derived:
      - path: README.md
        source_checksum: a1b2c3d4
        derived_at: 2026-02-04
```

---

## å“ˆå¸Œå€¼è§„èŒƒ

**ç®—æ³•**ï¼šä½¿ç”¨ SHA256 è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œå¹¶å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œè§„èŒƒåŒ–å¤„ç†ã€‚

**è§„èŒƒåŒ–æ­¥éª¤**ï¼ˆåœ¨å“ˆå¸Œä¹‹å‰å¿…é¡»æ‰§è¡Œï¼‰ï¼š
1. å°†è¡Œå°¾æ ¼å¼ç»Ÿä¸€ä¸º LFï¼ˆUnix æ ‡å‡†ï¼‰ã€‚
2. åˆ é™¤æ¯è¡Œæœ«å°¾çš„ç©ºç™½å­—ç¬¦ã€‚
3. è¿‡æ»¤æ‰ä¸ Golden Master å…ƒæ•°æ®ç›¸å…³çš„æ³¨é‡Šï¼ˆæ ¼å¼ä¸º `<!--\s*golden-master:.*?-->`ï¼‰ã€‚

**æ˜¾ç¤ºæ–¹å¼**ï¼šæ˜¾ç¤ºå“ˆå¸Œå€¼çš„å‰ 8 ä¸ªå­—ç¬¦ï¼ˆå®Œæ•´å“ˆå¸Œå€¼å­˜å‚¨åœ¨å†…éƒ¨ï¼‰ã€‚

**å®ç°è¯´æ˜**ï¼šéœ€è¦è‡ªå®šä¹‰ä»£ç æ¥å®ç°è¿™äº›è§„èŒƒåŒ–æ­¥éª¤ã€‚æ ‡å‡†åº“ä¸­çš„ `sha256sum` å‡½æ•°æ— æ³•å®Œæˆè¿™äº›æ“ä½œã€‚ç¤ºä¾‹å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š

```bash
# Normalize and hash (requires sed + shasum)
cat FILE | \
  sed 's/\r$//' | \                    # CRLF â†’ LF
  sed 's/[[:space:]]*$//' | \          # Trim trailing whitespace
  sed 's/<!--[[:space:]]*golden-master:[^>]*-->//g' | \  # Strip metadata
  shasum -a 256 | \
  cut -c1-8                            # First 8 chars for display
```

**æ³¨æ„**ï¼šå®ç°æ­¤åŠŸèƒ½çš„ AI ä»£ç†åº”é€šè¿‡ç¼–ç¨‹æ–¹å¼å®Œæˆè§„èŒƒåŒ–å¤„ç†ï¼Œè€Œéä½¿ç”¨ shell å‘½ä»¤ã€‚ä¸Šè¿°æµç¨‹ä»…ç”¨äºæ‰‹åŠ¨éªŒè¯ã€‚

---

## è¾“å‡ºæ ¼å¼

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "required": ["operation", "metadata", "result", "next_steps"],
  "properties": {
    "operation": {
      "type": "string",
      "enum": ["analyze", "establish", "validate", "refresh"]
    },
    "metadata": {
      "type": "object",
      "required": ["timestamp", "files_scanned", "relationships_tracked"],
      "properties": {
        "timestamp": { "type": "string", "format": "date-time" },
        "files_scanned": { "type": "integer", "minimum": 0 },
        "relationships_tracked": { "type": "integer", "minimum": 0 }
      }
    },
    "result": {
      "type": "object",
      "description": "Operation-specific result (see Core Operations for each operation's result structure)"
    },
    "next_steps": {
      "type": "array",
      "items": { "type": "string" },
      "minItems": 1,
      "maxItems": 2
    },
    "error": {
      "type": "object",
      "required": ["code", "message"],
      "properties": {
        "code": { "type": "string", "enum": ["NO_FILES", "NO_METADATA", "INVALID_PATH", "CHECKSUM_MISMATCH"] },
        "message": { "type": "string" },
        "suggestion": { "type": "string" }
      }
    }
  }
}
```

**è¯´æ˜**ï¼š`result` å¯¹è±¡çš„ç»“æ„å› æ“ä½œç±»å‹è€Œå¼‚ã€‚å…·ä½“æ¯ä¸ªæ“ä½œçš„è¾“å‡ºå­—æ®µè¯·å‚è§â€œæ ¸å¿ƒæ“ä½œâ€éƒ¨åˆ†ï¼ˆä¾‹å¦‚ï¼Œ`analyze` æ“ä½œè¿”å› `relationships[]`ï¼Œ`validate` æ“ä½œè¿”å› `fresh[]` å’Œ `stale[]`ï¼‰ã€‚

---

## é”™è¯¯å¤„ç†

| é”™è¯¯ä»£ç  | è§¦å‘æ¡ä»¶ | é”™è¯¯ä¿¡æ¯ | å»ºè®®æªæ–½ |
|------------|----------------|-----------------|---------------------------|
| `NO FILES` | æŒ‡å®šè·¯å¾„ä¸‹æ‰¾ä¸åˆ°æ–‡ä»¶ | â€œè¯¥è·¯å¾„ä¸‹æ²¡æœ‰æ–‡ä»¶ã€‚â€ | â€œè¯·ç¡®è®¤è·¯å¾„å­˜åœ¨ä¸”åŒ…å«å¯è¯»å–çš„æ–‡ä»¶ã€‚â€ |
| `NO_METADATA` | æœªæ‰¾åˆ° Golden Master å…ƒæ•°æ® | â€œæœªæ£€æµ‹åˆ° Golden Master çš„è¿½è¸ªå…ƒæ•°æ®ã€‚â€ | â€œè¯·å…ˆè¿è¡Œ â€˜establishâ€™ æ“ä½œæ¥å»ºç«‹æ–‡ä»¶å…³ç³»ã€‚â€ |
| `INVALID_PATH` | è·¯å¾„æ ¼å¼ä¸æ­£ç¡®æˆ–åŒ…å«æ— æ•ˆå­—ç¬¦ | â€œè·¯å¾„æ ¼å¼æœ‰è¯¯ã€‚â€ | â€œè¯·ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ç›¸å¯¹è·¯å¾„ï¼Œä¸å…è®¸ä½¿ç”¨ â€˜..â€™ã€‚â€ |
| `CHECKSUM_MISMATCH` | å­˜å‚¨çš„å“ˆå¸Œå€¼æ ¼å¼ä¸æ­£ç¡® | â€œå…ƒæ•°æ®ä¸­çš„å“ˆå¸Œå€¼ä¸é¢„æœŸæ ¼å¼ä¸ç¬¦ã€‚â€ | â€œå“ˆå¸Œå€¼åº”ä¸º 8 ä¸ªä»¥ä¸Šçš„åå…­è¿›åˆ¶å­—ç¬¦ã€‚æ–‡ä»¶æ˜¯å¦è¢«æ‰‹åŠ¨ä¿®æ”¹è¿‡ï¼Ÿâ€ |

---

## æœ¯è¯­è¯´æ˜

| æœ¯è¯­ | é€‚ç”¨åœºæ™¯ | ç¦ç”¨åœºæ™¯ |
|------|----------------|-------------------------|
| **Source** | å…¶ä»–æ–‡ä»¶ä¾èµ–çš„åŸºå‡†æ–‡ä»¶ | æ´¾ç”Ÿæ–‡ä»¶ |
| **Derived** | åŸºäºæºæ–‡ä»¶å†…å®¹ç”Ÿæˆçš„æ–‡ä»¶ | æºæ–‡ä»¶ |
| **Stale** | æºæ–‡ä»¶çš„å“ˆå¸Œå€¼å‘ç”Ÿå˜åŒ–çš„æ´¾ç”Ÿæ–‡ä»¶ | æœªè¿›è¡Œè¿½è¸ªçš„æ–‡ä»¶ |
| **Fresh** | å“ˆå¸Œå€¼ä¸æºæ–‡ä»¶ä¸€è‡´çš„æ´¾ç”Ÿæ–‡ä»¶ | æ–°ç”Ÿæˆçš„æ–‡ä»¶ |
| **Tracking** | å·²å»ºç«‹çš„å…ƒæ•°æ®å…³ç³» | éæ­£å¼çš„æ–‡ä»¶å¼•ç”¨æ–¹å¼ |

---

## ç›¸å…³æŠ€èƒ½

- **principle-synthesizer**ï¼šä»å¤šä¸ªæ¥æºä¸­è¯†åˆ«å‡ºå¯èƒ½çš„ Golden Master æ–‡ä»¶ã€‚
- **core-refinery**ï¼šé€šè¿‡å¯¹è¯å¼äº¤äº’ç”Ÿæˆ Golden Master æ–‡ä»¶çš„å€™é€‰åˆ—è¡¨ã€‚
- **pbe-extractor**ï¼šæå–å¯èƒ½æˆä¸º Golden Master çš„æ–‡ä»¶å†…å®¹ã€‚

---

## å¿…éœ€çš„å…è´£å£°æ˜

æ­¤æŠ€èƒ½ä»…ç”¨äºè¯†åˆ«æ–‡ä»¶ä¹‹é—´çš„å…³ç³»å’Œæ£€æµ‹æ–‡ä»¶æ˜¯å¦è¿‡æœŸï¼Œå¹¶ä¸ä¿è¯æ´¾ç”Ÿæ–‡ä»¶çš„å†…å®¹å®Œå…¨å‡†ç¡®åæ˜ äº†æºæ–‡ä»¶çš„å†…å®¹ã€‚åœ¨æ£€æµ‹åˆ°æ–‡ä»¶è¿‡æœŸåï¼Œè¯·ç”¨æˆ·è‡ªè¡Œå®¡æŸ¥æºæ–‡ä»¶çš„æ›´æ”¹å¹¶ç›¸åº”åœ°æ›´æ–°æ´¾ç”Ÿæ–‡ä»¶ã€‚è¯¥æŠ€èƒ½ä»…è´Ÿè´£è¿½è¸ªæ–‡ä»¶çš„ç»“æ„ï¼Œä¸è´Ÿè´£éªŒè¯å†…å®¹çš„è¯­ä¹‰æ­£ç¡®æ€§ã€‚

---

*ç”± Obviously Not å¼€å‘â€”â€”è¿™æ˜¯ä¸€æ¬¾ç”¨äºè¾…åŠ©æ€è€ƒçš„å·¥å…·ï¼Œè€Œéç”¨äºå¾—å‡ºç»“è®ºçš„å·¥å…·ã€‚*