---
name: prompt-optimizer
description: 使用58种经过验证的提示生成技术来评估、优化和提升提示的质量。当用户要求改进、优化或分析某个提示时；当提示需要更清晰、更具体或更有条理时；或者当需要为不同的使用场景生成多种提示变体时，都可以采用这些技术。内容包括质量评估、有针对性的改进方法，以及基于CoT（Contextual Optimization Techniques）、少样本学习（few-shot learning）、角色扮演（role-play）等技术的自动优化方法。
---

# 提示优化器

## 概述

本技能通过58种经过验证的提示优化技术，评估提示的质量，提供针对性的改进建议，并生成优化后的提示版本。它系统地从多个维度分析提示内容，并应用基于证据的优化方法。

## 快速入门

对于大多数优化任务，请遵循以下工作流程：

1. **分析当前提示** - 阅读并理解用户想要实现的目标。
2. **评估质量** - 从清晰度、具体性、结构、完整性等方面进行评估。
3. **加载相关技术** - 查阅 [references/prompt-techniques.md](references/prompt-techniques.md) 以获取适用的方法。
4. **生成改进建议** - 根据评估结果和技术应用，提出改进方案。
5. **创建优化版本** - 应用选定的技术来生成改进后的提示。

## 评估流程

当用户请求优化或评估提示时：

### 第1步：加载质量评估框架

阅读 [references/quality-framework.md](references/quality-framework.md) 以了解评估维度：
- **清晰度** - 提示是否明确易懂？
- **具体性** - 需求和限制是否清晰定义？
- **结构** - 是否具有逻辑性？
- **完整性** - 是否包含了所有必要的背景信息和说明？
- **语气** - 语气是否适合任务？
- **限制** - 边界和限制是否明确？

### 第2步：执行质量评估

根据每个维度对提示进行评估：

```
For each quality dimension:
1. Identify strengths (what works well)
2. Identify weaknesses (what's missing or unclear)
3. Rate quality (Poor/Fair/Good/Excellent)
4. Note specific improvement opportunities
```

### 第3步：确定适用的技术

加载 [references/prompt-techniques.md](references/prompt-techniques.md)，并找出能够解决识别出的问题的技术。

**示例对应关系：**
- 弱点：“发挥创造力” → 应用技术：**角色扮演** 或 **创造性人格设定**
- 弱点：“写一篇文章” → 应用技术：**思维链** 或 **逐步指导**
- 弱点：“总结这个内容” → 应用技术：**小样本学习**（结合示例）

### 第4步：制定优化计划

创建一个结构化的优化计划：
- **优先改进事项** - 能解决多个问题的关键改进措施。
- **可选增强项** - 可提升效果的附加技术。
- **技术组合** - 为特定场景推荐技术组合。

### 第5步：生成优化后的提示

应用选定的技术来创建改进后的版本：
- 保持原始意图和需求不变。
- 在缺失的部分添加结构和清晰度。
- 根据需要嵌入示例、限制或指导信息。
- 保持适当的语气和语气。

## 优化模式

针对常见的优化场景，使用以下经过验证的模式：

### 模糊的请求 → 结构化分解
当提示缺乏清晰度时：
1. 添加明确的任务定义。
2. 将任务分解为带编号的子任务。
3. 包括输出格式的规范。
4. 添加完成标准。

### 通用任务 → 技术增强
当提示过于宽泛时：
1. 从 [references/prompt-techniques.md](references/prompt-techniques.md) 中选择适用的技术。
2. 添加示例（小样本学习）或推理步骤（思维链）。
3. 提供角色或人格设定指导。
4. 明确评估标准。

### 缺乏背景信息 → 场景构建
当提示缺乏背景信息时：
1. 添加用户意图/目标陈述。
2. 指定目标受众。
3. 定义成功指标。
4. 添加相关的限制或边界条件。

### 指令不明确 → 可操作的步骤
当提示提供的指导不够具体时：
1. 将抽象概念转化为具体行动。
2. 添加逐步指导。
3. 设置质量检查点。
4. 明确预期的输出格式。

## 脚本使用

### 质量评估

为了实现一致且可重复的评估，请使用以下脚本：

```bash
python3 scripts/evaluate.py "Your prompt here"
```

该脚本提供：
- 各维度的评分（清晰度、具体性、结构、完整性）。
- 总体质量评级。
- 详细的缺陷分析。
- 建议的改进方向。

### 提示优化

为了自动生成优化后的提示，请使用以下脚本：

```bash
python3 scripts/optimize.py "Your prompt here" --techniques "few-shot,coT"
```

该脚本生成：
- 多个优化后的提示版本。
- 应用技术的说明。
- 与原始提示的对比结果。

**注意：** 脚本适用于自动化操作或需要确定结果的情况。对于复杂的优化任务，建议使用手动工作流程进行更细致的分析。

## 参考文件

### references/prompt-techniques.md
包含58种提示优化技术的完整目录，包括：
- 推理技术（思维链、树状分析、分解法）
- 上下文构建技术（小样本学习、自我一致性、反思）
- 创造性技术（角色扮演、场景设定、人格设定）
- 结构化技术（模板、框架、检查清单）
- 以及更多技术及其使用示例。

在需要为特定优化任务选择适用技术时，请加载此文件。

### references/quality-framework.md
包含详细的评估框架：
- 各维度的评估标准和评分细则。
- 需避免的常见错误模式。
- 不同类型提示的质量基准。

在进行任何评估任务之前，请先加载此文件以确保评估的一致性。

### references/optimization-patterns.md
包含经过验证的优化模式集合：
- 模式与技术的对应关系。
- 优化前后的对比示例。
- 技术组合指南。
- 针对特定场景的模板。

## 最佳实践：
1. **保持用户意图** - 不要改变用户的原始需求，只需调整表达方式。
2. **逐步改进** - 每次应用一种技术并评估其效果。
3. **迭代测试** - 优化后测试提示，并根据需要进一步改进。
4. **记录选择** - 说明应用了哪些技术及其原因。
5. **提供多种选项** - 在适当的情况下提供多个优化版本。

## 何时使用此技能

当用户明确请求“优化”、“改进”或“评估”提示时；
当用户询问提示是否“好”或“清晰”时；
当用户希望“修复”或“改进”效果不佳的提示时；
当用户请求提示的“更好版本”时；
当用户咨询提示设计技巧或最佳实践时；
当用户想分析提示为何效果不佳时，请激活此技能。