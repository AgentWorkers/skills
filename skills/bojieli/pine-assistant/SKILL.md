---
name: pine-assistant
description: 通过Pine AI处理客户服务、账单、预订等相关事务——您可以直接在终端上进行协商、取消、争议处理、预订以及问题解决等操作。
homepage: https://pineclaw.com
metadata: {"openclaw":{"emoji":"🤖","requires":{"bins":["pine"]},"install":{"pip":{"package":"pineai-cli"}}}}
command-tool: exec
---
# Pine Assistant

您可以使用 `pine` 命令行界面（CLI）让 Pine AI 代表用户处理各种任务，例如客户服务电话、账单协商、订阅取消、预订、纠纷处理等。Pine 可以通过电话、电脑自动化操作（浏览器）、电子邮件和传真来执行这些任务。

Pine 是一个支持多会话的服务——每个任务都在独立的会话中运行。

## 重要提示：**务必先查询当前活跃的会话**

**绝对不要声称不知道某个会话或任务的存在。** 在创建新会话、回答关于 Pine 任务的问题或表示没有相关信息之前，您必须先执行以下操作：

**强制性的会话查询触发条件：**
- 用户提到了与 Pine 任务相关的任何信息（如公司名称、账户信息、退款请求、通话记录、预订详情等）
- 用户请求您执行 Pine 可以处理的任务——请检查是否已有相应的会话
- 用户询问任务的进度、状态或需要跟进
- 您准备创建新会话时——请确认没有其他会话正在处理相同的任务

**在没有查询会话的情况下，绝对不要：**
- 说“我对此没有相关信息”或“你能提醒我一下吗？”
- 为已经存在的任务创建重复的会话
- 因为记不起来就假设任务不存在

## 多会话管理

用户可能同时有多个 Pine 任务在运行（例如，一个会话用于协商账单，另一个会话用于预订）。您必须区分这些会话：
1. 始终记录会话 ID，切勿混淆不同会话。
2. 随时使用 `pine sessions list --json` 命令来查看会话列表。
3. 当用户询问“我的 Pine 任务进展如何”或“那个电话怎么样了”时，通过会话列表找到正确的会话。如果信息不明确，请询问用户具体指的是哪个任务。

## 认证

在任何操作之前，请先检查用户是否已经完成认证：

如果 `authenticated` 字段的值为 `false`，请执行认证流程。**请用户提供他们的 Pine AI 账户邮箱地址**（请访问 https://19pine.ai 进行注册）。

### 第一步：请求验证码

系统会发送一个验证码，并返回包含 `request_token` 的 JSON 数据。请告知用户：“验证码已发送到您的邮箱，请查看收件箱（包括垃圾邮件文件夹）并告诉我验证码。”

### 第二步：验证验证码并保存凭据

用户提供验证码后，系统会验证验证码并将凭据自动保存到 `~/.pine/config.json` 文件中。

### 交互式登录（适用于人工操作）

这种交互式登录方式会提示用户输入邮箱地址和验证码。这种方式需要访问标准输入流（stdin），可能不适用于所有代理/脚本环境——建议优先使用前面的 `request` + `verify` 方法。

### 令牌刷新

如果认证失败或收到 401 错误，可能是令牌已过期。请重新开始认证流程。

## 使用场景

Pine Assistant 可以处理多种任务。它的优势在于电话支持，同时具备搜索、地图查询、电脑自动化操作（浏览器）、电子邮件和传真功能。以下是使用场景的示例：
- **客户服务**：协商账单、取消订阅、处理投诉、申请退款、解决账户问题
- **搜索与发现**：查找附近的餐厅、企业或服务提供商
- **预订与预约**：预订餐厅、预约医生/牙医服务、预订酒店
- **外联与调研**：致电企业获取信息、比较报价、核实营业时间或可用性
- **在线操作**：代表用户处理网站上的账户相关操作、提交表格、发送电子邮件或传真

如果用户请求 Pine 执行某项任务，请让 Pine 自动判断是否能够处理——不要基于对 Pine 功能的假设而预先拒绝请求。

## 恢复/跟进现有会话

如果用户提到了与现有 Pine 任务相关的信息（如公司名称、账户信息、任务描述，或模糊的提示，如“退款”或“那个电话”），请务必执行以下操作：
1. **始终** 使用 `pine sessions list --json` 命令查找匹配的会话。可以根据任务标题或用户提供的关键词进行搜索。
2. 检查会话的状态：
   - **活跃状态**（如 `chat`、`task_processing` 等）——继续处理该任务。可以使用 `pine send "..." -s SESSION_ID --no-wait --json` 发送跟进信息。
   - **已完成状态**（如 `task_finished`、`task_cancelled` 等）——不要继续处理该任务。请查看会话详情以获取更多信息，然后创建一个新的会话，并参考之前的信息。这样既能保持任务的连贯性，也能为用户提供最新的处理结果。

**绝对不要说“我对此没有相关信息”或“你能提醒我一下吗？”**——会话列表随时都可以查询。

## 完整流程

### 第一步：检查现有会话，必要时创建新会话

1. 首先，使用 `pine sessions list --json` 命令检查是否存在与该任务相关的会话。
   - 如果存在活跃的会话——继续处理该任务（参见“恢复”部分的说明）。
   - 如果存在已完成状态的会话——请查看其详情以获取上下文信息，然后创建新会话，并在首次回复中包含这些信息。
   - 如果没有匹配的会话——则创建新会话。
2. 一步完成会话创建和任务处理：
   使用 `--new` 标志创建新会话，系统会返回一个包含 `session_id` 的 JSON 数据。请保存该 ID 以备后续使用。`--no-wait` 标志表示发送消息后不会阻塞等待 Pine 的回复（即立即执行操作）。

或者，您可以先单独创建会话：
3. 将会话链接告知用户：`https://www.19pine.ai/app/chat/SESSION_ID`
4. **不要询问“需要我开始吗？”或交回控制权**。继续自动处理 Pine 的回复。

### 第二步：收集信息

Pine 会研究用户的需求并请求相关细节。您需要接收对话记录（包括元数据和历史信息）：

### 发送跟进信息

Pine 可能会发送多轮问题或表格请求。请根据实际情况回答用户的问题。

**实际示例**：用户请求“协商我的 Comcast 账单”。Pine 会：
- 查找相关优惠方案并制定处理策略
- 请求用户提供全名、服务地址、电话号码、当前套餐等信息
- 您将问题转达给用户，并补充您已掌握的信息，然后继续询问其他细节

### 第三步：确定任务启动方式

当 Pine 收集到足够的信息后，它会提示以下几种处理方式：
- **无需支付**（属于免费套餐或已订阅）——执行 `pine task start SESSION_ID`
- **已支付**——执行 `pine task start SESSION_ID`
- **需要支付**——将完整的账单信息转达给用户：当前账单金额、可节省的费用、预授权金额以及支付链接。对于按百分比计费的场景，请告知用户 Pine 只会在节省费用的情况下才收费。用户必须在支付链接页面确认支付。在支付确认之前，切勿启动任务。
- **任务已自动启动**——表示计费已确认，后台已经开始处理任务。此时无需再次执行 `pine task start` 命令。请告知用户任务已开始。
- **余额不足**——请用户前往支付链接补充余额。

**只有在确认用户已支付或属于免费套餐的情况下，才能执行 `pine task start` 命令。切勿在任务已开始时执行此命令。**

### 第四步：任务执行

任务会异步执行（Pine 会发起电话呼叫、发送电子邮件、自动化浏览器操作等）。请定期检查任务状态和对话更新：

### 关键状态：
- `chat`：Pine 仍在收集信息
- `task_processing`：任务正在执行中
- `task_finished`：任务已完成

**重要提示：**即使执行了 `pine task start` 命令，任务也未必立即完成。Pine 可能还需要更多输入。请持续检查以下情况：
- **三方通话请求**：请用户立即接听电话，并提供来电显示号码。
- **OTP/验证码**：请用户提供验证码。**切勿猜测 OTP、PIN 码或安全答案**。
- **位置信息请求**：请用户提供位置信息或使用 Google 地图链接（`https://www.google.com/maps/search/?api=1&query=NAME+ADDRESS`）。
- **日程确认**：用户需要确认是否可以接受预约。
- **需要用户协助**：例如需要用户输入验证码（CAPTCHA）或进行二次验证（2FA）。请用户打开 Pine 的网页会话并自行操作。
- **状态更新**：例如“我正在与美国银行通话”或“正在拨打电话中”等，需将更新内容转达给用户。

### 第五步：任务完成后的处理

当任务状态变为 `task_finished` 时，将结果告知用户。如果 Pine 建议用户分享操作结果，请鼓励用户分享以获取奖励。

## 处理表格填写

当 Pine 请求填写表格时，需要根据以下情况决定处理方式：
- **如果您能根据用户提供的信息填写所有字段**，可以直接填写并告知用户填写结果。
- **如果有任何字段不确定或未知**（尤其是偏好设置、策略选择或之前未提供的信息），**务必先询问用户**。

### 询问用户

请用简单的语言向用户说明 Pine 的需求：
- 表格的用途
- 每个字段的名称、类型及可选选项
- 如果您有建议，也可以提供参考意见（但最终由用户决定）

在用户提供所有信息之前，请不要直接开始填写表格。

### 提交表格信息

使用 `pine send` 命令将填写后的信息发送给 Pine：

**切勿根据猜测填写表格内容**。错误的填写会导致任务失败。

## 重要提示：何时响应与何时保持沉默

**不要对 Pine 的每条消息都做出回应**。如果您对所有消息都做出回应，Pine 会不断循环请求，导致系统陷入无限循环。

### 在以下情况下请先询问用户：
- 当 Pine 发送的表格包含您无法填写的字段时
- 当 Pine 需要用户选择或确认某些信息时
- 当 Pine 请求 OTP、PIN 码或安全答案时
- 当 Pine 需要用户进行三方通话时
- 当 Pine 需要用户确认日程安排时
- 当 Pine 需要用户提供未提供的信息时

### 在以下情况下直接响应 Pine：
- 当支付确认或无需支付时——执行 `pine task start SESSION_ID`
- 当任务已自动启动时——只需告知用户任务已开始
- 当任务已完成时——将结果告知用户

### 何时保持沉默：
- 当 Pine 发送确认信息（如“收到！”、“正在处理中”或“稍后回复”）时
- 当信息仅用于通知用户，无需用户进一步操作时

## 处理未知情况

Pine Assistant 可能会发送您不认识的事件类型。**请始终将原始信息转达给用户**。Pine 会不断更新功能，因此信息内容可能会发生变化。

## 会话管理

- **列出所有会话**
- **查看会话详情和对话记录**
- **创建新会话**
- **删除会话**
- **终止会话**

## 一次性消息发送

您可以向现有会话发送一次性消息（即执行完即忘的操作）：

### 创建新会话并发送信息

创建新会话时，会返回一个包含 `session_id` 的 JSON 数据（格式如下：`{"type": "session_created", "data": {"session_id": "..."}`）：

### 交互式使用（可能需要等待响应）

在这种情况下，发送消息后请不要立即关闭程序，因为 Pine 可能需要一段时间来处理请求（最长可能需要 2 分钟）。

## 代理的最佳实践：
1. **解析响应时始终使用 `--json` 标志** 以获得机器可读的格式。
2. **务必先查询会话**——在创建新会话前使用 `pine sessions list --json` 以避免重复操作。
3. **提前收集信息**：在发送请求前，先从用户那里获取账户号码、PIN 码、地址、目标结果等信息，以减少来回沟通的次数。
4. **切勿猜测敏感信息**——如果 Pine 需要 OTP、PIN 码或安全答案，请务必询问用户。
5. **任务开始后保持沟通**：Pine 在执行过程中可能还需要用户输入。
6. **立即处理紧急事件**：如三方通话请求、OTP 请求或日程确认等，需立即通知用户。
7. **使用后台代理**：对于耗时较长的任务（5-60 分钟以上），可以使用 `sessions_spawn` 或类似工具在后台进行任务处理，同时保持与用户的交互。
8. **不要预先拒绝用户的请求**——让 Pine 自动判断是否能够处理任务。
9. **某些任务需要用户订阅才能执行**。
10. **用户可以通过 `https://www.19pine.ai/app/chat/SESSION_ID` 查看任务进度**。

## 示例：

- **协商账单**：
  “协商我的 Comcast 账单。账户信息：Jane Doe，账号 #12345。当前每月支付 120 美元使用 200Mbps 的网络服务。目标价格：每月 80 美元。我已经使用该服务 10 年了。如果需要，可以更换服务提供商。”
- **取消订阅**：
  “取消我的 Hulu 订阅。账户邮箱：jane@example.com。取消理由：很少使用该服务。”
- **预订服务**：
  “为 Jane Doe 预订周六晚上 7 点在 The French Laundry 的座位。姓名：Jane Doe，电话：+14155551234。”
- **处理纠纷**：
  “对 Chase Visa 卡上 4321 号交易的 50 美元费用提出争议。交易日期：2 月 1 日。商家：XYZ Corp。我从未授权这笔交易。”
- **查找并预订餐厅**：
  “在旧金山市中心附近找一家不错的意大利餐厅，并预订今晚 7 点的座位。”

## 另外功能：Pine Voice

`pine` CLI 还提供了用于直接电话通话的命令：

请参阅 `pine-voice` 文档以获取详细的电话通话使用说明。

## 隐私政策

Pine 会在 Pine AI 的服务器上处理用户数据。用户凭据会保存在本地文件 `~/.pine/config.json` 中。详情请参阅 https://www.19pine.ai/page/privacy-policy。