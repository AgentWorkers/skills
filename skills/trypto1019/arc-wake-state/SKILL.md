---
name: wake-state
description: åœ¨ç³»ç»Ÿå´©æºƒã€ä¸Šä¸‹æ–‡ä¸¢å¤±æˆ–é‡å¯åï¼Œä»èƒ½ä¿æŒä»£ç†çš„çŠ¶æ€ã€‚å½“éœ€è¦ä¿å­˜å½“å‰ä¸Šä¸‹æ–‡ã€åœ¨å´©æºƒåæ¢å¤æ•°æ®ã€åœ¨ä¼šè¯ä¹‹é—´ç»´æŒå†…å­˜æ–‡ä»¶çš„å†…å®¹ï¼Œæˆ–å®ç°å´©æºƒæ¢å¤åŠŸèƒ½æ—¶ï¼Œè¯·ä½¿ç”¨è¯¥åŠŸèƒ½ã€‚è¿™å¯¹äºé‚£äº›å¿…é¡»å…‹æœä¸Šä¸‹æ–‡çª—å£é™åˆ¶çš„è‡ªä¸»ä»£ç†æ¥è¯´è‡³å…³é‡è¦ã€‚
user-invocable: true
metadata: {"openclaw": {"emoji": "ğŸ§ ", "os": ["darwin", "linux"], "requires": {"bins": ["python3"]}}}
---
# æ¢å¤çŠ¶æ€ â€” æ•…éšœæ¢å¤ä¸æ•°æ®æŒä¹…åŒ–

ç¡®ä¿åœ¨ç³»ç»Ÿä¸Šä¸‹æ–‡ä¸¢å¤±æ—¶ä»èƒ½ç»§ç»­è¿è¡Œã€‚æ¯ä¸ªè‡ªä¸»ä»£ç†æœ€ç»ˆéƒ½ä¼šè¾¾åˆ°å…¶ä¸Šä¸‹æ–‡çª—å£çš„é™åˆ¶å¹¶â€œæ­»äº¡â€ã€‚è¯¥åŠŸèƒ½å¯ç¡®ä¿ä½ åœ¨æ¢å¤åä»èƒ½æ¸…æ¥šåœ°è®°å¾—è‡ªå·±ä¹‹å‰æ­£åœ¨åšä»€ä¹ˆã€‚

## åŠŸèƒ½ç”¨é€”

OpenClawä»£ç†èƒ½å¤Ÿä¿æŒä¼šè¯çš„æŒä¹…æ€§ï¼Œä½†ä¸Šä¸‹æ–‡çª—å£ä»ç„¶å­˜åœ¨é™åˆ¶ã€‚å½“ä¸Šä¸‹æ–‡çª—å£è¢«å¡«æ»¡å¹¶éœ€è¦é‡å¯æ—¶ï¼Œéœ€è¦ä¸€ä¸ªå¯é çš„æœºåˆ¶æ¥ä¼ é€’æ•°æ®ã€‚è¯¥åŠŸèƒ½æä¾›äº†ä»¥ä¸‹æ”¯æŒï¼š
1. **ç»“æ„åŒ–çŠ¶æ€æ–‡ä»¶**ï¼šä¸ä»…ä»…æ˜¯åŸå§‹æ–‡æœ¬ï¼Œè€Œæ˜¯å¯è§£æçš„é”®å€¼å¯¹å½¢å¼çš„çŠ¶æ€æ•°æ®ã€‚
2. **è‡ªåŠ¨å¿«ç…§**ï¼šåœ¨æ¯æ¬¡å¾ªç¯è¿­ä»£æ—¶è‡ªåŠ¨ä¿å­˜çŠ¶æ€ã€‚
3. **æ•…éšœæ£€æµ‹**ï¼šåˆ¤æ–­ä¸Šä¸€æ¬¡ä¼šè¯æ˜¯æ­£å¸¸ç»“æŸè¿˜æ˜¯å‘ç”Ÿæ•…éšœã€‚
4. **ä»»åŠ¡é˜Ÿåˆ—**ï¼šä¸€ä¸ªåœ¨é‡å¯åä»èƒ½ä¿ç•™çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ã€‚
5. **æ£€æŸ¥ç‚¹/æ¢å¤**ï¼šå¯ä»¥ä¿å­˜å‘½åæ£€æŸ¥ç‚¹å¹¶ä»ä¸­æ¢å¤æ•°æ®ã€‚

## å‘½ä»¤

### ä¿å­˜å½“å‰çŠ¶æ€
```bash
python3 {baseDir}/scripts/wakestate.py save --status "Building budget tracker skill" --task "Finish skill #1, then start skill #2" --note "Travis approved new direction at 16:45 UTC"
```

### è¯»å–å½“å‰çŠ¶æ€
```bash
python3 {baseDir}/scripts/wakestate.py read
```

### å°†ä»»åŠ¡æ·»åŠ åˆ°æŒä¹…åŒ–é˜Ÿåˆ—
```bash
python3 {baseDir}/scripts/wakestate.py task-add --task "Build security scanner skill" --priority high
```

### å®Œæˆä»»åŠ¡
```bash
python3 {baseDir}/scripts/wakestate.py task-done --id 1
```

### åˆ—å‡ºå¾…åŠä»»åŠ¡
```bash
python3 {baseDir}/scripts/wakestate.py tasks
```

### åˆ›å»ºå‘½åæ£€æŸ¥ç‚¹
```bash
python3 {baseDir}/scripts/wakestate.py checkpoint --name "pre-migration"
```

### ä»æ£€æŸ¥ç‚¹æ¢å¤
```bash
python3 {baseDir}/scripts/wakestate.py restore --name "pre-migration"
```

### è®°å½•å¿ƒè·³ä¿¡å·ï¼ˆæ ‡è®°ä¼šè¯ä¸ºâ€œå­˜æ´»â€ï¼‰
```bash
python3 {baseDir}/scripts/wakestate.py heartbeat
```

### æ£€æŸ¥æ•…éšœçŠ¶æ€ï¼ˆä¸Šä¸€æ¬¡ä¼šè¯æ˜¯å¦æ­£å¸¸ç»“æŸï¼Ÿï¼‰
```bash
python3 {baseDir}/scripts/wakestate.py crash-check
```

### è®¾ç½®é”®å€¼å¯¹
```bash
python3 {baseDir}/scripts/wakestate.py set --key "moltbook_status" --value "pending_claim"
```

### è·å–é”®å€¼å¯¹
```bash
python3 {baseDir}/scripts/wakestate.py get --key "moltbook_status"
```

## æ•°æ®å­˜å‚¨

çŠ¶æ€æ•°æ®é»˜è®¤å­˜å‚¨åœ¨ `~/.openclaw/wake-state/` ç›®å½•ä¸‹ï¼š
- `state.json`ï¼šå½“å‰çŠ¶æ€ï¼ˆçŠ¶æ€ä¿¡æ¯ã€å¤‡æ³¨ã€é”®å€¼å¯¹ï¼‰
- `tasks.json`ï¼šæŒä¹…åŒ–çš„ä»»åŠ¡é˜Ÿåˆ—
- `checkpoints/`ï¼šå‘½åæ£€æŸ¥ç‚¹å¿«ç…§
- `heartbeat.json`ï¼šæ•…éšœæ£€æµ‹çš„æ—¶é—´æˆ³

## æ¢å¤æµç¨‹

å¯åŠ¨æ—¶ï¼Œä»£ç†åº”æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
1. è¿è¡Œ `crash-check` å‘½ä»¤ï¼Œåˆ¤æ–­ä¸Šä¸€æ¬¡ä¼šè¯æ˜¯å¦æ­£å¸¸ç»“æŸã€‚
2. è¿è¡Œ `read` å‘½ä»¤ï¼Œè¯»å–å½“å‰çŠ¶æ€ã€‚
3. è¿è¡Œ `tasks` å‘½ä»¤ï¼ŒæŸ¥çœ‹å¾…åŠä»»åŠ¡ã€‚
4. ä»ä¸Šæ¬¡åœæ­¢çš„ä½ç½®ç»§ç»­æ‰§è¡Œã€‚

## ä½¿ç”¨å»ºè®®ï¼š
- åœ¨æ¯æ¬¡å¾ªç¯è¿­ä»£æ—¶è°ƒç”¨ `heartbeat` å‘½ä»¤ï¼Œä»¥å®ç°æ•…éšœæ£€æµ‹ã€‚
- åœ¨å®Œæˆæ¯ä¸ªé‡è¦ä»»åŠ¡åè°ƒç”¨ `save` å‘½ä»¤ä¿å­˜çŠ¶æ€ã€‚
- åœ¨æ‰§è¡Œé«˜é£é™©æ“ä½œï¼ˆå¦‚æ•°æ®è¿ç§»ã€éƒ¨ç½²ç­‰ï¼‰ä¹‹å‰ä½¿ç”¨æ£€æŸ¥ç‚¹ã€‚
- çŠ¶æ€æè¿°åº”ç®€çŸ­ä½†å…·ä½“æ˜ç¡®ã€‚
- ä»»åŠ¡é˜Ÿåˆ—åœ¨é‡å¯åä»èƒ½ä¿ç•™ï¼Œå¯æ›¿ä»£ä¸´æ—¶ç¬”è®°ä½¿ç”¨ã€‚