---
name: water-coach
description: "**æ°´åˆ†æ‘„å…¥è¿½è¸ªä¸å¥åº·æŒ‡å¯¼åŠŸèƒ½**  
å½“ç”¨æˆ·å¸Œæœ›è®°å½•è‡ªå·±çš„é¥®æ°´é‡ã€æ¥æ”¶é¥®æ°´æé†’ã€è®°å½•èº«ä½“æŒ‡æ ‡ï¼ˆä½“é‡ã€ä½“è„‚ç‡ã€è‚Œè‚‰å æ¯”ã€æ°´åˆ†å æ¯”ï¼‰ï¼Œæˆ–è·å–å…³äºè‡ªèº«æ°´åˆ†æ‘„å…¥ä¹ æƒ¯çš„åˆ†ææ—¶ï¼Œå¯ä½¿ç”¨è¯¥åŠŸèƒ½ã€‚  
è§¦å‘æ¡ä»¶åŒ…æ‹¬ï¼š**æ°´ç›¸å…³äº‹ä»¶**ï¼ˆå¦‚é¥®æ°´è¡Œä¸ºï¼‰ã€**æ°´åˆ†æ‘„å…¥æç¤º**ã€**â€œå¤šå–æ°´â€çš„å»ºè®®**ã€**èº«ä½“æŒ‡æ ‡å˜åŒ–**ï¼ˆå¦‚ä½“é‡å˜åŒ–ï¼‰ä»¥åŠ**æ°´åˆ†æ‘„å…¥ç›®æ ‡è¾¾æˆæƒ…å†µ**ã€‚"
---
# Water Coach v1.2

## å¿«é€Ÿå…¥é—¨

è¯¥åŠŸèƒ½å¸®åŠ©ç”¨æˆ·è®°å½•æ¯æ—¥é¥®æ°´é‡ï¼Œå¹¶æ ¹æ®ç”¨æˆ·çš„é¥®æ°´é‡è¿›åº¦æä¾›ç›¸åº”çš„æé†’ã€‚

## é¦–æ¬¡ä½¿ç”¨ï¼ˆä¸€æ¬¡æ€§è®¾ç½®ï¼‰

### å¿«é€Ÿå…¥é—¨æµç¨‹
æ— éœ€ä¸€æ¬¡æ€§è¯¢é—®æ‰€æœ‰ä¿¡æ¯ï¼Œåªéœ€æå‡ºä»¥ä¸‹åŸºæœ¬é—®é¢˜ï¼š
1. **é¦–å…ˆï¼š**â€œä½ çš„ä½“é‡æ˜¯å¤šå°‘ï¼Ÿâ€ â†’ æ ¹æ®ä½“é‡è®¡ç®—é¥®æ°´é‡ç›®æ ‡ï¼Œç«‹å³å¼€å§‹è®°å½•ã€‚
2. **åç»­ï¼ˆå¯é€‰ï¼‰ï¼š**é€æ­¥è¯¢é—®èº«é«˜ã€èº«ä½“æŒ‡æ ‡å’Œä¸ªäººåå¥½ã€‚

### é…ç½®æ–‡ä»¶
åœ¨ `memory/water_config.json` æ–‡ä»¶ä¸­åˆ›å»ºé…ç½®ï¼š
```json
{
  "version": "1.2",
  "units": {
    "system": "metric",
    "weight": "kg",
    "height": "m",
    "volume": "ml"
  },
  "user": {
    "weight_kg": null,
    "height_m": null,
    "body_fat_pct": null,
    "muscle_pct": null,
    "water_pct": null
  },
  "settings": {
    "goal_multiplier": 35,
    "default_goal_ml": null,
    "cutoff_hour": 22,
    "reminder_slots": [
      {"name": "morning", "hour": 9, "default_ml": 500},
      {"name": "lunch", "hour": 12, "default_ml": 500},
      {"name": "afternoon", "hour": 15, "default_ml": 500},
      {"name": "predinner", "hour": 18, "default_ml": 500},
      {"name": "evening", "hour": 21, "default_ml": 500}
    ]
  },
  "status": {
    "snoozed_until": null,
    "skip_dates": []
  },
  "reports": {
    "weekly_enabled": false,
    "monthly_enabled": false
  }
}
```

### 2. å•ä½æ£€æµ‹ä¸è½¬æ¢
```python
# Auto-detect from user input (first time)
KG_TO_LB = 2.20462
LB_TO_KG = 0.453592
ML_TO_OZ = 0.033814
OZ_TO_ML = 29.5735
M_TO_FT = 3.28084
FT_TO_M = 0.3048
CM_TO_M = 0.01

# Detect weight unit
def detect_weight(s):
    s = s.lower().strip()
    if 'lb' in s or 'pound' in s: return 'lb', extract_number(s)
    if 'kg' in s or 'kilo' in s: return 'kg', extract_number(s)
    # Number only - assume metric for now
    return 'kg', float(s)

# Detect height unit  
def detect_height(s):
    s = s.lower().strip()
    if "'" in s or '"' in s: return 'ft', parse_feet_inches(s)
    if 'cm' in s: return 'cm', extract_number(s)
    if 'm' in s: return 'm', extract_number(s)
    return 'm', float(s)  # assume meters

# Store detected system for future use
config['units']['system'] = 'imperial' if detected == 'lb' else 'metric'
```

### 3. è„šæœ¬ï¼ˆä½äº `memory/` æˆ– `skills/water-coach/scripts/` ç›®å½•ä¸‹ï¼‰

**calc_daily_goal.py** - æ ¹æ®ä½“é‡è®¡ç®—é¥®æ°´é‡ç›®æ ‡ï¼š
```python
#!/usr/bin/env python3
import json, os
CONFIG = 'memory/water_config.json'
def get_goal():
    with open(CONFIG) as f:
        w = json.load(f)['user']['weight_kg']
    return w * 35 if w else None
```

**log_water.py** - å°†é¥®æ°´é‡è®°å½•åˆ° CSV æ–‡ä»¶ä¸­ï¼š
```python
#!/usr/bin/env python3
import csv, json, sys, os
from datetime import datetime, date
CONFIG, LOG = 'memory/water_config.json', 'memory/water_log.csv'
# Reads config, calculates cumulative, appends to CSV
```

**log_body_metrics.py** - è®°å½•èº«ä½“æŒ‡æ ‡ï¼š
```python
#!/usr/bin/env python3
import csv, json, sys, os
from datetime import datetime, date
CONFIG, BODY = 'memory/water_config.json', 'memory/body_metrics.csv'
# Updates config + logs to body_metrics.csv
```

**weekly_report.py** / **monthly_report.py** - åˆ†ææ•°æ®ï¼š
```python
#!/usr/bin/env python3
import csv, json, os
from datetime import datetime, date, timedelta
# Reads water_log.csv, calculates stats, returns report
```

## é¦–æ¬¡ä½¿ç”¨æ—¶çš„è®¾ç½®

é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œéœ€è¦è¯¢é—®ç”¨æˆ·ä»¥ä¸‹ä¿¡æ¯ï¼š
1. **ä½“é‡**ï¼ˆå¿…å¡«ï¼‰ï¼š
   - ç”¨æˆ·å¯ä»¥è‡ªç”±è¾“å…¥ï¼ˆä¾‹å¦‚ï¼šâ€œ95kgâ€ã€â€œ210 lbsâ€ç­‰ï¼‰ã€‚
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹è¾“å…¥å•ä½ï¼š
     - å¦‚æœåŒ…å« â€œkgâ€ æˆ– â€œkilosâ€ï¼Œåˆ™è§†ä¸ºå…¬åˆ¶å•ä½ï¼›
     - å¦‚æœåŒ…å« â€œlbâ€ã€â€œlbsâ€ æˆ– â€œpoundsâ€ï¼Œåˆ™è§†ä¸ºè‹±åˆ¶å•ä½ï¼›
     - å¦‚æœä»…è¾“å…¥æ•°å­—ï¼Œåˆ™é»˜è®¤è§†ä¸ºå…¬åˆ¶å•ä½ã€‚
   - ç³»ç»Ÿä¼šè‡ªåŠ¨å°†ä½“é‡è½¬æ¢ä¸ºåƒå…‹ã€‚

2. **èº«é«˜**ï¼ˆå¯é€‰ï¼‰ï¼š
   - ç”¨æˆ·å¯ä»¥è¾“å…¥ â€œ1.75mâ€ã€â€œ5'9''â€ ç­‰æ ¼å¼ã€‚
   - ç³»ç»Ÿä¼šè‡ªåŠ¨å°†èº«é«˜è½¬æ¢ä¸ºç±³ã€‚

3. **ä½“è„‚ç™¾åˆ†æ¯”**ï¼ˆå¯é€‰ï¼‰
4. **è‚Œè‚‰ç™¾åˆ†æ¯”**ï¼ˆå¯é€‰ï¼‰
5. **æ°´åˆ†æ‘„å…¥ç™¾åˆ†æ¯”**ï¼ˆå¯é€‰ï¼‰

**å•ä½æ£€æµ‹ç¤ºä¾‹ï¼š**
| ç”¨æˆ·è¾“å…¥ | æ£€æµ‹åˆ°çš„å•ä½ | å­˜å‚¨çš„å•ä½ |
|-----------|----------|--------|
| â€œ95 kgâ€ | å…¬åˆ¶ | 95 kg |
| â€œ210 lbsâ€ | è‹±åˆ¶ | 95.25 kg |
| â€œ1.75mâ€ | å…¬åˆ¶ | 1.75 m |
| â€œ5'9''â€ | è‹±åˆ¶ | 1.75 m |
| â€œ175cmâ€ | å…¬åˆ¶ | 1.75 m |

**æ³¨æ„ï¼š** ä¸€æ—¦å•ä½è¢«æ£€æµ‹åˆ°ï¼Œç³»ç»Ÿå°†ä½¿ç”¨è¯¥å•ä½è¿›è¡Œåç»­çš„æ‰€æœ‰è®°å½•å’Œæé†’ã€‚

## æ—¥å¸¸è®°å½•

### æé†’æ—¶é—´è¡¨
| æ—¶é—´ | æé†’å†…å®¹ | é»˜è®¤é¥®æ°´é‡ï¼ˆæ¯«å‡ï¼‰ |
|------|------|---------|
| æ—©ä¸Š | 09:00 | 500ml |
| åˆé¤ | 12:00 | 500ml |
| ä¸‹åˆ | 15:00 | 500ml |
| æ™šé¤å‰ | 18:00 | 500ml |
| æ™šä¸Š | 21:00 | 500ml |

### ç”¨æˆ·è¾“å…¥æ ¼å¼
- `yes 500` â†’ è¡¨ç¤ºé¥®ç”¨äº† 500 æ¯«å‡ï¼ˆå…¬åˆ¶å•ä½ï¼‰ã€‚
- `yes 16oz` â†’ è¡¨ç¤ºé¥®ç”¨äº†çº¦ 473 æ¯«å‡ï¼ˆè‹±åˆ¶å•ä½ï¼‰ã€‚
- `no` â†’ è¡¨ç¤ºæœªé¥®æ°´ã€‚
- `later` â†’ 15-20 åˆ†é’Ÿåå†æ¬¡æé†’ã€‚

### ç”¨æˆ·è¾“å…¥è§£æ
ç³»ç»Ÿä¼šè§£æç”¨æˆ·è¾“å…¥ä»¥ç¡®å®šå•ä½ï¼š
- å¦‚æœè¾“å…¥ä»…åŒ…å«æ•°å­—ï¼Œåˆ™ä½¿ç”¨é…ç½®ä¸­è®¾ç½®çš„é»˜è®¤å•ä½ã€‚
- â€œ500mlâ€ / â€œ500â€ â†’ å…¬åˆ¶å•ä½ï¼ˆæ¯«å‡ï¼‰ã€‚
- â€œ16ozâ€ / â€œ16 ozâ€ â†’ è‹±åˆ¶å•ä½ï¼ˆç›å¸ï¼‰ã€‚
- â€œ2Lâ€ / â€œ2 litersâ€ â†’ è‡ªåŠ¨è½¬æ¢ä¸ºæ¯«å‡ã€‚
- â€œ8 glassesâ€ â†’ æ¯æ¯çº¦ 500 æ¯«å‡ã€‚

### è‡ªé€‚åº”æœºåˆ¶
- å¦‚æœç”¨æˆ·é¥®æ°´é‡ä½äºç›®æ ‡ï¼ˆ<50%ï¼‰ï¼Œç³»ç»Ÿä¼šå¢åŠ æé†’æ¬¡æ•°ã€‚
- å¦‚æœç”¨æˆ·é¥®æ°´é‡è¶…è¿‡ç›®æ ‡ï¼Œç³»ç»Ÿä¼šå‡å°‘æé†’æ¬¡æ•°ã€‚
- ç³»ç»Ÿåœ¨æ™šä¸Š 10:00 ä¹‹åä¸å†å‘é€æé†’ã€‚

## è‡ªç„¶è¯­è¨€æ„å›¾è¯†åˆ«
ç³»ç»Ÿä¼šè§£æç”¨æˆ·çš„æ–‡æœ¬ä¿¡æ¯ä»¥ç†è§£å…¶æ„å›¾ï¼Œæ— éœ€ç”¨æˆ·è¾“å…¥ç²¾ç¡®çš„å‘½ä»¤ã€‚

### è·³è¿‡å½“å¤©æˆ–ä¼‘æ¯æ—¥
ç”¨æˆ·å¯èƒ½è¡¨ç¤ºï¼š
- â€œä»Šå¤©ä¼‘æ¯â€
- â€œä»Šå¤©ä¸è®°å½•é¥®æ°´é‡â€
- â€œä»Šå¤©ç”Ÿç—…äº†â€
- â€œä»Šå¤©è¦æ—…è¡Œâ€
- â€œä»Šå¤©ä¸å–æ°´â€
- â€œä¼‘æ¯å‡ å¤©â€
- â€œè¿™ä¸ªå‘¨æœ«å¤–å‡ºâ€

**ç³»ç»Ÿæ“ä½œï¼š** å°†è¯¥æ—¥æœŸæ ‡è®°ä¸ºâ€œè·³è¿‡â€ï¼Œä¸è®¡å…¥è¿ç»­è®°å½•çš„å¤©æ•°ã€‚

**å›å¤ï¼š** â€œæ˜ç™½äº†ï¼è¯·ä¼‘æ¯å¥½ ğŸ’™ å½“å¤©å·²è·³è¿‡è®°å½•ã€‚â€

### è°ƒæ•´é¥®æ°´é‡ç›®æ ‡
ç”¨æˆ·å¯èƒ½è¡¨ç¤ºï¼š
- â€œä»Šå¤©æ„Ÿè§‰è…¹èƒ€ï¼Œéœ€è¦å‡å°‘é¥®æ°´é‡â€
- â€œä»Šå¤©è¿åŠ¨é‡å¾ˆå¤§ï¼Œéœ€è¦å¤šå–æ°´â€
- â€œä»Šå¤©æ´»åŠ¨é‡è¾ƒå°‘ï¼Œ2 å‡å°±å¤Ÿäº†â€
- â€œå¯ä»¥é™ä½é¥®æ°´é‡ç›®æ ‡å—ï¼Ÿâ€
- â€œæ˜å¤©æƒ³æé«˜é¥®æ°´é‡ç›®æ ‡â€

**ç³»ç»Ÿæ“ä½œï¼š**
- å¦‚æœæ˜¯ä¸´æ—¶è°ƒæ•´ï¼Œå°†ç›®æ ‡å€¼ä¸´æ—¶å­˜å‚¨åœ¨ `status.temp_goal_ml` ä¸­ã€‚
- å¦‚æœæ˜¯æ°¸ä¹…æ€§è°ƒæ•´ï¼Œæ›´æ–° `settings.default_goal_ml`ã€‚

**å›å¤ï¼š** â€œæ˜ç™½äº†ï¼[æ—¥æœŸ] çš„é¥®æ°´é‡ç›®æ ‡å·²è°ƒæ•´ä¸º X æ¯«å‡ã€‚â€

### æš‚åœæé†’
ç”¨æˆ·å¯èƒ½è¡¨ç¤ºï¼š
- â€œè¦å»åº¦å‡â€
- â€œæ¥ä¸‹æ¥ä¸€å‘¨å¾ˆå¿™â€
- â€œä¸è¦æ‰“æ‰°æˆ‘â€
- â€œæš‚åœæé†’å‡ å¤©â€
- â€œæš‚åœæé†’ X å¤©â€

**ç³»ç»Ÿæ“ä½œï¼š** å°†æé†’æ—¶é—´è®¾ç½®ä¸º `status.snoozed_until`ï¼Œå¹¶åœ¨è¯¥æ—¥æœŸä¹‹å‰ä¸å†å‘é€æé†’ã€‚

**å›å¤ï¼š** â€œç¥ä½ æ—…é€”æ„‰å¿«ï¼æé†’åŠŸèƒ½å·²æš‚åœè‡³ [æ—¥æœŸ]ã€‚è¾“å…¥ â€˜I'm backâ€™ å¯ä»¥æ¢å¤æé†’ã€‚â€

### æ¢å¤æé†’
ç”¨æˆ·å¯èƒ½è¡¨ç¤ºï¼š
- â€œæˆ‘å›æ¥äº†â€
- â€œå‡†å¤‡ç»§ç»­è®°å½•é¥®æ°´é‡â€
- â€œæ¢å¤æé†’â€
- â€œåœæ­¢æš‚åœâ€

**ç³»ç»Ÿæ“ä½œï¼š** æ¸…é™¤ `status.snoozed_until`ï¼Œæ¢å¤æ­£å¸¸çš„æé†’åŠŸèƒ½ã€‚

**å›å¤ï¼š** â€œæ¬¢è¿å›æ¥ï¼ğŸ’§ ç°åœ¨å¯ä»¥ç»§ç»­è®°å½•é¥®æ°´é‡äº†ã€‚â€

### ç‰¹æ®Šæƒ…å†µå¤„ç†
- å¦‚æœç”¨æˆ·é”™è¿‡æé†’æ—¶é—´ï¼ˆæ™šä¸Š 10:00ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®°å½• 0 æ¯«å‡ã€‚
- å¦‚æœç”¨æˆ·äº‹åè¡¥å……é¥®æ°´é‡ï¼ˆä¾‹å¦‚ï¼šâ€œä»Šå¤©å–äº† 2 å‡æ°´â€ï¼‰ï¼Œç³»ç»Ÿä¼šè¡¥å½•å½“å¤©çš„é¥®æ°´é‡ã€‚
- å¦‚æœç”¨æˆ·æåˆ°å‰ä¸€å¤©é¥®æ°´é‡ï¼ˆä¾‹å¦‚ï¼šâ€œæ˜¨å¤©å–äº† 2 å‡æ°´â€ï¼‰ï¼Œç³»ç»Ÿä¼šè®°å½•å‰å¤©çš„é¥®æ°´é‡ã€‚

## æ•°æ®æ ¼å¼
- æ•°æ®å­˜å‚¨åœ¨ `water_log.csv` å’Œ `body_metrics.csv` æ–‡ä»¶ä¸­ï¼š
```
timestamp,date,slot,answer,ml_drank,cumulative_ml,daily_goal,goal_pct
```
```
date,weight_kg,height_m,bmi,body_fat_pct,muscle_pct,water_pct
```

## è‡ªç„¶è¯­è¨€å‘½ä»¤
æ— éœ€è¾“å…¥å…·ä½“å‘½ä»¤ï¼Œç³»ç»Ÿä¼šé€šè¿‡è‡ªç„¶è¯­è¨€ç†è§£ç”¨æˆ·çš„æ„å›¾ï¼š
- **å¼€å§‹è®°å½•é¥®æ°´é‡**ï¼š â€œstart water trackingâ€
- **è®°å½•é¥®æ°´é‡**ï¼š â€œdrank 500mlâ€ / â€œhad 2 litersâ€
- **è·³è¿‡å½“å¤©æˆ–ä¼‘æ¯**ï¼š â€œä»Šå¤©ç”Ÿç—…äº†â€ / â€œä»Šå¤©ä¸è®°å½•â€
- **è°ƒæ•´é¥®æ°´é‡ç›®æ ‡**ï¼š â€œä»Šå¤©å‡å°‘é¥®æ°´é‡â€ / â€œéœ€è¦å¤šå–æ°´â€
- **æš‚åœæé†’**ï¼š â€œè¦å»åº¦å‡â€ / â€œä¸è¦æ‰“æ‰°æˆ‘â€
- **æ¢å¤è®°å½•**ï¼š â€œæˆ‘å›æ¥äº†â€ / â€œæ¢å¤è®°å½•â€