---
name: vk-client-search-repetitor
description: 自动为数学辅导老师在VKontakte群组中寻找学生（家长），具备智能过滤功能，并能对在线请求进行优先级排序。
version: 1.0.0
author: OpenClaw @Danil4091
permissions:
  - internet_access
  - file_system_read_write
  - schedule_task
---
# 为家教寻找客户（VK Monitor）

## 1. 描述  
此技能专为数学家教设计，旨在自动化在社交网络中寻找学生的常规流程。系统会监控用户指定的VKontakte（VK）社区列表（如妈妈们群组、招聘信息板块、家教搜索社区），过滤掉其他家教发布的广告信息，并筛选出家长发布的有效请求。系统特别关注在线教学的请求。所有搜索结果会被保存到结构化的文件中，用户会收到一份汇总报告。

## 2. 使用场景  
当用户发出以下请求时，该技能会自动启动：  
- “在VK上为家教寻找客户”  
- “谁在在线寻找数学家教？”  
- “收集群组中的家教招聘信息”  
- “启动数学学生的监控”  
- “找到正在为EGE考试寻找家教的家长”  
- “在VK上优先搜索在线教学的客户”

## 3. 使用方法  
请按照以下步骤操作：  

### 第一步：初始化并获取数据  
1. **检查配置**：确认用户已提供`VK Service Token`（或要求用户输入）。  
2. **获取群组列表**：如果用户尚未提供，请求用户提供10-15个VKontakte群组的URL或ID。  
3. **设置任务重复间隔**：将任务重复执行的间隔设置为每3小时一次。  

### 第二步：收集数据  
对于列表中的每个群组：  
1. 使用`wall.get` API或HTML解析方法获取该群组最近20-30条帖子。  
2. *可选*：如果该群组为讨论型群组，还需查看最新评论。  

### 第三步：分析及过滤数据  
对每条帖子/评论应用以下规则：  

**A. **反垃圾信息过滤**（排除其他家教的广告）**  
如果文本中包含“提供服务”、“招募学生”、“我的教学经验”、“首次课程免费”等字样，请直接忽略（这些属于其他家教的广告）。  

**B. **关键词匹配**  
将文本转换为小写形式，并搜索以下关键词：  
- **基础群组**：`репетитор`（家教）、`математик`（数学）、`ищу репетитора`（寻找家教）、`нужен репетитор`（需要家教）、`помогите с математикой`（需要数学辅导）、`алгебра`（代数）、`геометрия`（几何）。  
- **优先考虑在线教学的群组**：`онлайн`、`skype`、`zoom`、`дистанционно`（远程）、`удаленно`（远程教学）。  
- **质量筛选关键词**：`ЕГЭ`（EGE考试）、`ОГЭ`（OGE考试）、`олимпиада`（奥林匹克竞赛）、`поступление`（升学）、`ДВИ`（数学竞赛）、`физмат`（物理数学）、`лицей`（高中）、`цена не важна`（价格无关紧要）。  

**C. **确定优先级**：  
- **高优先级**：同时包含关键词1和关键词2的帖子。  
- **中等优先级**：仅包含关键词1的帖子。  
- **低优先级/忽略**：未包含任何关键词的帖子。  

### 第四步：保存数据  
如果找到匹配项（中等或高优先级），请检查该链接是否已存在于数据库中（避免重复记录），然后将其保存到`leads_math.csv`文件中（或连接的Google Sheets表格中）。  
**记录格式**：  
`日期_时间 | 群组名称 | 帖子链接 | 发帖者名称 | 请求内容（前100个字符） | 关键词 | 优先级 | 状态`  
*注：状态字段默认填写为“НОВЫЙ”（新）。*  

### 第五步：生成报告  
完成所有群组的检查后，为用户生成一份简要报告。  

## 4. 配置要求  
为确保技能正常运行，用户需要提供以下信息：  
1. **VK_API_TOKEN**：用于读取群组信息的应用程序服务令牌。  
2. **TARGET_groups**：群组ID列表（例如：`[-123456, -987654]`），建议使用以下群组：`Подслушано [城市]`、`Мамочки [城市]`、`Репетиторы поиск`、`Биржа репетиторов`。  
3. **OUTPUT_PATH**：数据保存路径（默认为`./vk_leads_data.csv`）。  

## 5. 异常处理  
- **群组被关闭/删除**：记录错误“无法访问群组[ID]”，并继续检查其他群组。  
- **API请求限制**：如果VK API返回请求次数限制错误，暂停60秒后重新尝试。  
- **无新帖子**：如果3小时内群组内无新帖子，发送报告：“已检查[N]个群组，未找到新请求”。  
- **帖子内容过长**：仅保存帖子的前150-200个字符，以避免CSV文件格式损坏。  

## 6. 报告示例  
**检查循环完成后的示例报告：**  
```text  
✅ 监控任务已完成（14:00）  
检查了12个群组  
CSV文件中的示例记录：  
2023-10-25 14:05;Мамы Москва;https://vk.com/wall-123_456;Анна Петрова;Ищем репетитора для ЕГЭ, только Zoom, мальчик 11 класс;репетитор, егэ, zoom;ВЫСОКИЙ;НОВЫЙ  
-----------------------------------  
🔍 新发现的潜在客户：  
1. [高优先级] “正在为EGE考试寻找家教，仅支持Zoom...”（群组：Мамы Москва）  
2. [高优先级] “需要8年级的代数家教，支持远程教学...”（群组：Репетиторы РФ）  
3. [中等优先级] “谁可以帮助我学习几何？”（群组：Подслушано Саратов）  
共发现3个新客户  
数据已保存至leads_math.csv  
下一次检查时间：17:00  
---  

### 使用建议  
为提高效率，建议用户提供具体的目标群组列表。本地群组（如“Мамочки [地区/城市]”）以及提供公开讨论区或评论功能的家教招聘平台效果最佳。