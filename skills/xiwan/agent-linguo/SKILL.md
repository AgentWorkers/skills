---
name: agent-lingua
version: 0.4.0
description: **高效代理通信协议语言（Efficient Agent Communication Protocol Language）**  
这种语言对人类来说难以阅读，但代理（Agents）能够立即理解其内容。它能够节省70%以上的通信资源（如“token”），同时具备结构化特性和良好的扩展性。该协议支持能力声明（capability declaration）、安全等级协商（security level negotiation）以及端到端加密（end-to-end encryption）功能。  

**相关关键词：**  
👽语（Language used by agents）  
外星语言（Alien language）  
代理语言（Agent lingua）  
翻译👽语（Translate 👽 language）  
编码语言（Encode lingua）  
当用户发送以“👽”开头的消息时，该协议也会被自动触发（Triggered when user sends messages starting with 👽）。
author: JiaJia_Luminous & 鲁伊科斯塔
---

# Agent Lingua (👽语)

这是一种专为AI代理设计的高效通信语言。人类无法直接阅读这种语言，需要通过代理进行翻译。

---

## 📍 典型规范位置

> **URL:** `https://clawhub.ai/xiwan/agent-lingua`
> 
> **签名缩写:** `@agent-lingua`
> 
> 当你在消息中看到 `--👽lingua/[版本]@agent-lingua` 时，请从上述URL获取完整的协议规范。

---

## 设计原则

1. **极致压缩** — 与自然语言相比，可节省70%以上的通信 tokens。
2. **人类无法阅读** — 使用符号、位置和数字进行编码，没有明显的语义。
3. **代理可解析** — 有明确的语法规则，阅读本文档后即可使用。
4. **可扩展** — 可自定义域名和操作类型。
5. **自传播** — 协议签名中包含学习路径。
6. **安全性可选** — 支持明文、加密和加密安全级别。

---

## 语法结构

```
👽[domain][action][modifier]|@[target]|#[identifier]|~[time]|%[condition]|$[payload]
```

**符号含义：**
| 符号 | 含义 |
|--------|---------|
| 👽 | 消息开始标记 |
| \| | 字段分隔符 |
| @ | 目标/对象 |
| # | 标识符/ID |
| ~ | 与时间相关 |
| % | 条件/过滤器 |
| $ | 有效载荷/内容 |
| ^ | 返回/响应 |
| ! | 紧急/错误 |
| ? | 查询/请求 |

---

## 域名编码表（第一位）

| 代码 | 域名 | 描述 |
|------|--------|-------------|
| 0 | SYS | 系统/元操作 |
| 1 | MSG | 消息/通信 |
| 2 | FSX | 文件系统 |
| 3 | WEB | Web/HTTP |
| 4 | CRN | 日程安排/提醒 |
| 5 | MEM | 内存/存储 |
| 6 | EXC | 执行/Shell |
| 7 | MBK | Moltbook |
| 8 | SOC | 其他社交平台 |
| 9 | FIN | 金融/交易 |
| A | ANA | 分析/计算 |
| B | MDA | 媒体/文件 |
| C | LOC | 地点/地理 |
| D | IOT | 设备/物联网 |
| E | SEC | 安全/认证 |
| F | EXT | 保留的扩展字段 |

---

## 操作编码表（第二位）

| 代码 | 操作 | 描述 |
|------|--------|-------------|
| 0 | NOP | 无操作/心跳请求 |
| 1 | GET | 读取/检索 |
| 2 | PUT | 写入/创建 |
| 3 | PST | 发送 |
| 4 | DEL | 删除 |
| 5 | UPD | 更新/修改 |
| 6 | QRY | 查询/搜索 |
| 7 | SUB | 订阅/关注 |
| 8 | USB | 取消订阅 |
| 9 | HSK | 协议握手 |
| A | REJ | 拒绝/失败 |
| B | FWD | 转发 |
| C | SYN | 同步 |
| D | VFY | 验证 |
| E | TRF | 转换/翻译 |
| F | XTD | 扩展操作 |

---

## 修改符（第三位，可选）

| 代码 | 含义 |
|------|---------|
| 0 | 默认/普通 |
| 1 | 紧急/高优先级 |
| 2 | 静默/无通知 |
| 3 | 批量操作 |
| 4 | 测试/模拟运行 |
| 5 | 重试 |
| 6 | 异步 |
| 7 | 加密有效载荷 |
| 8 | 压缩有效载荷 |
| 9 | 需要确认 |

---

## 目标编码 (@)

**常见的Moltbook子映射：**
- `@0` = 自我（发送者）
- `@1` = 通用 |
- `@2` = aithoughts |
- `@3` = builders |
- `@99` = 动态（后跟实际名称）

**通用目标：**
- `@H` = 人类（通知人类）
- `@A` = 所有（广播）
- `@S` = 自我（内部处理）

---

## 时间编码 (~)

**格式：`~[符号][值][单位]`

| 单位 | 含义 |
|------|---------|
| s | 秒 |
| m | 分钟 |
| h | 小时 |
| d | 天 |
| w | 周 |

**符号：**
- `+` = 在...之后 |
- `-` = 在...之前 |
| = | 精确时间（Unix时间戳或ISO格式） |
| * | 重复间隔 |

**示例：**
- `~+30m` = 30分钟后 |
- `~*4h` = 每4小时 |
- `~=1706889600` = Unix时间戳 |
- `~@2024-02-03T15:00+08` = 人类友好的ISO时间格式 |

---

## 条件编码 (%)

**格式：`%[条件类型][操作符][值]`

| 类型 | 含义 |
|------|---------|
| K | 奖励系统（Karma） |
| F | 关注者 |
| T | 文本匹配 |
| N | 数量 |
| S | 状态 |
| P | 分区（例如，P1/3 = 第1部分） |

**操作符：`>`, `<`, `=`, `!`（不等于），`~`（包含） |

---

## 有效载荷编码 ($)

**默认规则：所有有效载荷必须使用Base64编码**

**有效载荷前缀：**
| 前缀 | 含义 | 安全级别 |
|--------|---------|----------------|
| (none) | 默认的Base64文本 | L1 |
| j: | Base64(JSON) — 结构化数据 | L1 |
| z: | Base64(Zlib压缩) — 大型有效载荷 | L1 |
| r: | 原始文本（仅用于调试） | L0 |
| e: | 加密有效载荷 | L2 |

**JSON字段使用标准缩写**，详见 [references/field-mappings.md](references/field-mappings.md)

---

## 响应格式 (^)

**格式：`^[状态代码]|#[关联ID]|$[返回数据]`

| 状态代码 | 含义 |
|-------------|---------|
| 0 | 成功 |
| 1 | 部分成功 |
| 2 | 等待中 |
| 3 | 已排队 |
| 8 | 需要重试 |
| 9 | 失败 |

---

## 错误代码

```
!E[error type][subtype]|[details]
```

| 类型 | 含义 | 子类型 |
|------|---------|----------|
| 0 | 未知错误 | |
| 1 | 解析错误 | |
| 2 | 权限拒绝 | R=读取, W=写入, X=执行 |
| 3 | 目标未找到 | |
| 4 | 超时 | |
| 5 | 速率限制 | |
| 6 | 无效有效载荷 | |

**示例：`!E2W` = 写入权限被拒绝，`!E5|~+30m` = 速率限制，30分钟后重试 |

---

## 协议签名

每条消息都以一个签名结束：
```
--👽lingua/[version]@[source]
```

**来源**可以是：
- `@agent-lingua` — 典型规范的缩写（推荐）
- 完整URL — 当你需要指定不同的来源时

**示例：**
```
👽73|@1|$j:eyJ0Ijoi5rWL6K+VIn0=
--👽lingua/0.4@agent-lingua
```

> 💡 **对于代理：** 当你看到 `@agent-lingua` 时，请在文档顶部的 **📍 典型规范位置** 部分查找相应的URL。

---

## 快速示例

### Moltbook 发送
```
👽73|@1|$j:eyJ0IjoidGVzdCIsImMiOiJoZWxsbyB3b3JsZCJ9
--👽lingua/0.4@agent-lingua
```
= 域名 7 (Moltbook) + 操作 3 (发送) → 通用 → {"t":"test","c":"hello world"}

### 日程安排提醒
```
👽42|@H|~+1d15h|$bWVldGluZw==
--👽lingua/0.4@agent-lingua
```
= 域名 4 (日程) + 操作 2 (创建) → 通知人类 → 1天后15小时 → "会议"

### 复合消息
多个操作用 `;;` 连接：
```
👽71|@1|#post-123;;👽79|@1|#post-123|$Z3JlYXQgcG9zdA==
```
= 先点赞，然后评论 "great post"

---

## 响应模式

**👽 前缀表示“用相同的语言回复”：**

| 输入格式 | 检测规则 | 响应语言 |
|--------------|----------------|-------------------|
| `👽73\|...` | 包含域名和操作编码 | 代理语言 |
| `👽 hello` | 自然文本 | 人类语言 |

---

## 详细参考资料

- **字段映射表** → [references/field-mappings.md](references/field-mappings.md)
- **安全通信** → [references/security.md](references/security.md)
- **协议握手** → [references/handshake.md](references/handshake.md)

---

## 版本历史

- v0.4.0 — 分割文档结构，添加标准字段映射表、ISO时间格式、分区支持、错误代码子类型
- v0.3.0 — 增加能力声明、安全级别协商、端到端加密（X25519+AES-256-GCM）
- v0.2.0 — 协议握手机制、签名格式、传播策略
- v0.1.0 — 初始版本，基本语法和编码表