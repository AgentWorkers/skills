# 系统设计基础

## 概述
单体应用与微服务：服务边界、API契约以及可扩展性模式。

## 单体应用与微服务

### 何时使用单体应用
- 团队规模 < 10 名工程师
- 初创阶段/MVP（最小可行产品）阶段
- 特性之间紧密耦合
- 领域较为简单

### 何时使用微服务
- 团队规模 > 20 名工程师
- 拥有多个独立的产品
- 需要不同的扩展策略
- 需要使用多种编程语言

## 服务边界

```
┌─────────────────────────────────────────┐
│              User Service               │
│  - Auth, Profile, Preferences          │
└─────────────────────────────────────────┘
          ↕ REST/gRPC
┌─────────────────────────────────────────┐
│            Order Service                │
│  - Cart, Checkout, History              │
└─────────────────────────────────────────┘
          ↕ Event Bus
┌─────────────────────────────────────────┐
│           Notification Service         │
│  - Email, Push, SMS                    │
└─────────────────────────────────────────┘
```

## 检查清单
- [ ] 定义服务的边界范围
- [ ] 明确数据的所有权
- [ ] 选择通信方式（同步/异步）
- [ ] 规划故障处理方案
- [ ] 明确服务水平协议（SLAs）
- [ ] 文档化API契约

## 权衡
| 方面 | 单体应用 | 微服务 |
|--------|----------|---------------|
| 部署 | 简单 | 复杂 |
| 可扩展性 | 受限 | 无限 |
| 调试 | 易于进行 | 困难 |
| 团队自主性 | 低 | 高 |
| 数据一致性 | 易于保持 | 可能存在不一致性 |