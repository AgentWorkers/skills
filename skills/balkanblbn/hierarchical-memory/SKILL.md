---
name: hierarchical-memory
description: 管理和导航一个基于分支的多层内存系统。这项技能有助于将复杂的代理上下文组织为“Root”（根层）、“Domain”（域层）和“Project”（项目层），从而防止上下文信息过度膨胀。它包含一个辅助脚本 `add_branch.py`，该脚本用于创建本地 Markdown 文件和目录，以对内存结构进行管理。
---
# 分层记忆（神经分支结构）

该技能提供了一种结构化的方法，用于以多层次、分支化的形式管理长期记忆，从而防止信息冗余并确保信息的高效检索。

## 🛡️ 安全性与透明度
该技能包含一个名为 `scripts/add_branch.py` 的 Python 脚本。该脚本仅用于：
1. 在 `memory/` 文件夹中创建目录。
2. 为新记忆分支生成标准的 Markdown 文件。
3. 将这些新文件的链接添加到现有的记忆映射中。
**该脚本不执行任何网络操作，不访问敏感系统文件，也不执行外部代码。**

## 记忆架构

记忆系统分为三个主要层次：

1. **第 1 层：根记忆（`MEMORY.md`）**
    - 相当于中枢神经系统。
    - 包含关于合作伙伴关系、核心任务和全局目标的高层次信息。
    - 作为通往其他所有记忆层次的入口。

2. **第 2 层：领域记忆（`memory/domains/*.md`）**
    - 专门用于存储特定领域的知识。
    - 例如：`coding.md`、`trading.md`、`social.md`、`research.md`。
    - 包含该领域的具体理念、技术栈和项目索引。

3. **第 3 层：项目记忆（`memory/projects/*.md`）
    - 详细记录特定项目的信息。
    - 例如：`hesapgaraj.md`、`clawguard.md`、`baa.md`。
    - 包含项目状态、待办事项、技术规格和项目历史。

## 如何使用该技能

### 1. 检索信息
- 首先在 `MEMORY.md` 中进行搜索。
- 通过“地图”链接找到相关的领域或项目文件。
- 使用 `read` 命令仅加载当前任务所需的具体分支内容。

### 2. 添加新信息
- **关于合作伙伴关系的新信息**：更新 `MEMORY.md`。
- **新领域**：在 `memory/domains/` 中创建新文件，并在 `MEMORY.md` 中添加该文件的链接。
- **新项目**：在 `memory/projects/` 中创建新文件，并在其对应的领域文件中添加该文件的链接。

### 3. 跨领域引用
- 如果一个项目属于多个领域（例如，一个需要编程功能的交易机器人），则需要在相应的领域文件中同时链接该项目文件。

## 自动化工具

使用提供的脚本来维护记忆层次结构：
- `scripts/add_branch.py`：自动使用正确的模板创建新的领域或项目文件，并建立相应的链接。

## 最佳实践
- **原子性写入**：确保每个项目文件仅包含与该项目相关的信息。
- **回链**：每个分支都应包含“返回根目录”或“返回所属领域”的链接。
- **清理冗余信息**：定期检查并删除过时的信息。
- **重要性说明**：每个分支和重要条目都必须包含“重要性”说明（说明该信息为何重要），以防止信息堆积（即“僵尸记忆”现象）。
- **最近变更记录**：在每个领域/项目文件夹中维护一个 `recent_delta.md` 文件，记录过去 3-7 天内的变更内容，以便快速同步上下文信息。