---
name: nas-agent-sync
version: 1.1.0
description: **OpenClaw çš„ Synology NAS é›†æˆï¼šé€šè¿‡ SSH ä¸ºå¤šä»£ç†å›¢é˜Ÿæä¾›é›†ä¸­å¼æ–‡ä»¶å­˜å‚¨**

OpenClaw æ˜¯ä¸€ä¸ªç”¨äºŽç®¡ç†å’Œç›‘æŽ§åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼€æºå·¥å…·ï¼Œè€Œ Synology NASï¼ˆç½‘ç»œé™„åŠ å­˜å‚¨è®¾å¤‡ï¼‰åˆ™æä¾›äº†ä¾¿æ·çš„æ–‡ä»¶å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡å°† OpenClaw ä¸Ž Synology NAS é›†æˆï¼Œå›¢é˜Ÿå¯ä»¥é«˜æ•ˆåœ°å­˜å‚¨ã€å…±äº«å’Œè®¿é—®æ–‡ä»¶ï¼Œä»Žè€Œå®žçŽ°æ›´å¼ºå¤§çš„åä½œèƒ½åŠ›ã€‚

### é›†æˆæ­¥éª¤ï¼š

1. **å®‰è£… OpenClaw å’Œç›¸å…³ä¾èµ–**ï¼š
   é¦–å…ˆï¼Œç¡®ä¿æ‚¨çš„ç³»ç»Ÿä¸Šå·²å®‰è£… OpenClaw åŠå…¶æ‰€æœ‰å¿…è¦çš„ä¾èµ–åº“ã€‚

2. **é…ç½® SSH è¿žæŽ¥**ï¼š
   åœ¨ OpenClaw ä¸­é…ç½® SSH è¿žæŽ¥ä¿¡æ¯ï¼Œä»¥ä¾¿èƒ½å¤Ÿè®¿é—® Synology NASã€‚æ‚¨éœ€è¦æä¾› Synology NAS çš„ IP åœ°å€ã€ç”¨æˆ·åå’Œå¯†ç ã€‚

3. **é…ç½®æ–‡ä»¶å…±äº«**ï¼š
   åœ¨ Synology NAS ä¸­ï¼Œå¯ç”¨æ–‡ä»¶å…±äº«åŠŸèƒ½ï¼Œå¹¶è®¾ç½®å…±äº«ç›®å½•çš„è®¿é—®æƒé™ã€‚ç¡®ä¿ OpenClaw ç”¨æˆ·å…·æœ‰è®¿é—®è¿™äº›å…±äº«ç›®å½•çš„æƒé™ã€‚

4. **åœ¨ OpenClaw ä¸­ä½¿ç”¨å…±äº«ç›®å½•**ï¼š
   åœ¨ OpenClaw ä¸­ï¼Œå°† Synology NAS ä¸Šçš„å…±äº«ç›®å½•æ·»åŠ åˆ°å¯è®¿é—®çš„ç›®å½•åˆ—è¡¨ä¸­ã€‚è¿™æ ·ï¼Œå›¢é˜Ÿæˆå‘˜å°±å¯ä»¥é€šè¿‡ OpenClaw ç›´æŽ¥è®¿é—®è¿™äº›å…±äº«ç›®å½•ï¼Œå°±åƒè®¿é—®æœ¬åœ°æ–‡ä»¶ä¸€æ ·æ–¹ä¾¿ã€‚

5. **éƒ¨ç½²ç›‘æŽ§ä»»åŠ¡**ï¼š
   ä½¿ç”¨ OpenClaw éƒ¨ç½²ç›‘æŽ§ä»»åŠ¡ï¼Œå°†éœ€è¦ç›‘æŽ§çš„æ–‡ä»¶æˆ–ç›®å½•æ·»åŠ åˆ°ä»»åŠ¡åˆ—è¡¨ä¸­ã€‚è¿™äº›æ–‡ä»¶æˆ–ç›®å½•å°†è‡ªåŠ¨ä»Ž Synology NAS ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¹¶åœ¨ä»»åŠ¡æ‰§è¡Œæ—¶è¿›è¡Œç›‘æŽ§ã€‚

### ä¼˜åŠ¿ï¼š

- **é›†ä¸­å¼å­˜å‚¨**ï¼šæ‰€æœ‰å›¢é˜Ÿæˆå‘˜éƒ½å¯ä»¥ä»ŽåŒä¸€ä¸ªä¸­å¤®ä½ç½®è®¿é—®æ–‡ä»¶ï¼Œæé«˜äº†æ•°æ®ç®¡ç†å’Œåä½œçš„æ•ˆçŽ‡ã€‚
- **å®‰å…¨æ€§**ï¼šSynology NAS æä¾›äº†å¼ºå¤§çš„è®¿é—®æŽ§åˆ¶å’ŒåŠ å¯†åŠŸèƒ½ï¼Œç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§ã€‚
- **çµæ´»æ€§**ï¼šæ‚¨å¯ä»¥æ ¹æ®éœ€è¦é…ç½®æ–‡ä»¶å…±äº«çš„æƒé™å’Œè®¿é—®è§„åˆ™ã€‚

é€šè¿‡è¿™ç§é›†æˆæ–¹æ¡ˆï¼ŒOpenClaw å¯ä»¥æˆä¸ºå¤šä»£ç†å›¢é˜Ÿä¸­ä¸å¯æˆ–ç¼ºçš„æ–‡ä»¶ç®¡ç†å’Œç›‘æŽ§å·¥å…·ï¼Œå¸®åŠ©å›¢é˜Ÿæ›´é«˜æ•ˆåœ°åä½œå’Œå®Œæˆä»»åŠ¡ã€‚
emoji: ðŸ“¦
tags:
  - nas
  - synology
  - file-storage
  - ssh
  - multi-agent
  - backup
---

# NASä»£ç†åŒæ­¥â€”â€”ç”¨äºŽOpenClawä»£ç†çš„Synologyæ–‡ä»¶å­˜å‚¨

ä½¿ç”¨Synology NASï¼ˆæˆ–ä»»ä½•å¯é€šè¿‡SSHè®¿é—®çš„å­˜å‚¨è®¾å¤‡ï¼‰æ¥é›†ä¸­ç®¡ç†å¤šä»£ç†å›¢é˜Ÿä¹‹é—´çš„æ–‡ä»¶å­˜å‚¨ã€‚å…¶ä¸­ä¸€ä¸ªä»£ç†å……å½“**æ–‡ä»¶ä¸»èŠ‚ç‚¹**ï¼ˆFile Masterï¼‰ï¼Œæ‰€æœ‰å…¶ä»–ä»£ç†éƒ½é€šè¿‡è¯¥èŠ‚ç‚¹è·¯ç”±æ–‡ä»¶è¯·æ±‚ã€‚

## é—®é¢˜

å¤šä»£ç†è®¾ç½®ä¼šåœ¨å¤šä¸ªå·¥ä½œç©ºé—´ä¸­ç”Ÿæˆæ–‡ä»¶ã€‚å¦‚æžœæ²¡æœ‰é›†ä¸­å­˜å‚¨ï¼š
- æ–‡ä»¶ä¼šåœ¨ä»£ç†ä¼šè¯ä¹‹é—´ä¸¢å¤±
- æ²¡æœ‰å¤‡ä»½ç­–ç•¥
- ä»£ç†ä¼šé‡å¤å·¥ä½œ
- æ²¡æœ‰ç»Ÿä¸€çš„æ–‡ä»¶ä¿¡æ¯æ¥æº

## è§£å†³æ–¹æ¡ˆ

æŒ‡å®šä¸€ä¸ªä»£ç†ä½œä¸º**æ–‡ä»¶ä¸»èŠ‚ç‚¹**ã€‚æ‰€æœ‰æ–‡ä»¶æ“ä½œéƒ½é€šè¿‡`sessions_send`å‡½æ•°å‘é€åˆ°è¯¥ä»£ç†ã€‚æ–‡ä»¶ä¸»èŠ‚ç‚¹è´Ÿè´£ç®¡ç†ï¼š
- ä¸ŽNASçš„SSHè¿žæŽ¥
- æ¯ä¸ªä»£ç†çš„æ–‡ä»¶å¤¹ç»“æž„
- æ–‡ä»¶çš„å­˜å‚¨å’Œæ£€ç´¢
- è·¨ä»£ç†çš„æ–‡ä»¶å…±äº«

## æž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    sessions_send     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     SSH      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent A  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ FILE MASTER â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   NAS   â”‚
â”‚ (Finance)â”‚ "store invoice.pdf" â”‚ (Tech Lead) â”‚             â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    sessions_send          â”‚  SSH
â”‚ Agent B  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º       â”‚
â”‚ (Sales)  â”‚ "get sales report"        â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚ _agents/     â”‚
                                 â”‚ â”œâ”€â”€ agent-a/ â”‚
                                 â”‚ â”œâ”€â”€ agent-b/ â”‚
                                 â”‚ â”œâ”€â”€ agent-c/ â”‚
                                 â”‚ â””â”€â”€ _shared/ â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è®¾ç½®

### 1. NASè¦æ±‚

- Synology NASï¼ˆä»»ä½•åž‹å·ï¼‰æˆ–ä»»ä½•æ”¯æŒSSHçš„LinuxæœåŠ¡å™¨
- æ”¯æŒåŸºäºŽå¯†é’¥çš„SSHèº«ä»½éªŒè¯
- å»ºè®®ä½¿ç”¨VPNæˆ–Tailnetä»¥å®žçŽ°å®‰å…¨çš„è¿œç¨‹è®¿é—®

### 2. åˆ›å»ºæ–‡ä»¶å¤¹ç»“æž„

```bash
SSH_HOST="user@your-nas-ip"

# Create agent folders (customize agent names to match your team)
ssh $SSH_HOST "mkdir -p ~/_agents/{coordinator,techops,finance,sales,marketing}"

# Create shared folders
ssh $SSH_HOST "mkdir -p ~/_shared/{config,templates}"

# Create agent directory file
ssh $SSH_HOST 'cat > ~/_shared/config/agent-directory.json << EOF
{
  "agents": {
    "coordinator": { "role": "Coordinator", "path": "~/_agents/coordinator/" },
    "techops": { "role": "File Master", "path": "~/_agents/techops/" },
    "finance": { "role": "Finance", "path": "~/_agents/finance/" }
  },
  "shared": "~/_shared/",
  "basePath": "~/"
}
EOF'
```

### 3. é…ç½®æ–‡ä»¶ä¸»èŠ‚ç‚¹ä»£ç†

åœ¨æ–‡ä»¶ä¸»èŠ‚ç‚¹ä»£ç†çš„`AGENTS.md`æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```markdown
## FILE MASTER â€” Incoming Requests

When another agent sends a file request via sessions_send:

### Store a file:
ssh USER@NAS-IP "mkdir -p ~/_agents/[agent]/[subfolder]/"
# Copy/create file there

### Retrieve a file:
ssh USER@NAS-IP "cat ~/_agents/[agent]/[file]"
# Send content back to requesting agent

### Confirm back:
sessions_send(sessionKey="agent:[requester]:main", message="Done! File at [path]")
```

### 4. é…ç½®å…¶ä»–ä»£ç†

åœ¨æ¯ä¸ªä»£ç†çš„`AGENTS.md`æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```markdown
## File Operations â†’ File Master

I do NOT access files directly. ALL file ops go through the File Master:

sessions_send(sessionKey="agent:techops:main", message="Store: [details]")
sessions_send(sessionKey="agent:techops:main", message="Retrieve: [path]")
```

## NASæ–‡ä»¶å¤¹ç»“æž„ï¼ˆæŽ¨èï¼‰

```
~/
â”œâ”€â”€ _agents/
â”‚   â”œâ”€â”€ coordinator/     # Coordinator files
â”‚   â”‚   â”œâ”€â”€ journal/     # Daily journals
â”‚   â”‚   â””â”€â”€ tracking/    # Task tracking
â”‚   â”œâ”€â”€ techops/         # Tech docs, scripts
â”‚   â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ configs/
â”‚   â”œâ”€â”€ finance/         # Finance
â”‚   â”‚   â”œâ”€â”€ invoices/
â”‚   â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â””â”€â”€ reports/
â”‚   â”œâ”€â”€ sales/           # Sales
â”‚   â”‚   â”œâ”€â”€ leads/
â”‚   â”‚   â””â”€â”€ proposals/
â”‚   â””â”€â”€ [your-agent]/    # Per-agent storage
â”œâ”€â”€ _shared/
â”‚   â”œâ”€â”€ config/          # Shared configs
â”‚   â”‚   â””â”€â”€ agent-directory.json
â”‚   â””â”€â”€ templates/       # Shared templates
â””â”€â”€ _backups/
    â””â”€â”€ memory/          # Memory file backups
```

## é€šè¿‡VPN/Tailnetè¿›è¡ŒSSHè¿žæŽ¥ï¼ˆæŽ¨èï¼‰

```bash
# Connect via secure tunnel IP (e.g. WireGuard, ZeroTier, or similar)
SSH_HOST="user@10.x.x.x"  # Your VPN/Tailnet IP

# Test connection
ssh $SSH_HOST "echo 'NAS connected!'"
```

## å®‰å…¨æ€§

- âœ… ä½¿ç”¨åŸºäºŽå¯†é’¥çš„SSHèº«ä»½éªŒè¯ï¼ˆé…ç½®æ–‡ä»¶ä¸­ä¸åŒ…å«å¯†ç ï¼‰
- âœ… é€šè¿‡VPN/Tailnetå»ºç«‹åŠ å¯†éš§é“ï¼ˆæ— éœ€ç«¯å£è½¬å‘ï¼‰
- âœ… æ–‡ä»¶ä¸»èŠ‚ç‚¹çš„è®¾ç½®é™åˆ¶äº†SSHè®¿é—®æƒé™ï¼Œä»…å…è®¸ä¸€ä¸ªä»£ç†è®¿é—®
- âœ… å…¶ä»–ä»£ç†æ— æ³•èŽ·å–SSHå‡­æ®
- âŒ ç»ä¸è¦å°†SSHå¯†é’¥å­˜å‚¨åœ¨ä»£ç†çš„`SOUL.md`æ–‡ä»¶æˆ–å†…å­˜ä¸­

## ä¸ºä»€ä¹ˆä½¿ç”¨æ–‡ä»¶ä¸»èŠ‚ç‚¹æ¨¡å¼ï¼Ÿ

1. **å®‰å…¨æ€§**ï¼šåªæœ‰æ–‡ä»¶ä¸»èŠ‚ç‚¹æ‹¥æœ‰NASçš„è®¿é—®æƒé™
2. **ä¸€è‡´æ€§**ï¼šæ–‡ä»¶ä½ç½®çš„ç»Ÿä¸€ç®¡ç†
3. **å®¡è®¡è¿½è¸ª**ï¼šæ‰€æœ‰æ–‡ä»¶æ“ä½œéƒ½é€šè¿‡æ–‡ä»¶ä¸»èŠ‚ç‚¹è®°å½•ä¸‹æ¥
4. **ç®€æ´æ€§**ï¼šå…¶ä»–ä»£ç†æ— éœ€äº†è§£SSHå‘½ä»¤çš„è¯¦ç»†ä¿¡æ¯

## å¤‡ä»½ç­–ç•¥

### æ¯æ—¥è‡ªåŠ¨å¤‡ä»½ï¼ˆé€šè¿‡OpenClawï¼‰
è®¾ç½®ä¸€ä¸ªcronä½œä¸šï¼Œå°†ä»£ç†çš„å·¥ä½œç©ºé—´å¤‡ä»½åˆ°NASï¼š

```json5
// Cron job config
{
  "schedule": { "kind": "cron", "expr": "0 3 * * *", "tz": "UTC" },
  "payload": {
    "kind": "agentTurn",
    "message": "Backup all agent workspaces to NAS. For each agent: rsync workspace memory/ folder to NAS _agents/{agent}/memory-backup/. Report any failures."
  },
  "sessionTarget": "isolated"
}
```

### æ‰‹åŠ¨å¤‡ä»½å‘½ä»¤
```bash
# Backup specific agent
rsync -avz ~/.openclaw/workspace-finance/memory/ user@nas-ip:~/_agents/finance/memory-backup/

# Backup all agents (customize list to your team)
for agent in coordinator techops finance sales marketing; do
  rsync -avz ~/.openclaw/workspace-$agent/memory/ user@nas-ip:~/_agents/$agent/memory-backup/
done
```

## æ•…éšœæŽ’é™¤

**SSHè¿žæŽ¥è¢«æ‹’ç»ï¼š**
â†’ æ£€æŸ¥VPN/Tailnetçš„çŠ¶æ€â€”â€”NASæ˜¯å¦åœ¨çº¿å¹¶å·²è¿žæŽ¥ï¼Ÿ
â†’ ç¡®è®¤NASä¸Šçš„SSHæœåŠ¡æ­£åœ¨è¿è¡Œï¼ˆSynologyï¼šDSM â†’ æŽ§åˆ¶é¢æ¿ â†’ ç»ˆç«¯ & SNMPï¼‰

**æƒé™è¢«æ‹’ç»ï¼š**
â†’ SSHå¯†é’¥æœªæ·»åŠ ï¼š`ssh-copy-id user@nas-ip`
â†’ NASçš„ä¸»æ–‡ä»¶å¤¹æœªå¯ç”¨ï¼ˆSynologyï¼šDSM â†’ ç”¨æˆ· â†’ é«˜çº§è®¾ç½® â†’ å¯ç”¨ä¸»æ–‡ä»¶å¤¹æœåŠ¡ï¼‰

**ä¼ è¾“é€Ÿåº¦æ…¢ï¼š**
â†’ ä½¿ç”¨ç›´æŽ¥çš„VPNè¿žæŽ¥ï¼ˆé¿å…ä¸­é—´è½¬å‘ï¼‰
â†’ è€ƒè™‘ä½¿ç”¨åŽ‹ç¼©åŠŸèƒ½ï¼š`rsync -avz --compress`

## å…¼å®¹çš„NASåž‹å·

- âœ… Synologyï¼ˆä»»ä½•æ”¯æŒDSM 7+çš„åž‹å·ï¼‰
- âœ… QNAPï¼ˆQTS 5+ï¼‰
- âœ… TrueNAS / FreeNAS
- âœ… ä»»ä½•æ”¯æŒSSHè®¿é—®çš„LinuxæœåŠ¡å™¨
- âœ… é…å¤‡å¤–éƒ¨å­˜å‚¨çš„Raspberry Pi

## æ›´æ–°æ—¥å¿—

### v1.1.0
- ç§»é™¤äº†æ‰€æœ‰é’ˆå¯¹ç‰¹å®šä»£ç†å’Œè®¾ç½®çš„å¼•ç”¨
- ä¼˜åŒ–äº†æ–‡ä»¶å¤¹ç»“æž„å’Œç¤ºä¾‹ä»£ç 
- æ·»åŠ äº†åŸºäºŽcronçš„å¤‡ä»½ç­–ç•¥

### v1.0.0
- åˆå§‹ç‰ˆæœ¬