---
name: qianfan-knowledgebase-search
description: ä» Qianfan çŸ¥è¯†åº“ä¸­æœç´¢ä¿¡æ¯ã€‚å½“æ‚¨éœ€è¦ä»ç”¨æˆ·åœ¨ç™¾åº¦ Qianfan å¹³å°ä¸Šçš„ç§æœ‰çŸ¥è¯†åº“ä¸­æ£€ç´¢ä¿¡æ¯æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚
metadata: { "openclaw": { "emoji": "ğŸ“š",  "requires": { "bins": ["python3"], "env":["BAIDU_API_KEY", "QIANFAN_KNOWLEDGEBASE_IDS"]},"primaryEnv":"BAIDU_API_KEY" } }
---

# QianfançŸ¥è¯†åº“æœç´¢æŠ€èƒ½

è¯¥æŠ€èƒ½ç”¨äºä»ç™¾åº¦Qianfanå¹³å°çš„çŸ¥è¯†åº“ä¸­æœç´¢å’Œæ£€ç´¢ä¿¡æ¯ï¼Œæ”¯æŒè¯­ä¹‰æœç´¢ã€å…¨æ–‡æœç´¢ã€æ··åˆæœç´¢ä»¥åŠç»“æœçš„é‡æ’åŠŸèƒ½ã€‚

## å·¥ä½œæµç¨‹

1. è¯¥æŠ€èƒ½ä¼šæ‰§è¡Œä½äº`search.py`ä¸­çš„Pythonè„šæœ¬ã€‚
2. è„šæœ¬ä¼šå‘QianfançŸ¥è¯†åº“æœç´¢APIå‘é€POSTè¯·æ±‚ã€‚
3. APIä¼šè¿”å›ç»“æ„åŒ–çš„æœç´¢ç»“æœï¼Œå…¶ä¸­åŒ…å«æ•°æ®å—ã€è¯„åˆ†ä»¥åŠå…ƒæ•°æ®ã€‚

## ç¯å¢ƒå˜é‡

| å˜é‡å | æ˜¯å¦å¿…å¡« | è¯´æ˜ |
|---------|---------|--------|
| BAIDU_API_KEY | æ˜¯     | Qianfanå¹³å°APIå¯†é’¥ |
| QIANFAN_KNOWLEDGEBASE_IDS | å¦     | çŸ¥è¯†åº“IDåˆ—è¡¨ï¼ˆä»¥é€—å·åˆ†éš”ï¼Œè‹¥è¯·æ±‚ä¸­æœªæŒ‡å®šåˆ™ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼‰ |

## å‚æ•°

#### è¯·æ±‚ä½“ç»“æ„

| å‚æ•°å    | ç±»å‹     | æ˜¯å¦å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜                |
|---------|---------|---------|-------------------|
| query    | str     | æ˜¯     |                    | æœç´¢æŸ¥è¯¢å†…å®¹             |
| knowledgebase_ids | list[str] | å¦     |                    | çŸ¥è¯†åº“IDåˆ—è¡¨ï¼ˆä½¿ç”¨ç¯å¢ƒå˜é‡æ—¶å¿½ç•¥ï¼‰     |
| top_k     | int     | å¦     | 6                    | è¿”å›çš„æ•°æ®å—æ•°é‡ï¼ˆèŒƒå›´ï¼š1-40ï¼‰       |
| score_threshold | float    | å¦     | 0.4                    | è¿‡æ»¤è¯„åˆ†é˜ˆå€¼ï¼ˆèŒƒå›´ï¼š0-1ï¼‰       |
| enable_graph | bool     | å¦     | false                 | æ˜¯å¦å¯ç”¨çŸ¥è¯†å›¾è°±           |
| enable_expansion | bool     | å¦     | false                 | æ˜¯å¦è¿”å›æ‰©å±•åçš„æ•°æ®å—         |
| recall    | obj      | å¦     |                      | å›å¿†ç­–ç•¥é…ç½®             |
| +recall.type | str     | å¦     | hybrid                | å›å¿†ç±»å‹ï¼šå…¨æ–‡/è¯­ä¹‰/æ··åˆ         |
| +recall.top_k | int     | å¦     | 100                    | å›å¿†é˜¶æ®µè¿”å›çš„æ•°æ®å—æ•°é‡ï¼ˆèŒƒå›´ï¼š1-400ï¼‰   |
| +recall.vec_weight | float    | å¦     | 0.75                    | æ··åˆç±»å‹ä¸‹çš„å‘é‡æƒé‡ï¼ˆèŒƒå›´ï¼š0-1ï¼‰       |
| rerank    | obj      | å¦     |                      | é‡æ’é…ç½®             |
| +rerank.enable | bool     | å¦     | true                 | æ˜¯å¦å¯ç”¨ç»“æœé‡æ’           |
| +rerank.top_n | int     | å¦     | 20                    | é‡æ’åçš„æ•°æ®å—æ•°é‡ï¼ˆèŒƒå›´ï¼š1-40ï¼‰       |

> æ³¨æ„ï¼šè¾“å…¥å‚æ•°æ—¶åº”ä½¿ç”¨æ‰å¹³åŒ–çš„åç§°ï¼ˆä¾‹å¦‚`recall_type`ã€`recall_top_k`ï¼‰ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸ºåµŒå¥—ç»“æ„ã€‚

## ç¤ºä¾‹ç”¨æ³•

```bash
# Configure knowledgebase IDs via environment variable
export BAIDU_API_KEY="your_api_key"
export QIANFAN_KNOWLEDGEBASE_IDS="kb_id_1,kb_id_2"
python3 skills/qianfan-knowledgebase-search/search.py '{"query":"è¯·ä»‹ç»ä¸‹åƒå¸†å¤§æ¨¡å‹çŸ¥è¯†åº“"}'
```

```bash
# Or specify knowledgebase IDs in request parameters
python3 skills/qianfan-knowledgebase-search/search.py '{"query":"å¦‚ä½•ä½¿ç”¨API","knowledgebase_ids":["kb_id_1","kb_id_2"],"top_k":10,"recall_type":"hybrid","rerank_enable":true}'
```

## å“åº”ç»“æ„

å“åº”åŒ…å«ä»¥ä¸‹å­—æ®µï¼š

- **id**ï¼šè¯·æ±‚çš„å”¯ä¸€æ ‡è¯†ç¬¦
- **created_at**ï¼šè¯·æ±‚çš„åˆ›å»ºæ—¶é—´æˆ³
- **total_count**ï¼šè¿”å›çš„æ•°æ®å—æ€»æ•°
- **chunks**ï¼šæ•°æ®å—åˆ—è¡¨
  - **chunk_id**ï¼šæ•°æ®å—çš„å”¯ä¸€æ ‡è¯†ç¬¦
  - **content**ï¼šæ•°æ®å—å†…å®¹ï¼ˆæ”¯æŒæ–‡æœ¬ã€å›¾è¡¨ã€è¡¨æ ¼ç­‰å¤šç§æ ¼å¼ï¼‰
  - **rerank**ï¼šæ•°æ®å—çš„é‡æ–°æ’åºè¯„åˆ†åŠæ’åºä½ç½®
  - **recall**ï¼šæ•°æ®å—çš„å¬å›è¯„åˆ†åŠæ’åºä½ç½®
  - **meta**ï¼šå…ƒæ•°æ®ï¼ˆåŒ…æ‹¬æ•°æ®å—ç±»å‹ã€è¯é¢‘ã€æ–‡æ¡£ä¿¡æ¯ç­‰ï¼‰
  - **neighbors**ï¼šç›¸å…³çš„æ•°æ®å—

## å½“å‰çŠ¶æ€

QianfançŸ¥è¯†åº“æœç´¢æŠ€èƒ½å·²å®Œå…¨å®ç°ï¼Œå¯ç”¨äºä»ç™¾åº¦Qianfanå¹³å°çš„ç§æœ‰çŸ¥è¯†åº“ä¸­æ£€ç´¢ä¿¡æ¯ã€‚