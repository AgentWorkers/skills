---
name: ceaser
description: 使用 `ceaser-mcp` 工具与 Base L2 上的 Ceaser 隐私协议进行交互。该功能依赖 `ceaser-mcp` npm 包来执行所有操作，包括屏蔽（shield）、解除屏蔽（unshield）、笔记管理（note management）以及协议查询（protocol queries）。所有与 Ceaser 相关的命令均通过 CLI 子命令来执行（格式为 `npx -y ceaser-mcp <subcommand>`）。Ceaser 是一个基于 Base L2（链 ID 8453）的隐私保护工具，它利用 Noir/UltraHonk 的零知识证明（zero-knowledge proofs）技术来实现数据保护。
user-invocable: true
allowed-tools: Bash
homepage: https://ceaser.org
metadata: { "openclaw": { "requires": { "bins": ["curl", "jq", "node", "npx"] }, "homepage": "https://ceaser.org" } }
---
# Ceaser隐私协议

该技能支持与Base L2（链ID 8453）上的Ceaser隐私协议进行交互。Ceaser允许用户使用零知识证明（ZK proofs）将ETH存入隐私池，并将其提取到任意地址。该协议无需任何可信设置，而是利用Noir电路编译成的UltraHonk证明来实现隐私保护。

该技能使用`ceaser-mcp` npm包来执行存入、提取资金以及管理相关笔记的操作。所有与Ceaser相关的工具调用均通过CLI子命令完成。

---

## 替代方案
如果已安装`mcporter`并且Ceaser MCP服务器配置正确（详见`{baseDir}/mcporter.json`文件），则也可以使用`mcporter call ceaser.TOOL_NAME`作为等效的调用方式。推荐使用CLI作为主要操作方式。

**基础URL：**`https://ceaser.org`  
**网络：**Base L2（链ID 8453）  
**合约地址：**`0x278652aA8383cBa29b68165926d0534e52BcD368`  
**服务提供商：**`https://ceaser.org`  
**协议费用：**每次操作0.25%（25 bps）  
**支持的货币单位：**0.001、0.01、0.1、1、10、100 ETH  

以下所有REST端点均为公开接口，无需身份验证。每个IP的请求速率限制为：读取操作60次/分钟，写入操作5次/分钟。

完整的OpenAPI 3.0规范请参见`{baseDir}/references/openapi.json`。

---

## 仅读查询

### 显示可存入/提取的货币单位及费用明细  
列出用户可以存入或提取的金额以及相应的费用（0.25%的协议费用）。

### 计算特定金额的费用明细  
输入金额（单位：wei）。例如：`100000000000000000`等于0.1 ETH。响应结果包含协议费用（0.25%）、服务提供商费用（0.24%）、中继节点费用（0.01%）以及实际可提取金额。

### 获取隐私池统计信息  
返回隐私池的总体锁定金额（TVL，单位：wei）、可读格式的锁定总额、笔记总数以及费用信息。

### 获取当前的Merkle根节点  
返回24层Poseidon Merkle树的根节点。`source`字段指示该数据是来自本地索引器还是通过链上查询获得的。

### 检查是否已使用过消毁器（nullifier）  
输入消毁器的字节32哈希值。响应结果为`{"spent": true/false}`。

### 查看服务提供商的状态  
返回服务提供商的钱包余额、已注册的协议、电路断路器状态、交易队列信息、持久化交易跟踪数据以及索引器同步状态。

### 简单的运行状态检查  
如果服务提供商正在运行，返回`{"ok": true}`。

---

## 索引器查询  
索引器维护着一个与链上合约同步的本地Merkle树，用户无需通过RPC调用即可即时获取交易记录和根节点数据。

### 索引器同步状态  
返回索引器的同步状态（已同步、正在同步、上次同步的区块编号、叶子节点数量、根节点信息以及运行状态。

### 获取索引化的Merkle根节点（即时获取，无需RPC调用）  
直接获取Merkle树的根节点信息。

### 列出所有交易记录（分页显示）  
返回所有已记录的交易记录，包括总数、当前页码、起始索引和每页显示的数量（每页最多100条记录）。

### 根据叶子节点索引获取具体交易记录  
根据叶子节点的索引获取相应的交易记录。

---

## x402服务提供商（无Gas结算）  
服务提供商作为无Gas结算的中间节点：它负责验证ZK证明并将其提交到链上，同时为用户支付交易费用。这使得即使钱包余额为0 ETH也能完成资金提取。

### x402功能查询  
返回支持的方案（zk-relay）、网络（eip155:8453）、协议（ceaser）以及证明格式（ultrahonk）。

### 验证ZK证明（仅用于测试，不提交到链上）  
返回验证结果、验证详情、所需Gas费用以及服务提供商的费用。

### 将ZK证明提交到链上（无Gas结算）  
服务提供商负责支付Gas费用。接收者收到的金额为原始金额减去0.25%的协议费用。重复提交相同的证明会返回之前缓存的结果。

---

## 准备存入操作  
该功能用于生成用于存入ETH的未签名交易。用户需要使用自己的钱包对交易数据进行签名并提交。

### 生成存入交易的详细信息  
返回预构建的交易数据（包括接收地址、数据内容和金额）以及费用明细。调用者需要使用自己的钱包对交易数据进行签名。

**重要提示：**存入操作需要在客户端生成ZK证明。证明、交易记录以及对应的秘密信息/消毁器必须通过Ceaser前端（https://ceaser.org）或`ceaser-mcp` npm包（`npx ceaser-mcp`）来生成。该技能本身无法生成证明，仅负责查询API。

---

## CLI子命令（存入/提取操作）
`ceaser-mcp` npm包提供了可以直接在bash中使用的CLI子命令，用于生成ZK证明并实现无Gas结算。所有输出结果均为JSON格式。

### 存入ETH（生成证明并创建未签名交易）  
返回未签名的交易数据（包括接收地址、数据内容和金额），以及备份字符串。用户需要使用自己的钱包对交易数据进行签名并提交。支持的货币单位：0.001、0.01、0.1、1、10、100 ETH。  
生成的未签名交易数据还会保存在`~/.ceaser-mcp/pending-tx.json`文件中，以便后续进行自动签名操作。

**重要提示：**输出文件中的`backup`字段包含钱包的私钥，必须妥善保管——这是后续提取资金所必需的。

### 列出已存储的笔记  
显示所有未使用的笔记及其ID、金额和对应的叶子节点索引。使用`--all`选项可查看已使用的笔记。

### 提取ETH（通过x402实现无Gas结算）  
生成销毁证明并将其提交给服务提供商。服务提供商负责支付Gas费用。接收者收到的金额为原始金额减去0.25%的协议费用。操作前需要确保有有效的笔记存在（该笔记的存入交易已在链上得到确认）。

### 从备份文件中导入笔记  
从Base64格式的备份文件中导入笔记（该文件可由`shield`命令或Ceaser前端生成）。在提取资金前必须先导入这些笔记。

### 帮助文档  
所有命令的成功执行结果会以JSON格式输出到标准输出（stdout），失败时则输出到标准错误输出（stderr）。

---

## 关键概念  
- **存入（Shield）**：将ETH存入隐私池，并在链上创建相应的交易记录。需要用户在客户端生成ZK证明。  
- **提取（Unshield）**：从隐私池中提取ETH到任意地址。需要之前存入的笔记以及对应的秘密信息/消毁器。服务提供商负责支付Gas费用。  
- **笔记（Note）**：包含秘密信息、消毁器、金额以及交易记录的私有记录。笔记本身不会存储在链上，仅存储其Merkle哈希值（即交易记录）。  
- **消毁器（Nullifier）**：从笔记中生成的唯一标识符。一旦使用，该消毁器会被记录在链上以防止双重支付。  
- **货币单位（Denomination）**：固定的金额单位（0.001至100 ETH），用于防止基于金额的匿名化攻击。  
- **协议费用（Protocol Fee）**：0.25%（25 bps），其中0.24%归服务提供商所有，0.01%归中继节点所有。  

---

## 执行交易（存入/提取操作）  
用户进行存入或提取操作时，务必使用`ceaser-mcp`的CLI子命令。这是推荐的主要操作方式：

### 使用`ceaser-mcp` CLI子命令  
`ceaser-mcp`包提供了用于生成ZK证明并完成无Gas结算的CLI子命令。所有输出结果均为JSON格式。

### 使用`mcporter`服务器（通过Claude Code）  
`ceaser-mcp`包也可以作为Claude Code的MCP服务器运行，提供包括`ceaser_shield_eth`和`ceaser_unshield`在内的10个工具。笔记数据存储在`~/.ceaser-mcp/notes.json`文件中。  
npm包链接：`https://www.npmjs.com/package/ceaser-mcp`  

### 非技术用户的使用方式  
用户可以直接访问`https://ceaser.org`：连接钱包、选择金额，然后点击“存入”或“提取”按钮。前端会负责生成证明、处理钱包签名以及笔记管理。

### 自动签名模式（ceaser-send）  
另一个名为`ceaser-send`的技能提供了全自动的存入/提取流程，使用临时热钱包完成操作。该技能会生成BIP-39助记词，用户向热钱包充值后，系统会自动完成交易签名和提交。  
**注意：**自动签名方式会在用户的钱包和热钱包之间创建可被观察到的链上链接（包括充值和退款交易）。为确保最大程度的隐私安全，建议使用手动操作方式（结合MetaMask）。只有在用户明确要求自动签名时才使用`ceaser-send`。  
安装命令：`clawhub install ceaser-send`  

---

## 该技能的附加功能  
在等待交易结果或探索协议细节时，该技能可帮助用户：  
- 查看可使用的货币单位及费用信息  
- 监控隐私池的总体锁定金额（TVL）和笔记数量  
- 在提取资金前验证消毁器是否已被使用  
- 检查服务提供商的状态和电路断路器的运行情况  
- 浏览已索引的交易记录和Merkle树的状态