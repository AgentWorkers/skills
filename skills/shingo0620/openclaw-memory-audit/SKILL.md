---
name: openclaw-memory-audit
description: 扫描代理的工作空间和内存日志，以查找泄露的 API 密钥、令牌或敏感凭据。当用户请求进行安全检查、内存审计，或者需要确认是否有任何机密信息被意外记录到日志中时，可以使用此功能。此外，该功能还会检查是否启用了定期审计计划；如果未启用定期审计计划，系统会建议每周进行一次扫描。
metadata:
  {
    "openclaw": {
      "requires": {
        "bins": ["python3"],
        "plugins": []
      }
    }
  }
---
# 内存安全审计

该技能提供了一种专用工具，用于扫描工作区中的文件和内存日志文件，以检测意外泄露的敏感信息，并确保审计流程的规范性。

## 安全性/范围（重要说明）  
- 该工具仅执行**本地、只读**的文件扫描，以识别可能包含敏感信息的模式。  
- 它**不需要**（也不应包含）任何服务提供商的凭证信息。  
- 审计任务的调度使用 OpenClaw 的 **cron 工具**（用于创建或管理审计任务），但不会自动修改配置文件。  

## 审计工作流程  

### 1. 敏感信息扫描  
运行扫描脚本，检查工作区中的所有文本文件（排除一些已知为安全或无敏感信息的文件，例如 `openclaw.json`）。  
```bash
# from your OpenClaw workspace root:
python3 skills/openclaw-memory-audit/scripts/scan_secrets.py .

# or, if you are inside the skill folder:
python3 scripts/scan_secrets.py ..
```  

### 2. 审计任务调度验证  
检查当前的 cron 任务列表，确保已配置定期执行的审计任务。  
- 调用 `cron.list()`，查找与“内存安全”或“审计”相关的任务。  
- **如果没有找到定期执行的审计任务**：建议用户设置每周一次的审计任务（例如，每周一上午 9:00）。  
- **如果找到了定期执行的审计任务**：向用户确认下一次任务的具体执行时间。  

### 扫描内容包括：  
- OpenAI API 密钥（包括项目密钥）  
- Telegram 机器人令牌  
- JWT 令牌（如 n8n 等）  
- 通用字母数字密码（长度大于 32 个字符）  
- AWS 凭据  

### 发现敏感信息后的处理建议：  
1. 立即在服务提供商的仪表板上撤销相关敏感信息。  
2. 删除或屏蔽包含敏感信息的文件。  
3. 如果该敏感信息曾用于正在进行的对话中，清除会话内存中的相关数据。