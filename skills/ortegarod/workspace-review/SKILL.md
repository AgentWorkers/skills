---
name: workspace-review
description: 根据 OpenClaw 的规范，审核工作区结构及内存文件。当需要“审查工作区”、“审计文件”、“检查结构”或进行定期自我维护时，请使用此功能。该功能有助于发现与标准模式的偏差。
---

# 工作空间审查

这是一个自我审计流程，用于验证工作空间文件是否遵循 OpenClaw 的规范，以及是否出现了非标准化的情况。

## 何时执行审查

- 定期执行（每周一次或在进行重大更改后）
- 当被要求“审查”、“审计”或“检查”工作空间时
- 在初始化或进行重大重组之后
- 在心跳维护周期期间

## 审查流程

### 1. 结构检查

验证所需文件是否存在于正确的位置：

**关于 `BOOT.md` 与 `BOOTSTRAP.md` 的说明：**
- `BOOT.md`：持久性文件；在每次网关重启时执行（如果启用了 `boot-md` 钩子）
- `BOOTSTRAP.md`：一次性文件；代理在首次运行时执行该文件，之后会将其删除

**检查方法：** 在工作空间根目录下运行 `ls -la` 命令，标记缺失的文件。

### 2. 文件用途审计

每个文件应只承担一个特定的功能。检查是否存在功能范围过大的情况：

| 文件 | 应包含的内容 | 不应包含的内容 |
|------|----------------|-------------------|
| AGENTS.md | 操作说明、内存工作流程、行为规则 | 个人回忆、日常日志、工具配置 |
| SOUL.md | 个人形象、沟通风格、身份理念 | 任务列表、技术细节、凭证信息 |
| USER.md | 用户信息、偏好设置 | 代理的回忆信息、系统配置 |
| IDENTITY.md | 用户名称、表情符号、个人风格、外部身份信息（钱包地址等） | 操作说明、回忆信息 |
| TOOLS.md | 与特定环境相关的信息（摄像头名称、SSH 主机地址、语音设置） | 技能使用说明、操作流程 |
| HEARTBEAT.md | 用于定期检查的简短清单 | 详细的操作流程、完整文档 |
| MEMORY.md | 经过筛选的课程内容、关键信息、重要人物/项目 | 日志记录、原始笔记 |
| memory/*.md | 日志记录、原始笔记、会话摘要 | 长期保存的筛选后的回忆信息 |

**检查方法：** 浏览每个文件，标记内容位置不正确的情况。

### 3. 文件管理规范

- 日志文件应使用 `YYYY-MM-DD.md` 或 `YYYY-MM-DD-slug.md` 的格式
- 由钩子生成的会话文件（`session-memory` 钩子创建的文件）应定期检查
- 参考文档应使用描述性名称（而非日期格式，例如 `project-notes.md`、`api-guide.md`）
- `MEMORY.md` 中应包含经过筛选的精华内容，而非原始日志
- `MEMORY.md` 和日志文件之间不应存在重复信息
- 旧的日志文件应定期被整理并合并到 `MEMORY.md` 中
- 日志文件中不应包含敏感数据（如 API 密钥、密码）

**自动内存清理：** OpenClaw 会在会话压缩之前触发代理执行自动清理操作，将重要信息写入 `memory/YYYY-MM-DD.md` 文件。此过程是自动完成的，无需手动操作，但请注意：当文件大小超过约 180,000 个字符时，相关内容将被压缩。

### 4. 索引对齐性

- 默认情况下，只有 `MEMORY.md` 和 `memory/**/*.md` 文件会被索引
- 日志文件应使用 `YYYY-MM-DD.md` 的格式；参考文档应使用描述性名称
- 配置文件中的 `memorySearch.extraPaths` 可以用于索引 `memory/` 目录之外的文件

**会话记忆（实验性功能）：** 如果 `memorySearch.experimental.sessionMemory` 为 `true`，会话记录也会被索引并通过 `memory_search` 进行搜索。

### 5. Git 状态

**⚠️ 该工作空间为私有环境。切勿将其推送到 GitHub 或任何公共远程仓库。**

- [ ] 未配置远程仓库（或仅配置了私有备份）
- 不存在应被跟踪但未被跟踪的文件
- 不存在应被 Git 忽略但实际被跟踪的文件
- 不存在已存在数天但仍未提交的更改
- `.gitignore` 文件中列出了需要排除的敏感文件（如 `.key`、`.pem`、`.env`、`secrets` 等）

### 6. 异常文件检查

检查不符合标准结构的文件：

**标记不符合标准的文件：**
- 重复 `BOOTSTRAP.md` 功能的文件（例如，同时存在 `README.md` 和 `AGENTS.md`）
- 将凭证信息存储在工作空间中（凭证信息应存储在 `~/.openclaw/credentials` 文件中）
- 创建了无明确用途的非标准目录

**注意：** 只有 `MEMORY.md` 和 `memory/**/*.md` 文件会被索引。`memory/` 目录之外的文件可以通过配置中的 `memorySearch.extraPaths` 进行索引。

### 7. 文件大小检查

启动文件应保持简洁（每次会话时都会加载）：

- `AGENTS.md`：理想长度小于 500 行，最多不超过 1000 行
- `SOUL.md`：理想长度小于 200 行
- `USER.md`：理想长度小于 100 行
- `IDENTITY.md`：理想长度小于 50 行
- `HEARTBEAT.md`：理想长度小于 100 行（过长可能导致文件加载缓慢）

### 8. 技能管理检查

如果 `skills/` 目录存在：
- 每项技能都应对应一个包含有效元数据（名称、描述）的 `SKILL.md` 文件
- 不应存在重复的技能条目（避免工作空间中的重复数据）
- 技能信息应遵循逐步公开的策略（使用简洁的 `SKILL.md` 文件，并提供详细信息链接）

## 审查结果报告格式

审查完成后，生成报告：

### 参考资料

- [references/openclaw-conventions.md](references/openclaw-conventions.md) — 完整的工作空间文件规范
- [references/checklist.md](references/checklist.md) — 快速参考清单