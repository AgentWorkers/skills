---
name: code-cache
description: ç”¨äºAIä»£ç†çš„è¯­ä¹‰ä»£ç ç¼“å­˜æœºåˆ¶ï¼šèƒ½å¤Ÿç¼“å­˜ã€æ£€ç´¢å¹¶é‡ç”¨ä»£ç†å…ˆå‰æ‰§è¡Œè¿‡ç¨‹ä¸­ç”Ÿæˆçš„ä»£ç ã€‚
metadata: {"openclaw":{"emoji":"ğŸ„","homepage":"https://raysurfer.com","requires":{"env":["RAYSURFER_API_KEY"]},"primaryEnv":"RAYSURFER_API_KEY"}}
---

# ä»£ç ç¼“å­˜ - ä¸º AI ä»£ç†æä¾›çš„è¯­ä¹‰åŒ–ä»£ç ç¼“å­˜åŠŸèƒ½

è¯¥æŠ€èƒ½é€šè¿‡ [Raysurfer](https://raysurfer.com) API å®ç°è¯­ä¹‰åŒ–ä»£ç ç¼“å­˜ã€‚

## åŠŸèƒ½æ¦‚è¿°

å½“æ‚¨çš„ä»£ç†ç”Ÿæˆå¹¶æ‰§è¡Œä»£ç æ—¶ï¼Œä»£ç ç¼“å­˜ç³»ç»Ÿä¼šå°†å…¶å­˜å‚¨èµ·æ¥ã€‚ä¹‹åå¦‚æœé‡åˆ°ç±»ä¼¼çš„ä»»åŠ¡ï¼Œä»£ç†å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­è·å–å¹¶è¿è¡Œå·²ç¼“å­˜çš„ä»£ç ï¼Œä»è€ŒèŠ‚çœæ—¶é—´å’Œä»¤ç‰Œï¼ˆtokenï¼‰ã€‚

## è®¾ç½®æ–¹æ³•

ä» [Raysurfer ä»ªè¡¨æ¿](https://raysurfer.com/dashboard/api-keys) è·å–æ‚¨çš„ API å¯†é’¥ï¼Œå¹¶è¿›è¡Œé…ç½®ï¼š

```bash
# Via environment variable
export RAYSURFER_API_KEY=your_api_key_here

# Or via OpenClaw config
openclaw config set skills.entries.code-cache.apiKey "your_api_key_here"
```

## å¯ç”¨å‘½ä»¤

### æœç´¢ç¼“å­˜çš„ä»£ç ç‰‡æ®µ

```
/code-cache search <task description> [--top-k N] [--min-score FLOAT] [--show-code]
```

æ ¹æ®è‡ªç„¶è¯­è¨€ä»»åŠ¡æè¿°æœç´¢ç¼“å­˜çš„ä»£ç ç‰‡æ®µã€‚

**é€‰é¡¹ï¼š**
- `--top-k N` â€” æœ€å¤šè¿”å›ç»“æœæ•°é‡ï¼ˆé»˜è®¤å€¼ï¼š5ï¼‰
- `--min-score FLOAT` â€” æœ€ä½è¯„åˆ†è¿‡æ»¤æ¡ä»¶ï¼ˆé»˜è®¤å€¼ï¼š0.3ï¼‰
- `--show-code` â€” æ˜¾ç¤ºåŒ¹é…é¡¹çš„æºä»£ç 

**ç¤ºä¾‹ï¼š**
```
/code-cache search "Generate a quarterly revenue report"
/code-cache search "Fetch GitHub trending repos" --top-k 3 --show-code
```

### è·å–ä»»åŠ¡æ‰€éœ€çš„ä»£ç æ–‡ä»¶

```
/code-cache files <task description> [--top-k N] [--cache-dir DIR]
```

æ£€ç´¢å¯ç”¨äºæ‰§è¡Œçš„ä»£ç æ–‡ä»¶ï¼Œå¹¶ä¸ºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æä¾›é¢„æ ¼å¼åŒ–çš„æç¤ºã€‚

**é€‰é¡¹ï¼š**
- `--top-k N` â€” æœ€å¤šè¿”å›æ–‡ä»¶æ•°é‡ï¼ˆé»˜è®¤å€¼ï¼š5ï¼‰
- `--cache-dir DIR` â€” è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤å€¼ï¼š`.code_cache`ï¼‰

**ç¤ºä¾‹ï¼š**
```
/code-cache files "Fetch GitHub trending repos"
/code-cache files "Build a chart" --cache-dir ./cached_code
```

### å°†ä»£ç ä¸Šä¼ åˆ°ç¼“å­˜

```
/code-cache upload <task> --files <path> [<path>...] [--failed] [--no-auto-vote]
```

å°†æ‰§è¡Œåçš„ä»£ç ä¸Šä¼ åˆ°ç¼“å­˜ä¸­ï¼Œä»¥ä¾¿å°†æ¥é‡å¤ä½¿ç”¨ã€‚

**é€‰é¡¹ï¼š**
- `--files, -f` â€” éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼ˆå¿…é€‰ï¼Œå¯æŒ‡å®šå¤šä¸ªæ–‡ä»¶ï¼‰
- `--failed` â€” å°†æ‰§è¡Œç»“æœæ ‡è®°ä¸ºå¤±è´¥ï¼ˆé»˜è®¤å€¼ï¼šæˆåŠŸï¼‰
- `--no-auto-vote` â€” ç¦ç”¨å¯¹å­˜å‚¨ä»£ç ç‰‡æ®µçš„è‡ªåŠ¨è¯„åˆ†

**ç¤ºä¾‹ï¼š**
```
/code-cache upload "Build a chart" --files chart.py
/code-cache upload "Data pipeline" -f extract.py transform.py load.py
/code-cache upload "Failed attempt" --files broken.py --failed
```

### å¯¹ç¼“å­˜çš„ä»£ç è¿›è¡Œè¯„åˆ†

```
/code-cache vote <code_block_id> [--up|--down] [--task TEXT] [--name TEXT] [--description TEXT]
```

å¯¹ç¼“å­˜çš„ä»£ç è¿›è¡Œè¯„åˆ†ï¼Œä»¥è¯„ä¼°å…¶å®ç”¨æ€§ã€‚è¿™æœ‰åŠ©äºæå‡ä»£ç çš„æ£€ç´¢è´¨é‡ã€‚

**é€‰é¡¹ï¼š**
- `--up` â€” ç‚¹èµï¼ˆé»˜è®¤å€¼ï¼‰
- `--down` â€” ç‚¹è¸©
- `--task` â€” åŸå§‹ä»»åŠ¡æè¿°ï¼ˆå¯é€‰ï¼‰
- `--name` â€” ä»£ç ç‰‡æ®µåç§°ï¼ˆå¯é€‰ï¼‰
- `--description` â€” ä»£ç ç‰‡æ®µæè¿°ï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹ï¼š**
```
/code-cache vote abc123 --up
/code-cache vote xyz789 --down --task "Generate report"
```

## å·¥ä½œåŸç†

1. **ç¼“å­˜å‘½ä¸­**ï¼šå½“æ‚¨è¯·æ±‚ä¸ä¹‹å‰æ‰§è¡Œè¿‡çš„ä»£ç ç›¸ä¼¼çš„ä»£ç æ—¶ï¼Œä»£ç ç¼“å­˜ç³»ç»Ÿä¼šç«‹å³è¿”å›å·²ç¼“å­˜çš„ç‰ˆæœ¬ã€‚
2. **ç¼“å­˜æœªå‘½ä¸­**ï¼šå¦‚æœæ²¡æœ‰åŒ¹é…é¡¹ï¼Œä»£ç†ä¼šæ­£å¸¸ç”Ÿæˆä»£ç ï¼Œç„¶åä»£ç ç¼“å­˜ç³»ç»Ÿä¼šå°†å…¶å­˜å‚¨èµ·æ¥ä»¥ä¾›å°†æ¥ä½¿ç”¨ã€‚
3. **è¯„åˆ†æœºåˆ¶**ï¼šæˆåŠŸçš„ä»£ç ä¼šè·å¾— ğŸ‘ï¼Œå¤±è´¥çš„ä»£ç ä¼šè·å¾— ğŸ‘â€”â€”éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ£€ç´¢æ•ˆæœä¼šé€æ¸æå‡ã€‚

## API å‚è€ƒ

è¯¥æŠ€èƒ½ä½¿ç”¨äº†ä»¥ä¸‹ Raysurfer API æ–¹æ³•ï¼š

| æ–¹æ³•          | æè¿°                                      |
|---------------|-------------------------------------------|
| `search(task, top_k, min_verdict_score)` | ç»Ÿä¸€æœç´¢ç¼“å­˜çš„ä»£ç ç‰‡æ®µ                         |
| `get_code_files(task, top_k, cache_dir)` | è·å–å¯ç”¨äºæ²™ç®±æ‰§è¡Œçš„ä»£ç æ–‡ä»¶                         |
| `upload_new_code_snips(task, files_written, succeeded, auto_vote)` | åœ¨æ‰§è¡Œåå­˜å‚¨æ–°çš„ä»£ç ç‰‡æ®µ                         |
| `vote_code_snip(task, code_block_id, code_block_name, code_block_description, succeeded)` | å¯¹ä»£ç ç‰‡æ®µçš„å®ç”¨æ€§è¿›è¡Œè¯„åˆ†                         |

## ä¸ºä»€ä¹ˆéœ€è¦ä»£ç ç¼“å­˜ï¼Ÿ

å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä»£ç†ç»å¸¸é‡å¤æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚é€šè¿‡ä½¿ç”¨ä»£ç ç¼“å­˜ï¼Œå¯ä»¥é¿å…æ¯æ¬¡éƒ½é‡æ–°ç”Ÿæˆä»£ç ï¼š

- **é€Ÿåº¦æå‡ 30 å€**ï¼šç›´æ¥ä½¿ç”¨å·²éªŒè¯è¿‡çš„ä»£ç ï¼Œæ— éœ€ç­‰å¾…ä»£ç ç”Ÿæˆã€‚
- **é™ä½æˆæœ¬**ï¼šé€šè¿‡é‡ç”¨ç¼“å­˜ä»£ç ï¼Œå‡å°‘ä»¤ç‰Œçš„ä½¿ç”¨ã€‚
- **ä»£ç è´¨é‡æ›´é«˜**ï¼šç¼“å­˜ä»£ç å·²ç»è¿‡éªŒè¯å’Œè¯„åˆ†ã€‚
- **è¾“å‡ºç»“æœä¸€è‡´**ï¼šç›¸åŒçš„ä»»åŠ¡æ€»æ˜¯å¾—åˆ°ç›¸åŒçš„è§£å†³æ–¹æ¡ˆã€‚

æ›´å¤šä¿¡æ¯è¯·è®¿é—® [raysurfer.com](https://raysurfer.com) æˆ–é˜…è¯» [å®˜æ–¹æ–‡æ¡£](https://docs.raysurfer.com)ã€‚