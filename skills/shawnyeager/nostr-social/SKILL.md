---
name: Nostr
description: ä½ çš„æ™ºèƒ½åŠ©æ‰‹éœ€è¦ä¸€ä¸ªâ€œç¤¾äº¤ç”Ÿæ´»â€ï¼ˆå³èƒ½å¤Ÿä¸å…¶ä»–æ™ºèƒ½åŠ©æ‰‹æˆ–ç³»ç»Ÿè¿›è¡Œäº’åŠ¨çš„èƒ½åŠ›ï¼‰ã€‚è¿™ä¸ªæŠ€èƒ½ä¼šä¸ºä½ çš„æ™ºèƒ½åŠ©æ‰‹æä¾›ä¸€ä¸ªç‹¬ç«‹çš„èº«ä»½ï¼ˆNostrï¼‰ä»¥åŠä¸€ä¸ªç”µå­ç°é‡‘é’±åŒ…ã€‚æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šé€šè¿‡ä¸€ä¸ªåŠ©è®°ç¬¦ï¼ˆNIP-06ï¼‰è¿›è¡Œå¤‡ä»½ã€‚è¿™ä¸ªé’±åŒ…å’Œèº«ä»½å±äºä½ çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œå®ƒæ‹¥æœ‰è‡ªå·±çš„ç§é’¥å’ŒåŠ å¯†è´§å¸ï¼ˆsatoshisï¼‰ï¼Œå¹¶ä¸”å¯ä»¥ä»¥è‡ªå·±çš„åä¹‰å‘å¸ƒå†…å®¹ã€‚åªéœ€å®‰è£…ä¸€æ¬¡ï¼Œå³å¯è‡ªåŠ¨å®Œæˆé…ç½®ï¼Œæ— éœ€ä»»ä½•ç¬¬ä¸‰æ–¹æœåŠ¡ã€‚
tags: nostr, bitcoin, lightning, cashu, identity, social, wallet
---
# Nostr æŠ€èƒ½

è¿™æ˜¯ä¸€ä¸ªå…·æœ‰è‡ªä¸»èº«ä»½ç®¡ç†åŠŸèƒ½çš„ Nostr å·¥å…·ï¼ŒåŒæ—¶æ”¯æŒ ecash é’±åŒ…çš„åˆ›å»ºä¸ä½¿ç”¨ã€‚è¯¥æŠ€èƒ½å·²å®Œæˆå…¨éƒ¨åˆå§‹åŒ–è®¾ç½®ã€‚

## åŠŸèƒ½è¯´æ˜

è¯¥æŠ€èƒ½ä¸ºä»£ç†ç¨‹åºæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

- **å¯†é’¥ç”Ÿæˆ**ï¼šåœ¨ `~/.nostr/secret.key` æ–‡ä»¶ä¸­ç”Ÿæˆ Nostr å¯†é’¥å¯¹ã€‚
- **é’±åŒ…åˆ›å»º**ï¼šåœ¨ `~/.cocod/` æ–‡ä»¶ä¸­åˆ›å»º Cashu é’±åŒ…ï¼ˆé’±åŒ…çš„åŠ©è®°è¯å­˜å‚¨åœ¨ `config.json` æ–‡ä»¶ä¸­ï¼Œç”¨æˆ·éœ€è¦è‡ªè¡Œå¤‡ä»½ï¼‰ã€‚
- **å†…å®¹å‘å¸ƒ**ï¼šä»£ç†ç¨‹åºå¯ä»¥ä»¥è‡ªå·±çš„èº«ä»½å‘å¸ƒæ¶ˆæ¯ã€å‘é€ç§ä¿¡ï¼ˆDMï¼‰æˆ–æ‰§è¡Œå¿«é€Ÿè½¬è´¦ï¼ˆzapï¼‰æ“ä½œã€‚

ä»£ç†ç¨‹åºåœ¨è·å¾—ç”¨æˆ·æ˜ç¡®åŒæ„åæ‰§è¡Œé’±åŒ…åŠèº«ä»½çš„è®¾ç½®æµç¨‹ã€‚ç³»ç»Ÿä¼šæç¤ºç”¨æˆ·å¤‡ä»½ `~/.cocod/config.json` æ–‡ä»¶ï¼ˆå…¶ä¸­åŒ…å«åŠ©è®°è¯ï¼‰ï¼Œä½†ä»£ç†ç¨‹åºä¸ä¼šæ˜¾ç¤ºæˆ–ä¼ è¾“è¯¥åŠ©è®°è¯ã€‚ä»£ç†ç¨‹åºä»…ä½¿ç”¨ URL æ¥åŠ è½½ç”¨æˆ·å¤´åƒï¼ˆä¸è®¿é—®æœ¬åœ°æ–‡ä»¶ï¼‰ã€‚

## å®‰è£…æµç¨‹

å½“ç”¨æˆ·å®‰è£…è¯¥æŠ€èƒ½ï¼ˆé€šè¿‡ç²˜è´´ ClawHub é“¾æ¥ï¼‰åï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

### ç¬¬ä¸€æ­¥ï¼šå®‰å…¨è®¾ç½®ï¼ˆéœ€ç”¨æˆ·åŒæ„ï¼‰

**å®‰å…¨æç¤ºï¼š** è¯¥æŠ€èƒ½ä¼šä¸ºä»£ç†ç¨‹åºç”ŸæˆåŠ å¯†å¯†é’¥ã€‚å…·ä½“æ“ä½œåŒ…æ‹¬ï¼š
- åœ¨ `~/.nostr/secret.key` æ–‡ä»¶ä¸­åˆ›å»º Nostr å¯†é’¥å¯¹ã€‚
- åœ¨ `~/.cocod/config.json` æ–‡ä»¶ä¸­åˆ›å»º Cashu é’±åŒ…ï¼Œå¹¶è®¾ç½®å¤‡ä»½ç§å­çŸ­è¯­ã€‚
- ç”¨æˆ·å¿…é¡»è‡ªè¡Œå¤‡ä»½è¯¥åŠ©è®°è¯çŸ­è¯­ã€‚

```bash
# Install dependencies
bash {SKILL_DIR}/install.sh

# Prompt user for consent before key generation
echo "âš ï¸  SECURITY: This will create cryptographic keys for your agent."
echo "   - Nostr identity keypair: ~/.nostr/secret.key"  
echo "   - Cashu wallet seed: ~/.cocod/config.json"
echo "   - You MUST backup your seed phrase"
echo ""
read -p "Continue with key generation? (yes/no): " consent
if [ "$consent" != "yes" ]; then
  echo "Setup cancelled"
  exit 1
fi

# Create wallet (mnemonic saved to config file)
npx cocod init

# Derive Nostr identity from wallet mnemonic (NIP-06)
node {SKILL_DIR}/scripts/nostr.js init

# Get identity info
NPUB=$(node {SKILL_DIR}/scripts/nostr.js whoami | grep npub | awk '{print $2}')
LN_ADDR=$(npx cocod npc address)

# Set basic profile
node {SKILL_DIR}/scripts/nostr.js profile-set '{"name":"<NAME>","about":"<ABOUT>","lud16":"'$LN_ADDR'"}'
```

### ç¬¬äºŒæ­¥ï¼šé€šçŸ¥ç»“æœåŠå¤‡ä»½æé†’

å›å¤ç”¨æˆ·ï¼š

---

âš¡ **Nostr èº«ä»½å·²è®¾ç½®å®Œæˆï¼**

**å…¬é’¥ï¼ˆnpubï¼‰ï¼š** `npub1...`
**Lightning åœ°å€ï¼š** `npub1...@npubx.cash`

---

âš ï¸ **é‡è¦æç¤ºï¼šè¯·åŠ¡å¿…å¤‡ä»½æ‚¨çš„åŠ©è®°è¯çŸ­è¯­ï¼**

æ‚¨çš„ 24 ä¸ªå•è¯åŠ©è®°è¯ç”¨äºæ¢å¤æ‚¨çš„ Nostr èº«ä»½å’Œ ecash é’±åŒ…ä¿¡æ¯ã€‚è¯·å¦¥å–„ä¿ç®¡è¯¥æ–‡ä»¶ã€‚

å¤‡ä»½å®Œæˆåï¼Œè¯·å›å¤ â€œdoneâ€ã€‚

---

### ç¬¬ä¸‰æ­¥ï¼šç­‰å¾…ç”¨æˆ·ç¡®è®¤å¤‡ä»½å®Œæˆ

åœ¨ç”¨æˆ·ç¡®è®¤å¤‡ä»½å®Œæˆä¹‹å‰ï¼Œè¯·å‹¿ç»§ç»­ä¸‹ä¸€æ­¥æ“ä½œã€‚

### ç¬¬å››æ­¥ï¼šè¯¢é—®ç”¨æˆ·çš„ Nostr å…¬é’¥ï¼ˆnpubï¼‰

---

**æ‚¨çš„ Nostr å…¬é’¥ï¼ˆnpubï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ**

æˆ‘éœ€è¦è¯¥å…¬é’¥ä»¥ä¾¿ä¸æ‚¨ä¿æŒè”ç³»ã€‚

ï¼ˆè¯·ç²˜è´´æ‚¨çš„ npub1... æˆ–ç±»ä¼¼ `your@domain.com` çš„æ ¼å¼ï¼‰

---

### ç¬¬äº”æ­¥ï¼šè¯·æ±‚ç”¨æˆ·æä¾›å¤´åƒ

---

**æ‚¨æœ‰å¤´åƒæ–‡ä»¶å—ï¼Ÿ**

- **å¤´åƒï¼ˆæ¨èå°ºå¯¸ï¼š400x400 åƒç´ ï¼‰**ï¼šè¯·ç²˜è´´å¤´åƒçš„ URLã€‚
- **æ¨ªå¹…ï¼ˆæ¨èå°ºå¯¸ï¼š1500x500 åƒç´ ï¼‰**ï¼šè¯·ç²˜è´´æ¨ªå¹…çš„ URLã€‚
- æˆ–è€…é€‰æ‹© â€œskipâ€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆå¤´åƒã€‚

---

- å¦‚æœç”¨æˆ·æä¾›äº†å¤´åƒæ–‡ä»¶ï¼š
```bash
node {SKILL_DIR}/scripts/nostr.js profile-set '{"picture":"<avatar_url>","banner":"<banner_url>"}'
```

- å¦‚æœç”¨æˆ·é€‰æ‹©è·³è¿‡æ­¤æ­¥éª¤ï¼Œç³»ç»Ÿå°†ä½¿ç”¨ DiceBear æœåŠ¡è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€çš„å¤´åƒï¼š
```bash
AVATAR="https://api.dicebear.com/7.x/shapes/png?seed=${NPUB}&size=400"
BANNER="https://api.dicebear.com/7.x/shapes/png?seed=${NPUB}-banner&size=1500x500"
node {SKILL_DIR}/scripts/nostr.js profile-set '{"picture":"'$AVATAR'","banner":"'$BANNER'"}'
```

### ç¬¬å…­æ­¥ï¼šé¦–æ¬¡å‘å¸ƒå†…å®¹

---

**å‡†å¤‡å¥½å‘å¸ƒç¬¬ä¸€æ¡æ¶ˆæ¯äº†å—ï¼Ÿ**

è¯·å‘Šè¯‰æˆ‘æ‚¨æƒ³å‘å¸ƒçš„å†…å®¹ï¼Œæˆ–è€…é€‰æ‹© â€œskipâ€ã€‚

å»ºè®®å†…å®¹ç¤ºä¾‹ï¼š**â€œHello Nostr! âš¡â€**

---

- å¦‚æœç”¨æˆ·æä¾›äº†æ–‡æœ¬å†…å®¹ï¼ˆä¸ºé¿å… shell æ³¨å…¥é£é™©ï¼Œå†…å®¹å°†é€šè¿‡æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰æ¥æ”¶ï¼‰ï¼š
```bash
echo "<user's message>" | node {SKILL_DIR}/scripts/nostr.js post -
```

### ç¬¬ä¸ƒæ­¥ï¼šè®¾ç½®å®Œæˆ

---

âœ… **æ‰€æœ‰è®¾ç½®å·²å®Œæˆï¼**
- ç³»ç»Ÿå·²å¼€å§‹å…³æ³¨æ‚¨ âœ“
- é¦–æ¡æ¶ˆæ¯å·²æˆåŠŸå‘å¸ƒ âœ“ï¼ˆå¦‚æœç”¨æˆ·æœªé€‰æ‹©è·³è¿‡æ­¤æ­¥éª¤ï¼‰

æ‚¨å¯ä»¥å°è¯•è¾“å…¥ â€œcheck my mentionsâ€ æˆ– â€œpost <message>â€ æ¥æŸ¥çœ‹æˆ–å‘é€æ¶ˆæ¯ã€‚

---

## å‘½ä»¤å‚è€ƒ

- **å‘å¸ƒå†…å®¹**ï¼š```bash
# Use stdin for content (prevents shell injection)
echo "message" | node {SKILL_DIR}/scripts/nostr.js post -
echo "reply text" | node {SKILL_DIR}/scripts/nostr.js reply <note1...> -
node {SKILL_DIR}/scripts/nostr.js react <note1...> ğŸ”¥
node {SKILL_DIR}/scripts/nostr.js repost <note1...>
node {SKILL_DIR}/scripts/nostr.js delete <note1...>
```
- **è¯»å–å†…å®¹**ï¼š```bash
node {SKILL_DIR}/scripts/nostr.js mentions 20
node {SKILL_DIR}/scripts/nostr.js feed 20
```
- **å»ºç«‹è¿æ¥**ï¼š```bash
node {SKILL_DIR}/scripts/nostr.js follow <npub>
node {SKILL_DIR}/scripts/nostr.js unfollow <npub>
node {SKILL_DIR}/scripts/nostr.js mute <npub>
node {SKILL_DIR}/scripts/nostr.js unmute <npub>
node {SKILL_DIR}/scripts/nostr.js lookup <nip05>
```
- **å‘é€ç§ä¿¡ï¼ˆDMï¼‰**ï¼š```bash
echo "message" | node {SKILL_DIR}/scripts/nostr.js dm <npub> -
node {SKILL_DIR}/scripts/nostr.js dms 10
```
- **æ‰§è¡Œå¿«é€Ÿè½¬è´¦ï¼ˆzapï¼‰**ï¼š```bash
# Get invoice
node {SKILL_DIR}/scripts/nostr.js zap <npub> 100 "comment"
# Pay it
npx cocod send bolt11 <invoice>
```
- **ç®¡ç†é’±åŒ…**ï¼š```bash
npx cocod balance
npx cocod receive bolt11 1000    # Create invoice
npx cocod send bolt11 <invoice>  # Pay invoice
npx cocod npc address            # Lightning address
```
- **æŸ¥çœ‹ä¸ªäººèµ„æ–™**ï¼š```bash
node {SKILL_DIR}/scripts/nostr.js whoami
node {SKILL_DIR}/scripts/nostr.js profile
node {SKILL_DIR}/scripts/nostr.js profile "Name" "Bio"
node {SKILL_DIR}/scripts/nostr.js profile-set '{"name":"X","picture":"URL","lud16":"addr"}'
```
- **æ·»åŠ ä¹¦ç­¾**ï¼š```bash
node {SKILL_DIR}/scripts/nostr.js bookmark <note1...>
node {SKILL_DIR}/scripts/nostr.js unbookmark <note1...>
node {SKILL_DIR}/scripts/nostr.js bookmarks
```
- **ä¸­ç»§åŠŸèƒ½**ï¼š```bash
node {SKILL_DIR}/scripts/nostr.js relays
node {SKILL_DIR}/scripts/nostr.js relays add <url>
node {SKILL_DIR}/scripts/nostr.js relays remove <url>
```
- **è‡ªåŠ¨å›å¤åŠŸèƒ½ï¼ˆé›†æˆ Heartbeatï¼‰**ï¼š```bash
# Get unprocessed mentions from WoT (JSON output)
node {SKILL_DIR}/scripts/nostr.js pending-mentions [stateFile] [limit]

# Mark mention as responded (after replying)
node {SKILL_DIR}/scripts/nostr.js mark-responded <note1...> [responseNoteId]

# Mark mention as ignored (no response needed)
node {SKILL_DIR}/scripts/nostr.js mark-ignored <note1...> [reason]

# Check hourly rate limit (max 10/hr)
node {SKILL_DIR}/scripts/nostr.js rate-limit

# Show autoresponse state summary
node {SKILL_DIR}/scripts/nostr.js autoresponse-status
```

**çŠ¶æ€æ–‡ä»¶ï¼š** `~/.openclaw/workspace/memory/nostr-autoresponse-state.json`
**WoTï¼ˆWeb of Trustï¼‰æ¥æºåœ°å€**ï¼šç”±ç”¨æˆ·çš„ Nostr.js æ–‡ä»¶ä¸­çš„ `OWNER_PUBKEY` å˜é‡å®šä¹‰ã€‚

## ç”¨æˆ·æŒ‡ä»¤ä¸å¯¹åº”æ“ä½œ

| ç”¨æˆ·æŒ‡ä»¤ | åŠ¨ä½œ |
|-----------|--------|
| â€œpost Xâ€     | `echo "X" \| nostr.js post -`         |
| â€œå›å¤ X ä¸º Yâ€   | `echo "Y" \| nostr.js reply <note> -`      |
| â€œæŸ¥çœ‹æåŠå†…å®¹â€ | `nostr.js mentions`         |
| â€œæŸ¥çœ‹æˆ‘çš„åŠ¨æ€â€ | `nostr.js feed`         |
| â€œå…³æ³¨ Xâ€     | `nostr.js follow`           |
| â€œç»™ X å‘é€ç§ä¿¡â€ | `echo "message" \| nostr.js dm <npub> -`     |
| â€œå‘ X è½¬è´¦ 100 satsâ€ | `nostr.js zap` â†’ `npx cocod send bolt11`   |
| â€œæŸ¥çœ‹ä½™é¢â€    | `npx cocod balance`         |
| â€œè¯·æ±‚ 1000 å•ä½è´§å¸â€ | `npx cocod receive bolt11 1000`     |
| â€œæŸ¥çœ‹æˆ‘çš„å…¬é’¥â€   | `nostr.js whoami`         |
| â€œæŸ¥çœ‹æˆ‘çš„ Lightning åœ°å€â€ | `npx cocod npc address`      |

## é»˜è®¤è®¾ç½®

| è®¾ç½®é¡¹          | é»˜è®¤å€¼            |
|----------------|----------------------|
| æŒ–çŸ¿åœ°å€ï¼ˆMintï¼‰     | `https://mint.minibits.cash/Bitcoin`     |
| Lightning åŸŸå       | `@npubx.cash`            |
| å¤´åƒå¤‡ç”¨é“¾æ¥       | `https://api.dicebear.com/7.x/shapes/png?seed=<npub>` |
| Nostr å¯†é’¥æ–‡ä»¶     | `~/.nostr/secret.key`         |
| é’±åŒ…æ•°æ®æ–‡ä»¶     | `~/.cocod/`            |

## é›†æˆè¯´æ˜

- **SOUL.md**ï¼šä» SOUL.md æˆ– IDENTITY.md æ–‡ä»¶ä¸­è·å–ç”¨æˆ·ä¿¡æ¯ã€‚
- æ ¹æ®ç”¨æˆ·ä¿¡æ¯è°ƒæ•´å‘å¸ƒå†…å®¹çš„é£æ ¼å’Œè¯­æ°”ï¼Œç¡®ä¿å†…å®¹ç¬¦åˆä»£ç†ç¨‹åºçš„ä¸ªæ€§ã€‚
- å‘å¸ƒå†…å®¹åº”ä½“ç°ä»£ç†ç¨‹åºçš„ç‹¬ç‰¹é£æ ¼ã€‚

- **Heartbeat.md**ï¼šå°†ç›¸å…³åŠŸèƒ½åŠ å…¥ Heartbeat è½®æ¢æœºåˆ¶ï¼ˆæ¯ 2-4 å°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼š
  - å¦‚æœæ”¶åˆ°æ¥è‡ª WoT æˆ–å…¶ä»–ç³»ç»Ÿçš„æåŠæ¶ˆæ¯/å¿«é€Ÿè½¬è´¦è¯·æ±‚ï¼Œç³»ç»Ÿä¼šé€šçŸ¥ç”¨æˆ·ã€‚

- **TOOLS.md**ï¼šå®‰è£…å®Œæˆåï¼Œå°†ç›¸å…³é…ç½®æ–‡ä»¶ä¿å­˜ä»¥ä¾›å¿«é€ŸæŸ¥é˜…ï¼š
  ```markdown
## Nostr
- npub: npub1...
- Lightning: npub1...@npubx.cash  
- Owner: npub1... (followed)
```

## ç”¨æˆ·èµ„æ–™æ¥æº

- **å§“å**ï¼šæ¥è‡ª IDENTITY.md æˆ– SOUL.md æ–‡ä»¶ã€‚
- **ç®€ä»‹**ï¼šæ¥è‡ª SOUL.md æ–‡ä»¶çš„æè¿°ä¿¡æ¯ã€‚
- **å¤´åƒ**ï¼šç”¨æˆ·æä¾›çš„ URLï¼Œæˆ–ä½¿ç”¨ DiceBear æœåŠ¡ç”Ÿæˆçš„é»˜è®¤å¤´åƒã€‚
- **æ¨ªå¹…**ï¼šç”¨æˆ·æä¾›çš„ URLï¼Œæˆ–ä½¿ç”¨ DiceBear æœåŠ¡ç”Ÿæˆçš„é»˜è®¤æ¨ªå¹…ã€‚
- **å…¶ä»–ä¿¡æ¯ï¼ˆå¦‚ lud16ï¼‰**ï¼šæ¥è‡ª `npx cocod npc address` çš„æ•°æ®ã€‚