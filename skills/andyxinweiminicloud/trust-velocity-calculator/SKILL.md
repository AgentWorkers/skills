---
name: trust-velocity-calculator
description: 该工具通过结合自上次验证以来经过的时间，以及行为、权限或依赖关系的变化率，来计算对某项技能或代理的信任度下降的速度。由此生成的“信任速度得分”可以预测某个受信任的凭证何时会变得不可靠。
version: 1.0.0
metadata:
  openclaw:
    requires:
      bins: [curl, python3]
      env: []
    emoji: "📉"
---
# 信任不会简单地随时间衰减；当环境发生变化时，信任的衰减速度会加快。

> 该工具通过同时衡量经过的时间以及技能行为、权限和依赖关系的变化速率，帮助识别某个受信任的技能或代理的可靠性下降速度是否超出了自然时间进程的预期。

## 问题

18个月前的验证徽章所代表的信任度，显然低于3个月前的徽章。然而，不太直观的是：一个在过去4周内经历了8次更新的技能，其6个月前的徽章所代表的信任度，反而低于一个12个月前从未发生任何变化的技能的徽章。

信任的衰减并非与时间呈线性关系；它会随着变化速度的增加而加速。频繁更新的技能要么是在得到积极维护（这是好事），要么是在被主动修改以适应新的需求（这可能是不好的迹象）。更新频率是影响信任度衰减的重要因素——更新速度越快，不确定性就越大。一个更新频繁但审计徽章过时的技能，比一个更新频率低但审计徽章仍然有效的技能更不可靠，因为前者有更多的代码部分发生了变化而未经过重新验证。

现有的信任模型将验证结果视为二元的、与时间无关的（要么已验证，要么未验证），只是隐含着“越旧的风险越大”的概念。而“信任速度”模型则将信任度的衰减过程量化为：**信任度 = 基线信任度 × 时间衰减因子 × (1 - 变化速度惩罚系数)**。

## 该工具的功能

该计算器从五个维度评估信任度的衰减速度：

1. **时间衰减因子**：自上次验证以来，经过的时间对信任度基线造成了多大的影响？支持配置不同的衰减曲线（线性、指数型或阶梯函数，具体取决于验证类型）。
2. **变化速度倍数**：自上次验证以来，每单位时间内发生了多少具有实际意义的变化（权限扩展、新端点的添加、依赖关系的更新、指令的变更等）？变化速度越快，信任度衰减得越快。
3. **波动性指标**：当前的更新频率是高于还是低于该技能的历史基线？突然的变化速度提升比持续的高更新速度对信任度的负面影响更大。
4. **验证覆盖范围滞后**：上次验证时，该技能的哪些部分得到了覆盖？如果自审计以来有40%的代码发生了变化，那么当前的验证结果只能覆盖60%的运行代码。
5. **综合信任度评分**：结合以上四个因素得出的综合评分，以及预测该技能的信任度何时会降至可配置的阈值以下（例如：“以当前的速度，信任度将在23天内降至60%以下”）。

## 使用方法

**输入**：
- 提供一个技能的标识符及其最后一次验证的日期和版本历史记录；
- 提供一个包含信任度衰减参数的对象（基线信任度、验证日期、更新历史记录）；
- 提供两个需要比较的技能，以评估它们的相对信任度衰减速度。

**输出**：
- 包含以下内容的信任度衰减速度报告：
  - 基于时间和变化速度计算出的当前信任度评分（0-100分）；
  - 带有文字说明的衰减曲线可视化结果；
  - 30天、60天、90天后的预测信任度评分；
  - 按类别划分的变化速度详细信息；
  - 信任度阈值触达的预警日期；
  - 重新验证的紧迫性建议（立即重新验证、定期监控、尽快审查或立即重新验证）。

## 示例

**输入**：计算 `workflow-optimizer` 技能的信任度衰减速度：

```plaintext
📉 信任度衰减速度报告

技能：workflow-optimizer
最后一次验证时间：2024-09-15（213天前）
验证方式：发布者签名 + 市场平台审核
验证时的基线信任度：85/100

时间衰减（213天，指数衰减曲线）：
  仅因时间流逝导致的信任度下降：26%（原始信任度为85/100）
  经过时间调整后的信任度：63/100

变化速度分析：
  自验证以来的更新次数：14次
  历史平均更新频率：每月0.8次
  近90天的实际更新频率：每月4.7次
  变化速度：是历史平均值的5.9倍 → 高波动性

14次更新中的变化类型：
  权限扩展：2次（读取范围扩大）
  新的出站端点：1个（analytics.external-domain.example）
  依赖关系重大变更：3次
  指令变更：41/100（中等程度）

变化速度带来的额外衰减：31%（变化速度导致的额外信任度下降）

综合信任度评分：43/100
  （63 × (1 - 0.31) = 43）

验证覆盖范围滞后：
  自审计以来，有约62%的代码发生了变化
  当前审计仅覆盖了约38%的运行代码

预测结果：
  当前信任度：43/100
  30天后：37/100
  60天后：31/100
  信任度阈值（50/100）：已在41天前被突破

重新验证建议：立即重新验证
  该技能的当前信任度为43/100，其中62%的代码部分未在最后一次审计时得到验证。以当前的变化速度，每周未验证的代码部分会增加约4.5%。

建议措施：
  1. 立即行动：审核权限扩展和新添加的出站端点；
  2. 短期措施：根据当前状态重新验证该技能（而非2024-09-15时的状态）；
  3. 长期措施：设置自动重新验证的触发条件（当变化速度超过3倍时自动触发重新验证）。
```

## 相关工具

- **trust-decay-monitor**：跟踪基于时间的信任度新鲜度；
- **trust-velocity-calculator**：结合变化速度来计算信任度的衰减速度；
- **skill-update-delta-monitor**：识别更新内容中的变化；
- **attestation-chain-auditor**：验证验证链的完整性；
- **blast-radius-estimator**：估计影响范围，并结合信任度衰减速度来确定哪些低信任度的技能需要优先审查。

## 限制

信任度衰减速度模型仅是一种预测工具，并不能直接证明技能存在安全风险。高变化速度仅表示信任度下降得更快，并不意味着该技能具有恶意。许多合法的技能会频繁更新，但并不会因此变得不安全。衰减曲线参数（线性或指数型）是可配置的，应根据您所在环境的风险容忍度进行调整。某些技能可能通过频繁发布小版本来掩盖实际的变化（例如许多微小的代码调整），从而在模型中显示出过高的变化速度，但实际上并无风险。此外，验证覆盖范围的估计值是近似的——它假设变化的代码部分与实际受影响的代码面积成正比，但这并不适用于所有情况。