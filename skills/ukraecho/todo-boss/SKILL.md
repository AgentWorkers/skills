# todo-boss

## 功能
用于在 Telegram 中捕获任务、跟踪任务分配情况以及生成每日剩余工作量报告。
无需浏览网页、进行网络搜索或使用外部查询工具。

## 数据存储
- 只读日志文件：`~/.openclaw/workspace/data/todo/tasks.jsonl`
- 衍生状态缓存（可选）：`~/.openclaw/workspace/data/todo/state.json`

## 命令（通过 Telegram 发送）
- `/todo <文本>`：根据输入的文本创建任务草稿
- `/todo_done <id>`：标记任务为已完成
- `/todo_list`：列出所有未完成的任务（按所有者分组，再按截止日期排序）
- `/todo_delegated`：列出我分配给他人但尚未完成的任务（包含历史记录）
- `/todo_report`：生成每日报告（与 `/todo_list` 功能相同，但内容更简洁）

## 数据提取规则（非常重要）
当用户发送 `/todo <文本>` 时：
1. 提取以下信息：任务标题、所有者、截止日期（格式为 YYYY-MM-DD 或自然语言表达）、优先级（可选）以及备注。
2. 如果所有者或截止日期信息缺失或不明确：
   - 通过 Telegram 向用户询问补充信息。
   - 将任务状态设置为 “draft”，并记录缺失的字段。
   - 在所有者或截止日期信息确认之前，不要将任务状态设置为 “open”。
3. 如果所有者或截止日期信息齐全：
   - 将任务状态设置为 “open”。
4. 必须向用户回复确认信息，包括任务 ID、标题、所有者、截止日期和状态。

## 默认处理规则
- 如果所有者信息缺失：询问 “谁来负责这个任务？（请输入您的姓名或团队成员名称）”
- 如果截止日期信息缺失：询问 “任务的截止日期是什么时候？”
- 时区设置为 Asia/Seoul。

## 任务历史记录
任何任务状态的变更（创建、完成、更新等）都必须记录在 `tasks.jsonl` 文件中，记录内容包括时间戳、操作者（用户名称）以及任务的状态变化前后的详细信息。

## 硬性约束
- 禁止使用任何网页工具。
- 禁止请求 API 密钥。
- 回复信息应简洁明了，重点说明下一步操作。

## 执行流程
- 收到用户发送的 `/todo` 命令后，执行脚本 `~/.openclaw/workspace/skills/todo-boss/add_task.sh `<用户输入的完整文本>`。
- 将脚本的执行结果回复给用户。

## 后续处理规则（严格执行）
仅在下述两种情况询问用户：
1. “谁来负责这个任务？”
2. “任务的截止日期是什么时候？”

**注意**：不要询问任务的具体内容、背景信息、会议相关细节或电子邮件格式。本技能仅用于任务跟踪，不提供规划辅助功能。
如果用户请求规划建议或任务起草服务，可简要回复，但仍然需要询问所有者的信息及任务的截止日期。