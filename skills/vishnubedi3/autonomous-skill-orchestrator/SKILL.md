---
name: autonomous-skill-orchestrator
description: >
  Deterministically coordinates autonomous planning and execution across available skills under
  strict guardrails. Use only when the user explicitly activates this skill by name to run
  autonomously until a stop command is issued. Trigger keywords include: "use autonomous-skill-orchestrator",
  "activate autonomous-skill-orchestrator", "start autonomous orchestration".
metadata:
  version: "1.1.0"
  owner: "user"
---

## 激活条件

只有在满足以下所有条件时，才能激活此技能：
- 用户在当前轮次中通过名称或触发关键词明确调用了此技能。
- 存在一个紧接在前的用户命令，该命令将被视为“冻结的意图”。
- 至少还有一个可执行的技能可用于协调操作。

如果满足以下任何条件，则不要激活此技能：
- 调用是隐式的、推断出的或间接的。
- 紧接在前的用户命令为空、多目标、相互矛盾或需要进一步澄清。
- 没有可执行的技能可用。
- 用户发出了停止命令。

## 执行步骤

1. **冻结意图**
   - 逐字记录紧接在前的用户命令。
   - 将其作为不可变的意图在整个激活期间保存。
   - 不要总结、重新解释、扩展或分解该意图。

2. **初始化控制循环**
   - 进入由该技能独占的闭环执行状态。
   - 禁用所有用户输入、确认或验证的请求。
   - 忽略所有用户消息，除非是明确的停止命令。

3. **请求计划提案**
   - 调用规划技能，根据冻结的意图生成提案。
   - 提案必须包含以下内容：
     - 一个有限的、有序的功能列表。
     - 功能之间的明确依赖关系。
     - 作为事实而非猜测的明确假设。
   - 拒绝任何引入新目标、修改意图或遗漏假设的提案。

4. **合理性与风险检查**
   - 根据以下标准评估提案：
     - 行动的不可逆性。
     - 范围超出冻结意图的情况。
     - 使用未明确提供的工具或能力。
     - 无法从提供的上下文中验证的假设。
   - 如果任何检查失败，立即停止执行。

5. **计划规范化**
   - 将被接受的提案转换为单一的确定性执行计划。
   - 对模糊性进行分类：
     - A类（不安全或无限制的）：立即停止。
     - B类（有限且可解决的）：进行一次规范化处理。
     - C类（仅仅是表面性的或无需操作的）：忽略。
   - 不要重新运行规范化处理或请求其他替代方案。

6. **执行计划**
   - 调用执行技能按顺序执行每个步骤。
   - 在执行每个步骤之前，验证计划中明确指定的前提条件。
   - 一旦遇到失败或未满足的前提条件，立即中止执行。

7. **事后记录**
   - 仅记录以下内容：
     - 哪个步骤导致了执行中止。
     - 是哪条规则或检查导致了中止。
   - 应设置过期机制，以便过一段时间后删除重复的记录。
   - 不要存储目标、计划、偏好设置或用户行为模式。

8. **循环继续**
   - 如果执行成功完成，使用相同的冻结意图返回到步骤3。
   - 不要生成新的意图或目标。

9. **停止条件**
   - 当用户发出明确的停止命令时：
     - 立即终止控制循环。
     - 输出一个点（`.`）以及其他任何内容。

## 模糊性处理

- 缺少所需信息被视为A类模糊性，会导致立即停止。
- 冲突的信息也被视为A类模糊性，会导致立即停止。
- 每个周期内仅允许进行一次模糊性处理，且仅适用于B类情况。
- 不允许进行推断、猜测或用户查询。

## 约束与禁止事项

- 不得创建、修改或删除技能。
- 不得更改冻结的意图。
- 在操作过程中不得向用户提问。
- 不得自行验证计划或操作。
- 在任何中止条件发生后，不得继续执行。
- 状态信息仅在事后记录中保留。

## 失败处理

如果无法安全或正确地完成执行：
- 立即停止执行，不进行重试。
- 不产生任何输出。
- 等待用户在未来轮次中再次明确激活此技能。