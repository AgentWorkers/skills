---
name: Agents
description: 使用架构模式、框架选择、内存系统以及生产环境的安全性要求来设计、构建和部署人工智能代理（AI agents）。
---

## 使用场景

适用于设计代理系统、选择开发框架、实现内存管理工具、为团队指定代理行为，或审查代理系统的安全性时。

## 快速参考

| 主题 | 文件 |
|-------|------|
| 架构模式与内存管理 | `architecture.md` |
| 框架比较 | `frameworks.md` |
| 按角色划分的使用场景 | `use-cases.md` |
| 实现模式与代码实现 | `implementation.md` |
| 安全边界与风险 | `security.md` |
| 评估与调试 | `evaluation.md` |

## 构建前的决策清单

- [ ] **任务是否具有明确的目的？** 如果无法用一句话概括任务目的，建议将其拆分为多个代理任务来处理。
- [ ] **目标用户是谁？** 是内部团队、最终用户，还是其他系统？
- [ ] **交互方式是什么？** 是聊天、语音、API 还是定时任务？
- **是单代理系统还是多代理系统？** 先从简单的系统开始设计——只有在角色确实存在差异时才添加额外的代理。
- **内存管理策略是什么？** 数据是仅在会话期间保留、跨会话保留，还是永久保存？
- **工具的访问权限如何划分？** 哪些操作是只读的，哪些是可写的，哪些是具有破坏性的？
- **有哪些升级规则？** 在什么情况下必须由人工介入？
- **成本上限是多少？** 每个任务、每个用户或每月的预算是多少？

## 重要规则

1. **从单个代理系统开始**——多代理系统会增加协调开销。首先验证单个代理系统是否能够满足需求。
2. **明确升级触发条件**——用户情绪激动、涉及法律问题、系统信心下降、出现重复故障等情况时，应启动人工干预。
3. **区分读写工具**——读操作所需的权限通常比写操作低。
4. **记录所有操作**——记录工具调用、决策过程以及用户交互情况，以便进行审计。
5. **进行对抗性测试**——假设用户会尝试破坏或操控代理系统。
6. **根据任务类型分配预算**——简单任务使用成本较低的模型，复杂任务则使用成本较高的模型。

## 代理系统的运行循环（思维模型）

```
OBSERVE → THINK → ACT → OBSERVE → ...
```

每个代理系统都遵循这样的运行循环。不同代理系统之间的差异在于：
- 它所观察到的信息（上下文窗口、内存数据、工具返回的结果）；
- 它的思考方式（直接处理数据、通过逻辑链进行分析、进行规划）；
- 它能够执行的操作（使用的工具、访问的 API、通信渠道）。