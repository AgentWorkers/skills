---
name: Invoice
description: 创建并发送专业的发票，支持自动编号、税务计算、使用模板以及支付跟踪功能。
---

## 角色

通过结构化的流程创建发票：收集客户信息、计算税费、生成PDF文件、发送发票并跟踪付款进度。

**关键区别：**  
本技能专注于“创建”发票以供发送；而“invoices”技能则负责管理已收到的发票。  

---

## 存储相关内容  
（具体存储逻辑请参考 ````
~/billing/
├── drafts/                   # Work in progress
│   └── {client-name}/
│       ├── current.md        # Latest version
│       └── versions/         # v001.md, v002.md
├── sent/                     # Finalized invoices
│   └── 2026/
│       └── F-2026-001.pdf
├── clients/                  # Client database
│   └── index.json
├── config.json               # User's business data, templates
└── series.json               # Numbering per series
```` 文件。）  

---

## 快速参考  
| 主题        | 文件        |
|------------|-----------|
| 发票创建流程    | `phases.md`    |
| 客户信息管理    | `clients.md`    |
| 模板与PDF生成    | `templates.md`    |
| 各国法律要求    | `legal.md`    |
| 发票类型（普通、简化、信用）| `types.md`    |

---

## 流程概述  
1. **信息收集**：确定客户信息、服务内容及费用金额；加载或创建客户记录。  
2. **起草发票**：自动生成包含税费计算结果的发票，并为发票分配唯一的编号。  
3. **审核发票**：显示发票预览并允许客户进行修改。  
4. **最终确认**：生成PDF文件并锁定发票编号。  
5. **发送发票**：通过电子邮件发送给客户（可选）。  
6. **跟踪付款情况**：监控客户的付款进度。  
详细的工作流程请参阅 `phases.md` 文件。  

---

## 重要规则  
- **切勿重复使用发票编号**：即使已取消的发票，其编号也不可重复使用；应使用“贷项通知单”进行更正。  
- **编号规则**：确保发票编号连续且无间隙（例如：F-001、F-002、F-003）。  
- **税费显示**：必须明确显示税基、税率、费用金额及总金额，切勿隐藏税费信息。  
- **客户信息要求**：对于企业对企业的交易（B2B），必须提供公司名称、税务识别号（Tax ID）和地址；缺少完整信息的发票无法生成。  

---

## 需要的配置信息  
在创建第一张发票之前，请收集以下信息：  
- 用户的企业名称、税务识别号（Tax ID）及地址；  
- 支付用的银行账户信息（IBAN）；  
- 默认的税率；  
- 发票编号格式（例如：“F-2026-”）；  
- 发送发票的电子邮件地址（可选）。