---
name: Food Delivery
slug: food-delivery
version: 1.0.0
description: 根据已学习的偏好、价格比较以及多样性保护原则来选择和订购食物。
metadata: {"clawdbot":{"emoji":"🍕","requires":{"bins":[]},"os":["linux","darwin","win32"]}}
---
## 使用场景

用户希望他们的智能助手能够处理整个食物订购流程——从决定吃什么，到比较不同的选项，最后完成订单的提交。随着时间的推移，助手会逐渐了解用户的偏好，并做出越来越明智的选择。

## 架构

数据存储在 `~/food-delivery/` 目录下。具体设置请参考 `memory-template.md` 文件。

```
~/food-delivery/
├── memory.md          # Core preferences, restrictions, defaults
├── restaurants.md     # Restaurant ratings, dishes, notes
├── orders.md          # Recent orders for variety tracking
└── people.md          # Household/group member preferences
```

用户需要创建相关文件，这些文件的模板可以在 `memory-template.md` 中找到。

## 快速参考

| 主题 | 对应文件 |
|-------|------|
| 内存设置 | `memory-template.md` |
| 决策框架 | `decisions.md` |
| 订购流程 | `ordering.md` |
| 常见问题与解决方法 | `traps.md` |

## 数据存储

所有数据均保存在 `~/food-delivery/` 目录下。首次使用时需要手动创建相关文件：
```bash
mkdir -p ~/food-delivery
```

## 功能范围

本智能助手具备以下功能：
- 学习用户的饮食偏好和口味习惯
- 存储餐厅评分及菜品评价
- 比较不同配送平台的价格
- 查找当前的促销活动和优惠券
- 通过浏览器自动化功能完成订单
- 跟踪用户的近期订单记录以保持用餐多样性
- 管理家庭成员的个性化需求
- 协调多人订单的预订

用户需要提供以下信息：
- 配送应用程序的登录凭证（存储在用户的浏览器或应用程序中）
- 配送地址（在应用程序中设置）
- 支付方式（在应用程序中设置）

## 自我修改规则

本智能助手绝对不会自行修改其自身的 `SKILL.md` 文件。所有学习到的数据都会被保存在 `~/food-delivery/` 目录下的文件中。

## 核心规则

### 1. 明确记录用户偏好
| 用户的指令 | 保存位置 | 备注 |
|----------------|----------------|---------|
| “我是素食者” | `memory.md` | 限制：vegetarian |
| “我喜欢辛辣食物” | `memory.md` | 偏好：spice_level=high |
| “我对贝类过敏” | `memory.md` | 重要提示：始终过滤包含贝类的菜品 |
| “我不喜欢橄榄” | `memory.md` | 应避免的食材：olives |
| “预算约为20美元” | `memory.md` | 默认预算：$20 |
| “我通常在晚上7点左右订晚餐” | `memory.md` | 默认时间：19:00 |

### 2. 优先级排序规则
对于重要的饮食限制：
- 在每份订单中明确标注用户的过敏信息
- 确认餐厅是否能够满足这些限制
- 绝不建议用户尝试可能引起过敏的菜品

### 3. 决策流程
当用户提出订餐请求时，系统会按照以下步骤进行操作：

**步骤1：了解情境**
- 现在是什么时间？（早餐/午餐/晚餐）
- 是工作日还是周末？
- 用户是否有特殊的情绪或场合？
- 需要为多少人订餐？

**步骤2：筛选选项**
- 过滤掉任何违反重要饮食限制的菜品
- 过滤掉用户近期经常点的菜品（以避免重复）
- 过滤掉已经关闭的餐厅
- 检查订单是否符合用户的预算限制

**步骤3：比较选项**
- 在多个平台上查询同一餐厅的菜品信息
- 查找当前的促销活动和优惠券
- 计算总费用（包括食物价格、配送费和额外费用）

**步骤4：展示选项**
- 最多展示2-3个可选方案
- 为每个选项提供选择理由
- 如有必要，展示价格对比信息
- 根据用户的消费历史推荐最合适的选项

**步骤5：确认并下单**
- 获取用户的明确确认
- 通过浏览器完成订单
- 向用户确认订单的预计送达时间

### 4. 保持用餐多样性
在 `ordering.md` 文件中记录以下信息：
- 用户过去14天的订单记录（包括餐厅和菜品类型）

系统会在以下情况下提醒用户：
- 如果用户在7天内多次选择同一家餐厅的相同菜品 → “您经常选择[X]餐厅的菜品，是否想尝试其他菜品？”
- 如果用户在7天内多次点同一类型的菜品 → 建议尝试不同类别的菜品
- 如果用户超过2周没有尝试过某类菜品 → 建议尝试该类别的菜品

### 5. 价格优化
在下单前：
- 在用户使用的所有配送应用程序中查询该餐厅的价格
- 比较不同平台上的基础价格
- 检查是否有有效的优惠券或促销活动
- 考虑配送费和服务费用
- 向用户推荐相同菜品在最低价格平台上的购买方案
- 并告知用户：“在[平台X]上，同样的订单今天可以便宜4美元”

### 6. 多人订单处理
在为多人订餐时：
- 读取 `~/food-delivery/people.md` 文件中的用户偏好信息
- 收集新的饮食限制要求
- 找到适合所有人的共同菜品类别
- 推荐菜品种类丰富的餐厅
- 如有必要，计算合理的费用分摊方式

在没有达成一致意见时，系统会推荐以下受欢迎的菜品：
- 披萨（可根据个人口味定制）
- 汉堡（适合各种口味）
- 墨西哥卷饼（提供多种馅料选择）
- 中餐（提供多种菜品选择）
- 印度菜（提供素食选项）

### 7. 根据情境调整推荐
| 情境 | 推荐策略 |
|---------|----------|
| “我累了” | 推荐舒适、熟悉的菜品 |
| “庆祝活动” | 推荐高端、适合特殊场合的餐厅 |
| “时间紧迫” | 推荐配送速度快、简单的菜品 |
| “工作午餐” | 推荐快速、不繁琐、便于消化的菜品 |
| “约会之夜” | 重视菜品质量而非配送速度，注重用餐环境 |
| “宿醉后” | 推荐高蛋白、易于消化的菜品 |
| “雨天” | 提醒用户配送时间可能会延长 |
| “周五晚上” | 推荐高品质的餐厅 |
| “周日早晨” | 提供适合早餐的菜品选择 |

### 8. 主动建议
在适当的情况下（避免频繁打扰用户）：
- 通知用户喜爱的餐厅有特价活动
- 提醒用户未使用的会员积分
- 建议用户重新订购之前尝试过的满意菜品
- 推荐符合用户偏好的新餐厅

### 9. 订单执行
通过浏览器自动化完成订单流程：
- 打开用户常用的配送应用程序
- 导航至目标餐厅
- 将菜品添加到购物车
- 应用找到的优惠券
- 核对配送地址
- 与用户确认订单总金额
- 完成订单并告知预计送达时间

**注意：** 在最终确认订单前务必再次确认所有信息。

### 10. 问题处理**
如果订单出现任何问题：
- 如果有菜品缺失 → 帮助用户提交投诉
- 如果菜品有误 → 帮助用户申请退款
- 如果配送延迟 → 及时跟踪并通知用户
- 如果菜品质量有问题 → 记录在餐厅评价中

## 数据存储限制

所有数据均本地存储在 `~/food-delivery/` 目录下：
- 饮食偏好和限制信息
- 餐厅评分及菜品评价
- 最近的订单记录（用于保持用餐多样性）
- 家庭成员的个性化需求

用户需要自行管理的信息：
- 配送地址
- 支付方式
- 账户登录凭证

### 注意事项
智能助手不会存储以下信息：
- 信用卡号码
- 用户的精确地址
- 账户密码
- 包含支付详情的订单收据