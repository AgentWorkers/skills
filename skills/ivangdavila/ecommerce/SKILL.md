---
name: Ecommerce
slug: ecommerce
version: 1.0.0
description: 构建并运营具备支付安全功能、库存管理、市场集成以及转化优化功能的在线商店。
metadata: {"clawdbot":{"emoji":"🛒","requires":{"bins":[]},"os":["linux","darwin","win32"]}}
---
## 快速参考

| 主题 | 文件 |
|-------|------|
| 会导致生产环境故障的代码问题 | `code-traps.md` |
| 平台比较（成本、功能） | `platforms.md` |
| 运营流程（库存、配送、退货） | `operations.md` |
| 商业增长（客户获取成本、追加销售、客户生命周期价值、基准测试） | `growth.md` |

## 关键的代码问题

这些问题会导致生产环境故障，并造成实际经济损失。详细信息请参阅 `code-traps.md`。

1. **支付操作的幂等性问题**——务必存储 `payment_intent_id`，并在处理前进行验证。Webhook 应该能够重试请求。
2. **库存竞争条件**——使用 `UPDATE ... WHERE stock > 0` 语句时，应检查 `rowsAffected` 的值，而不是先读取数据再写入。
3. **前端显示的价格不可信赖**——后端需要重新计算所有价格；切勿直接信任客户提供的总价。
4. **Webhook 签名验证**——必须验证 `stripe-signature` 或类似的签名；拒绝未经签名的请求。
5. **库存验证时机**——应在支付时进行库存验证，而不仅仅是用户在购物车中添加商品时。

## 核心规则

### 构建店铺时：
- 所有价格（折扣、运费、税费）都应在服务器端计算。
- 交易相关的邮件发送应通过队列处理，切勿直接嵌入到结账流程中。
- 从第一天起就应添加结构化数据（遵循 Schema.org 的产品规范）和规范的 URL。
- 在店铺上线前，必须实现 webhook 签名的验证机制。

### 运营店铺时：
- 监控库存阈值（不仅仅是库存量为零的情况）；在库存量低于阈值时立即发出警报。
- 跟踪那些在“处理中”状态超过 24 小时的订单；在客户投诉之前发现问题。
- 记录支付失败的相关信息；了解信用卡拒绝的原因对于问题解决至关重要。

### 优化店铺时：
- 结账流程的恢复机制：分 1 小时、24 小时、72 小时三个阶段进行通知；在第三阶段通过邮件发送折扣信息。
- 免费配送的门槛：当前的平均订单价值（AOV）的 20-30%。
- 移动端用户：实现商品自动添加到购物车的功能；支持 Apple Pay/Google Pay；页面加载时间（LCP）应小于 2.5 秒。

## 平台选择指南

- **预算 <€500/月，SKU 数量 <100**：选择 Shopify Basic 或自托管的 WooCommerce。
- **需要管理多个市场**：使用专门的同步工具（避免手动更新数据）。
- **SKU 数量 >1000 或需要集成 ERP 系统**：选择 WooCommerce 并进行产品信息管理（PIM）的定制集成。

有关西班牙地区的特定费用（IVA、OSS、物流服务提供商等）信息，请参阅 `platforms.md`。

## 技能范围

本技能涵盖以下方面：
- 店铺架构与支付集成
- 库存和订单管理逻辑
- 市场平台上的商品列表优化
- 基于基准测试的转化率提升策略
- 欧盟/西班牙地区电商相关的法律/财务指导

**本技能不涉及以下内容：**
- 连接到实际运行的店铺 API（仅提供连接方法，不执行具体操作）
- 存储店铺的业务数据或凭证
- 自主做出采购或定价决策