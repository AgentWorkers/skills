---
name: Git
slug: git
version: 1.0.2
description: 掌握 Git 的工作流程，包括分支策略、冲突解决、历史记录管理以及团队协作模式。
---

## 使用场景

用户需要具备 Git 的相关知识，包括基本操作和复杂的工作流程管理。该工具（Agent）能够处理分支创建、合并、基线重构（rebase）、冲突解决以及团队协作相关的任务。

## 快速参考

| 主题 | 对应文件 |
|-------|------|
| 分支策略 | `branching.md` |
| 冲突解决 | `conflicts.md` |
| 代码历史与恢复 | `history.md` |
| 团队协作 | `collaboration.md` |

## 推送（Push）安全注意事项

- 使用 `git push --force-with-lease` 而不是 `--force`，以避免覆盖他人的代码
- 如果推送被拒绝，请先运行 `git pull --rebase` 再尝试
- 绝不要强制将代码推送到 `main` 或 `master` 分支

## 提交（Commit）信息规范

- 采用标准的提交格式：`类型（范围）：描述`
- 提交信息的第一页字符数应控制在 72 个以内
- 仅在项目中有统一要求时才需要包含代码范围（scope）

## 冲突解决

- 编辑有冲突的文件后，确认没有残留的标记：`grep -r "<<<\|>>>\|===" .`
- 在完成合并之前，先测试代码是否能正常编译
- 如果合并过程变得复杂，使用 `git merge --abort` 中止操作，然后尝试使用 `git rebase`

## 分支管理规范

- 在本地删除已合并的分支：`git branch -d 分支名称`
- 在创建 Pull Request（PR）之前，将功能分支（feature branch）重新基线到最新的 `main` 分支
- 使用 `git rebase -i` 合并杂乱无章的提交记录后再进行推送

## 恢复操作命令

- 回滚上一次提交并保留修改内容：`git reset --soft HEAD~1`
- 删除未暂存的更改：`git restore 文件名`
- 当一次提交包含多个更改时，使用 `git add -p` 进行部分暂存

## 常见错误与注意事项

- 在进行重要提交之前，确认 `git user.email` 与预期的提交者信息一致
- 空目录不会被 Git 跟踪——如有需要，添加 `.gitkeep` 文件
- 使用子模块（submodules）时，务必使用 `--recurse-submodules` 选项进行克隆
- 在尝试向远程分支推送之前，先检查该分支是否已被删除

## 安全检查清单

在执行可能破坏代码历史的操作之前，请确认：
- [ ] 这是否是一个共享分支？ → 不要修改代码历史记录
- [ ] 我有未提交的更改吗？ → 先将更改暂存或提交
- [ ] 我是否在正确的分支上？ → 使用 `git branch` 进行确认
- [ ] 远程分支是否是最新的？ → 先执行 `git fetch` 命令