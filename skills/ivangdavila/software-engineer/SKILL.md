---
name: Software Engineer
slug: software-engineer
version: 1.0.0
homepage: https://clawic.com/skills/software-engineer
description: 编写适用于生产环境的代码，确保其架构清晰、错误处理机制完善，并在快速交付代码与保证代码质量之间做出合理的权衡。
metadata: {"clawdbot":{"emoji":"👨‍💻","requires":{"bins":[]},"os":["linux","darwin","win32"]}}
---
## 使用场景

Agent需要编写、审查或重构代码。该技能涉及实现决策、架构权衡以及代码质量的把控，适用于任何语言或框架。

## 快速参考

| 主题 | 文件 |
|-------|------|
| 代码模式 | `patterns.md` |
| 架构决策 | `architecture.md` |
| 测试实践 | `testing.md` |

## 核心规则

### 1. 先阅读再编写
- 在编写新代码之前，先查看现有的代码风格、模式和规范
- 遵循当前的项目技术栈——未经明确要求，切勿更换库
- 保持命名规范、格式和项目结构的一致性

### 2. 可编译的代码
每个代码块都必须：
- 正确导入实际使用的库版本
- 使用项目中依赖版本中提供的API
- 通过基本的语法检查——避免使用占位符 `// TODO: implement`

### 3. 优先解决实际问题
- 首先解决当前面临的具体问题，而非假设未来的问题
- 只有在存在三个具体用例时才进行抽象化设计
- 可能需要的功能可以暂时跳过；确实需要的功能再实现

### 4. 将错误视为重要问题
```
❌ catch (e) {}
❌ catch (e) { console.log(e) }
✅ catch (e) { logger.error('context', { error: e, input }); throw new DomainError(...) }
```
- 使用类型化的错误信息，而非通用的字符串
- 提供上下文信息：哪些操作失败了，使用了什么输入数据
- 区分可恢复的错误和致命错误

### 5. 明确职责划分与代码分离
| 层级 | 所包含的内容 | 绝对不包含的内容 |
|-------|----------|----------------|
| 处理器/控制器 | HTTP/CLI解析、验证 | 业务逻辑、SQL操作 |
| 服务/业务逻辑 | 业务规则、任务调度 | 基础设施细节 |
| 仓库/适配器 | 数据访问、外部API | 业务决策 |

### 6. 明确权衡
在做出架构决策时，需要说明：
- 你的选择及其原因
- 你所放弃的方案
- 何时需要重新评估该决策

**示例**：“为了简化代码，选择了SQLite。但代价是无法支持并发写入。如果写入频率超过每秒一次，则需要重新考虑。”

### 7. 适合提交Pull Request（PR）的代码
在提交任何代码之前，请确保：
- 代码中没有无用的代码、注释掉的代码块或调试语句
- 函数长度不超过30行
- 不使用魔法数字——使用有意义的常量
- 尽量使用早期返回值，而非嵌套的条件语句
- 已经处理了边界情况（如空值、空字符串、错误状态）

## 代码质量的标志

**优秀的代码应该像散文一样易读：**
- 函数名能够解释代码的功能和用途，而不仅仅是实现方式
- 初级开发者也能在30秒内理解代码
- 代码本身足够简单，无需额外的注释

**最好的代码是“无趣”的：**
- 代码遵循可预测的模式
- 在合理的情况下优先使用标准库而非自定义实现
- 代码逻辑清晰、易于理解

## 常见陷阱

| 陷阱 | 后果 | 预防措施 |
|------|-------------|------------|
| 无谓地创建API | 代码无法编译 | 在提交前先确认API在文档中是否存在 |
| 过度设计 | 开发时间过长（可能长达3小时） | 问自己：“这三个用例是否确实存在？” |
| 忽视代码上下文 | 选择错误的开发工具或技术栈 | 提出建议前先阅读现有代码 |
| 未经理解地复制粘贴代码 | 之后会出现隐藏的错误 | 需要解释代码的功能和逻辑 |
| 空洞的错误处理机制 | 代码在运行时出现无声的错误 | 必须记录错误信息、明确错误类型并重新抛出异常 |
| 过早进行抽象化设计 | 代码过于复杂且没有实际好处 | 除非有充分理由，否则避免过度抽象化 |

## 实用的代码交付策略

**关键路径（必须做好）：**
- 认证与授权机制
- 支付处理流程
- 数据完整性及数据迁移
- 保密信息的管理

**实验性功能（快速开发、持续迭代）：**
- 用户界面/用户体验相关功能
- 管理面板
- 分析工具
- 任何尚未经过用户验证的功能

**关键路径的功能需要经过测试**：“这个功能是否会在凌晨3点触发某些操作？或者会导致资金损失？”

## 安全性与隐私保护

**该技能不涉及以下操作：**
- 外部存储数据
- 发送网络请求
- 访问项目之外的文件

所有代码相关的建议都是根据具体讨论情境生成的。