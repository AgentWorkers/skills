---
name: Video
slug: video
version: 1.0.1
description: 处理、编辑和优化视频，适用于任何平台；支持压缩、格式转换、添加字幕以及视频的再利用等功能。
changelog: Declare required binaries (ffmpeg, ffprobe), add requirements section with optional deps, add explicit scope
metadata: {"clawdbot":{"emoji":"🎬","requires":{"bins":["ffmpeg","ffprobe"]},"os":["linux","darwin","win32"]}}
---
## 要求

**必备条件：**
- `ffmpeg` / `ffprobe` — 核心的视频处理工具

**可选条件：**
- `whisper` — 用于生成字幕的本地转录工具
- `realesrgan` — 用于视频画质提升的AI工具

## 快速参考

| 情况 | 参考文档 |
|---------|---------|
| 平台规格（YouTube、TikTok、Instagram） | `platforms.md` |
| 根据任务使用的FFmpeg命令 | `commands.md` |
| 质量/压缩设置 | `quality.md` |
| 根据使用场景的工作流程 | `workflows.md` |

## 核心功能

| 任务 | 方法 |
|--------|--------|
| 转换/压缩视频 | 使用FFmpeg（详见`commands.md`） |
| 生成字幕 | 使用`whisper`工具生成SRT/VTT格式的字幕 |
| 调整视频比例 | 通过裁剪、填充或智能重帧来调整比例 |
| 清理音频 | 对音频进行标准化、去噪和增强处理 |
| 批量操作 | 一次性处理整个文件夹中的文件 |

## 执行流程

1. **明确目标** — 需要处理哪个平台？目标格式是什么？文件大小有限制吗？
2. **检查源文件** — 使用`ffprobe`工具获取视频的编码格式、分辨率、时长和音频信息。
3. **进行处理** — 使用FFmpeg对视频进行转换。
4. **验证结果** — 在交付前确认输出文件符合要求。
5. **交付结果** — 将处理后的文件提供给用户。

## 常见请求与对应操作

| 用户需求 | 代理操作 |
|---------|---------|
| “适用于TikTok的视频格式” | 将视频调整为9:16的比例，检查时长是否不超过3分钟，并进行压缩 |
| “添加字幕” | 使用`whisper`生成字幕，并将其转换为SRT或VTT格式；可以选择嵌入到视频中或单独提供 |
| “为WhatsApp压缩视频” | 将视频压缩至64MB以内，使用H.264编码格式和AAC音频格式 |
| “提取音频” | 使用`-vn -acodec mp3`命令提取音频文件；或使用`-acodec copy`命令复制音频数据 |
| “制作GIF动画” | 提取视频帧，优化颜色调色板，并设置循环播放 |
| “分割视频文件” | 使用`-ss`和`-t`命令根据时间戳分割视频 |

## 质量标准

- **始终将音频重新编码为AAC格式**，以确保最佳的兼容性。
- **使用`-movflags +faststart`选项**以优化视频在网页上的播放效果。
- **对于H.264编码格式，CRF值设为23是一个较好的默认值（数值越低，压缩效果越好，但文件体积也越大）。
- **在交付前务必检查**：确认视频的时长、文件大小以及是否可以正常播放。

## 平台快速参考

| 平台 | 视频比例 | 最大时长 | 最大文件大小 |
|--------|---------|-------------|
| TikTok | 9:16 | 3分钟 | 287MB |
| Instagram Reels | 9:16 | 90秒 | 250MB |
| YouTube Shorts | 9:16 | 60秒 | 无限制 |
| YouTube | 16:9 | 12小时 | 256GB |
| WhatsApp | 任意比例 | 3分钟 | 64MB |

## 功能范围

- 该工具仅处理用户明确提供的视频文件。
- 仅根据用户的请求执行FFmpeg命令。
- 未经用户授权，不会访问或上传任何文件。
- 不会自动将处理后的文件上传到外部服务。