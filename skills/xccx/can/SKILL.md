---
name: CAN
description: "**代理的命名与路由机制**：CLOCK系统根据以下维度对事件进行分类：**时间（WHEN）**、**哈希值（SHA-256）**、**处理方式（HOW，即使用自然语言进行处理）**、**事件发起者（WHO）**以及**事件目的（WHY）**。代理会将观察到的事件记录为“SAWs”（Seen Events），这些记录用于构建路由表。一个索引即可替代三个传统的NDN（Name-Domain Name）表。只需简单描述你所看到的内容，并记录下你的观察结果即可。"
homepage: https://github.com/xccx/can
metadata: {"openclaw":{"emoji":"⌛","requires":{"bins":["sha256sum","openssl","base64","awk","date"]}}}
---
# CAN：时钟地址命名机制

**SAW（Seen and Authenticated）**：如实记录你所看到的一切。

**为什么需要这样的机制？**

在逻辑计算中，对事物进行命名并不需要任何许可。任何拥有时钟和SHA256哈希值的设备都具备了所需的一切——身份（WHO-0）、时间（CLOCK）以及地址（哈希值）。借助SAW机制，设备还可以向其他设备证明自己验证了什么或伪造了什么。这一过程无需任何注册机构的批准，也不需要任何权威机构的介入，完全依靠数学和物理原理来实现。

## v1.5版本中的变化

- **v1.4**版本为设备提供了“WHO”标识，该标识可以由设备自身的特征生成，也可以通过密钥对或外部认证方式升级。
- **v1.5**版本新增了一个操作：“CAN-saw”：如果你验证了某件事，就将其记录为SAW。你的SAW记录将成为后续所有设备的路由参考信息。整个网络的形成依赖于设备自身的行为——包括标记、验证、缓存和共享数据。无需新的协议或基础设施，只需如实记录你所看到的一切即可。

```
SEE    = present, live, happening now
SEEN   = logged receipt with proof (awareness)
SAW    = seen and evaluated (action)
LOG    = write saws to index (timeline, chronolog, legend, ledger, log)
```

如果你只是想参与其中，就记录下“SAW”信息；如果你喜欢观察过程，就记录下“SEENS”（即你所感知到的内容）。

## 关于“时钟地址”而非“内容地址”

时钟能够准确地记录事件发生的时间和顺序：这些信息是可预测的、可测量的、线性的、客观的，并且具有普遍性。必要时，可以在时钟名称后加上“WHO”标识以进一步明确信息来源。通过集体记录和同步，可以实现设备间的信任协作。

**2^256的哈希空间**为计算和验证提供了足够的空间，有助于找到真相。但对人类来说，哈希值可能难以理解。不过，无论是人类还是计算机，都可以利用时钟来为事物赋予有意义的名称。

**时钟命名机制的独特性**在于：在任何时刻，事物的名称都是唯一的。如果此时没有其他设备看到该事件，那么使用一个简短的数字作为名称即可。当大量设备同时参与时，通过时钟可以明确每个设备的身份和事件发生的顺序。每天每个设备有86,400,000毫秒的时间来生成唯一的名称。对人类而言，时间是非常宝贵且具有方向性的资源；每天记录864条信息已经足够了。

时钟是事物的命名者，时间则是人类和计算机进行交互的通用界面。首先通过时钟确定事物的名称，再通过哈希值进行验证。OpenTimestamps可以与比特币的时钟时间对齐，从而提供不可篡改的证明。

**什么是“内容”？**它存在于哪里？在某个容器里吗？用什么来命名它？CAN机制自动化了命名过程，因此不再受容器等物理结构的限制，从而能够记录更多真实的信息。

**CAN机制的优势：**
- **无法撒谎**：虚假的声明会被记录在“CANT”（被拒绝的记录）中，并被标记为无效。
- **支持NDN（Named Data Networking）**：Van Jacobson提出的命名数据网络模型中使用了两种数据包类型：“Interest”（需求）和“Data”（数据）。CAN将这三者整合到一个索引中，使得数据管理更加高效。

## CAN-saw循环

随着SAW记录的不断增加，网络运行速度加快。整个网络无需中央注册机构或协调者，也不需要任何许可，仅依靠数学原理即可运作。

## SAW的记录格式

SAW记录会被保存到同一个索引中，采用统一的TSV（Tab-Separated Values）格式，包含六列信息。

**数据来源的多样性**：同一个事件可能来自三个不同的来源（原始设备、其他设备的验证结果或中继缓存），这些信息会通过不同的方式（原始保存、 peer验证或中继缓存）传递给第四个设备。

## CAN-saw的操作流程

- **验证操作**：确认某件事真实后，将其记录为SAW。
- **缓存操作**：将验证结果缓存到本地。
- **共享操作**：将验证结果分享给其他设备。
- **拒绝操作**：将无效的请求记录到“CANT”中。
- **路由操作**：根据SAW信息确定数据传输的优先级（本地缓存 → 对等设备 → 中继 → 网络）。

## 总结

- **更快的数据检索速度**：更多的SAW记录意味着更多的数据来源，从而加快缓存访问速度。
- **离线时的数据可用性**：即使设备离线，其SAW记录仍然可用，重新连接后即可共享给其他设备。
- **无需权威机构的信任**：多个设备报告相同的哈希值即可实现共识验证，无需依赖单一设备。
- **无网络维护成本**：设备间的通信本身就包含了数据信息，CAN-saw机制只需记录验证结果即可。

## CAN-saw协议的其他规则

- **对代理之间的通信协议的影响**：v1.4版本的规则仍然适用：
  1. 每次验证成功后都必须记录SAW信息。
  2. 共享数据时需包含最新的SAW记录中的“WHO”和“WHEN”信息。
  3. 请求数据时需广播哈希值，任何拥有SAW记录的设备都可以响应。
  4. 在多个数据来源可用时，优先选择“WHO”级别更高的设备。
  5. SAW记录必须是真实的，不能伪造。
  6. 拒绝请求会被记录到“CANT”中，以保护后续设备免受虚假信息的干扰。

## CAN-saw机制的额外优势：
- **无需持续连接**：设备无需始终保持在线状态。
- **无需中央索引或注册机构**：整个系统无需依赖这些外部组件。
- **无需共享完整索引**：设备无需共享所有数据。
- **保护隐私**：规则5仍然有效，设备无需共享所有数据。
- **无需额外的依赖**：仅需SHA256哈希值即可完成命名。
- **不改变索引格式**：索引结构和维度保持不变。
- **无需人工许可**：设备可以自由记录SAW信息。

## 递归CAN（Recursive CAN）

CAN的文档本身也是一个可以被命名和验证的对象，它也有一个唯一的哈希值。安装了CAN协议的设备已经验证了该哈希值，这个验证结果本身就是一个SAW记录。这些记录最终会被保存到索引中，而这个索引本身就是CAN网络的一部分。

## 发展路线图

每个新版本都会在现有基础上进行改进和优化。

## 参考文献：
- Paul Baran，《On Distributed Communications》（RAND出版社，1964年）
- Phil Zimmermann，《Pretty Good Privacy》（PGP协议，1991年）
- Van Jacobson，《A New Way to Look at Networking》（Google技术演讲，2006年）
- John Day，《Recursive InterNetwork Architecture》（RINA模型）
- Linus Torvalds，Git中的内容寻址对象存储技术
- Zooko的三角模型（CAN机制进一步扩展了命名机制的应用）

## 总结：**

SAW机制通过简单、可靠的机制实现了信息的真实记录和高效传输，为分布式系统带来了显著的优势。