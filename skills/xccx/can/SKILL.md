---
name: CAN
description: "6D 命名与路由机制：  
代理系统的所有内容均需根据以下五个维度进行命名：  
- WHAT（可哈希的数据特征）  
- WHEN（事件发生的时间）  
- WHERE（数据的 SHA-256 地址）  
- HOW（数据的处理方式/表示形式）  
- WHY（数据的用途或意图）  
- WHO（数据的所有者/使用者）  
内容的路由基于名称和地址进行，而非物理位置。系统会验证数据的完整性，并为每个事件添加时间戳；用户可以通过时间、哈希值或关键词来查找所需数据，同时将数据从最近的来源进行路由传输。"
homepage: https://github.com/xccx/can
metadata: {"openclaw":{"emoji":"⌛","requires":{"bins":["sha256sum","openssl","base64","awk","date"]}}}
---
# CAN：时钟地址命名系统

**版本1.4** — 支持六维命名与路由功能。

**命名规则：**  
至少需要用三种方式来命名某个对象：

**WHAT（对象本身）**、**WHY（命名目的）** 和 **WHO（命名者）** 都可以被明确标识。

**计算机自动确定** **WHEN（创建时间）**、**WHERE（存储位置）**、**HOW（存储方式）** 以及 **WHO（存储者）**。而人类只需通过一次按键操作就能指定 **WHY（命名原因）**。**WHAT（对象的具体内容）** 则由计算机和人类共同确定。

## 该系统的存在意义：**  
为了实现即时信任和高效查找。文件名（如 “foo/bar.md”）可能会更改，但哈希地址是永久不变的。过去，人类在处理基于20世纪70年代的命名规则时浪费了大量时间；此外，系统因不安全的命名机制而消耗了大量计算资源。现在，这些问题都可以得到解决，且无需任何额外成本。

## 六个维度：**

### 1. **WHAT（对象本身）**  
任何可哈希的数据：文件、字符串、目录、消息、图片等。只要能够被转换为二进制形式，CAN系统就能对其进行命名。

### 2. **WHEN（创建时间）**  
以毫秒为单位的时间戳，记录内容创建或被记录的时间。

**时间排序功能**：未来的系统将不再依赖地址来排序数据；当内容被上传时，时间戳会自动更新为“当前时间”。`WHEN-0` 表示本地时间（免费提供），`WHEN-1` 则使用 OpenTimestamps 技术，将多个时间戳的 Merkle 根哈希值上传到 Bitcoin 网络中，一次交易即可验证数千条记录的真实性。这样，历史数据的安全性得到了极大提升。

### 3. **WHERE（存储位置）**  
内容的 SHA-256 哈希值，代表了该数据在 2^256 个哈希空间中的唯一位置。

**哈希值的唯一性**：无论两个代理在何处对相同内容进行哈希处理，得到的地址都是一样的。这意味着内容的真实性得到了可靠保障。

**注意：** macOS 系统可能使用 `shasum -a 256` 而非 `sha256sum`；`WHO-1` 签名需要 `openssl`（大多数系统已预装）。`WHO-0` 会读取平台标识信息（Linux 上为 `/etc/machine-id`，macOS 上为 `ioreg`，Windows 上为 `Get-CimInstance`）。

### 4. **HOW（人类可编辑的命名空间）**  
由代理生成，人类可以对其进行编辑。每个地址可以有多个名称。

**命名目的**：代理会根据上下文、工作流程和内容生成一个简短的名字供人类使用；人类可以选择接受、修改或忽略这个名字。哈希值才是数据的真实标识。

### 5. **WHO（命名者）**  
人类可以自由地为对象指定名称（标签、昵称或描述）。这些名称是非唯一的，用于方便查找。名称的持久性通过哈希值实现：每次命名都会生成一个新的 CAN 条目指向原始数据。

### 6. **WHY（命名目的）**  
保存操作时会记录一个唯一的密钥组合，用于标识命名背后的意图。

**命名流程：**  
保存操作会生成一个包含意图的密钥组合（SAVE→GOOD→POST），确保数据的完整性和可追溯性。

### 7. **WHO（身份验证）**  
**WHO-0** 是免费的、自动生成的、无需配置的：`sha256(username + machine-id)`，每个用户和每台机器都有唯一的身份标识。每次登录时都会生成新的身份信息（仅在操作系统重新安装或用户更换时才会改变）。  
**WHO-1** 是可选的、需要用户主动设置的：用户可以生成自己的密钥对（`~/.can/who.key`），丢失密钥后可重新生成。  
**WHO-2** 提供更强的身份验证功能，支持跨平台使用，但并非强制要求。

**系统架构：**  
任何签名者都可以为数据生成一个包含时间戳、地址和身份信息的哈希值对。**追溯性链接**：用户升级后，旧数据会自动获得更强的身份验证。

## 索引格式：**  
数据以 TSV 格式存储，人类可读，支持 grep 搜索。包含六列信息：  
- **WHEN**（时间戳）  
- **HOW**（人类可读的显示名称）  
- **PATH**（文件路径，可靠性较低，仅用于兼容旧系统）  
- 同一哈希值对应多个路径和时间戳，说明文件可能被移动过，但数据的真实性不变。

## 核心功能：**

- **CAN-stamp**：对数据进行哈希处理并存储。  
- **CAN-verify**：验证地址的合法性。  
- **CAN-store**：基于哈希值存储数据。  
- **CAN-find**：快速查找数据。  
- **CAN-locate**：精确定位数据位置。  
- **CAN-route**：根据地址和内容进行路由。  
- **CAN-who**：显示数据的身份信息。

## 代理间通信协议：**  
1. 在共享数据时必须提供时间戳、存储位置和命名者信息。  
2. 在处理数据前需验证存储位置。  
3. 为接收者生成易于理解的名称。  
4. 公开显示数据验证结果，保护网络安全。  
5. 只在必要时使用 `WHO-1` 进行签名。  
6. 缓存已验证的数据，以便其他代理使用。  
7. 首先根据哈希值进行路由，其次使用 URL。  
8. 显示数据的身份验证等级，以便接收者了解数据的安全性。

## 路由策略：**  
多个地址意味着更高的系统弹性（即使部分节点故障，系统仍能正常运行）。

## 开发计划：**  
每个新版本都会完善现有功能。

## 哲学理念：**  
所有数据都有六个维度：计算机自动处理五个维度，人类可以通过密钥组合来指定数据的用途。结合这些信息，可以实现即时信任、高效查找、路由和数据管理——无论是在线还是离线环境下，无论数据位于何处，无论时间如何变化。

**参考文献：**  
- Paul Baran，《分布式通信》（RAND，1964年）  
- Van Jacobson，《命名数据网络》（NDN）  
- John Day，《递归互联网架构》（RINA）  
- Git 的内容寻址存储机制  
- OpenTimestamps 技术用于 Bitcoin 时间戳验证  
- Zooko 的“三角形原理”（CAN 系统通过六个维度解决了这些问题）

## 总结：**  
CAN 系统通过六个维度为数据提供全面的身份验证和路由功能，实现了高效、安全和可靠的分布式存储与传输。