---
name: rug-checker
description: Solana代币的“地毯式抛售”（rug-pull）风险分析：包含10项链上检查内容的可视化报告。无需使用API密钥，仅提供读取权限。本报告不构成任何财务建议。
version: 0.1.3
author: CacheForge
tags: [security, crypto, solana, defi, rug-pull, discord, discord-v2]
permissions:
  - network
---
# Rug Checker — 代理技能定义

## 技能元数据

| 字段 | 值 |
|-------|-------|
| **slug** | `rug-checker` |
| **版本** | `0.1.3` |
| **作者** | CacheForge |
| **类别** | DeFi / 安全 |
| **链** | Solana |
| **风险等级** | 只读（不涉及钱包交互） |

## 激活触发条件

当用户的消息符合以下任何模式时，激活此技能：

| 模式 | 例子 |
|---------|---------|
| 检查代币风险 | “对BONK代币进行风险检查” |
| 代币安全性 | “这个代币安全吗？” |
| 诈骗检测 | “这是个骗局吗？” |
| 代币风险分析 | “这个代币有什么风险？” |
| 代币审计 | “审计这个代币” |
| 检查锁定情况 | “这个代币的LP（锁定资金）被锁定了吗？” |
| 是否可以铸造更多代币 | “他们能铸造更多代币吗？” |
| 代币查询 + Solana地址 | “DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263是什么？” |

> **注意：** 如果用户询问“我应该买[代币]吗？”，则回复：“我无法建议是否购买，但我可以为您检查链上的风险因素。” 然后执行分析。

**地址检测：** 如果用户提供32-44个字符的base58字符串，将其视为Solana代币地址；如果提供名称/符号，则先进行解析。

## 代理工作流程

### 第1步：提取代币信息

解析用户的消息，查找以下内容：
- Solana地址（32-44个字符的base58字符串，格式为`[1-9A-HJ-NP-Za-km-z]{32,44}`）
- 代币名称或符号（例如：“BONK”、“bonk”、“Wheelchair Fish”）

如果信息不明确，询问：“您想让我检查哪个代币？请提供合约地址或代币名称。”

### 第2步：解析代币信息

```bash
bash scripts/detect-token.sh <address_or_name>
```

**根据输入类型，输出结果不同：**

**如果提供Solana地址：** 返回包含`found: true/false`、`address`、`name`、`symbol`以及市场数据的JSON。

**如果提供名称/符号：** 返回包含`ambiguous: true`的JSON，以及一个`candidates`数组，其中包含最多5个匹配项（包括地址、名称、符号、流动性和代币年龄）。**如果`detect-token`返回了候选代币，必须向用户展示这些候选项，并询问他们指的是哪一个。**切勿自动选择候选代币。**检查错误的代币比不检查更糟糕。

**示例候选结果：**
```json
{
  "query": "bonk",
  "ambiguous": true,
  "candidates": [
    {"address": "DezXAZ8z...", "name": "Bonk", "symbol": "BONK", "liquidity_usd": 5000000, "age": "400d"},
    {"address": "56Lc5...", "name": "BonkFork", "symbol": "BONK", "liquidity_usd": 12000, "age": "3d"}
  ]
}
```

将候选代币以编号列表的形式展示：
> 我找到了多个名为“bonk”的代币。您指的是哪一个？
> 1. **BONK**（Bonk） — `DezXAZ8z...` — 流动性500万美元，创建400天
> 2. **BONK**（BonkFork） — 流动性1.2万美元，创建3天

然后使用确认的地址重新运行检查。

如果`found: false`（且`ambiguous`为`false`），告诉用户找不到该代币，并请他们重新核对地址。

### 第3步：运行风险分析

```bash
bash scripts/analyze-risk.sh <token_address>
```

**输出：** 包含10项风险检查的JSON，以及综合评分（0-100分）和风险等级（SAFE/CAUTION/WARNING/DANGER/CRITICAL）。

### 第4步：生成报告

```bash
bash scripts/analyze-risk.sh <address> | bash scripts/format-report.sh
```

或者将生成的JSON数据通过管道传输：

```bash
bash scripts/format-report.sh < analysis.json
```

**输出：** 格式化的Markdown报告卡，包含风险等级、市场概览和链接。

### 第5步：向用户展示结果

展示格式化的报告，并根据风险等级添加简要说明：

| 风险等级 | 说明模板 |
|------|-------------------|
| 🟢 安全（0-15） | “检测到较低的链上风险指标。注意：这仅涵盖链上因素——团队、法律和市场风险未进行评估。” |
| 🟡 警告（16-35） | “发现了一些警示信号。不一定是骗局，但请谨慎操作并自行研究。” |
| 🟠 警告（36-55） | “检测到多个风险因素。请小心处理。” |
| 🔴 危险（56-75） | “存在多个潜在的诈骗风险。” |
| ⛔ 极高风险（76-100） | “该代币存在严重的安全问题。强烈建议避免购买。” |

**始终在报告末尾添加免责声明**（该声明已内置在`format-report.sh`中）。**切勿使用任何暗示买卖建议的语言**（例如：“看起来很可靠”、“是不错的投资”、“安全的选择”）。

### Discord v2交付模式（OpenClaw v2026.2.14+）

在Discord频道中运行时：
- 发送一条简洁的消息，包含代币名称、风险等级和前三大风险因素。
- 保持第一条消息长度在1200个字符以内；避免先显示完整报告。
- 如果Discord支持相关功能，提供以下选项：
  - `显示完整风险分析`
  - `显示数据来源`
  - 重新运行检查
- 如果相关功能不可用，以编号列表的形式提供这些选项。
- 对于较长报告，分多次发送（每次不超过15行），以避免频道信息过载。

## 错误处理

| 错误类型 | 原因 | 代理响应 |
|-------|-------|---------------|
| `detect-token`返回退出代码2 | 未找到代币 | “我找不到该代币。请检查地址——它应该是一个Solana SPL代币地址（32-44个base58字符）。” |
| `detect-token`返回退出代码1 | API请求失败 | “我暂时无法访问代币API。请稍后再试。” |
| `composite_score: -1` | 所有数据源均失败 | “所有数据源都不可用。没有数据，我无法安全地分析该代币。” |
| `rugcheck`不可用 | Rugcheck API故障 | 将使用DexScreener和Solana RPC进行替代分析（功能降级但可用）。请在回复中说明这一点。 |
| `found: true`但名称“未知” | 代币存在于链上但未在DEX上列出 | “该代币存在于Solana上，但似乎未在任何DEX上列出。可能是新代币或不可交易的代币。” |

## 数据来源

| 来源 | 提供的信息 | 是否必需？ |
|--------|-----------------|-----------|
| Rugcheck.xyz | 铸造/冻结权限、最大持有者、LP锁定情况、风险标志、内部交易检测、验证状态 | 主要数据源（缺少此数据源，部分检查将无法进行） |
| DexScreener | 价格、成交量、流动性、市值、代币年龄、名称解析 | 辅助数据源（市场背景信息） |
| Solana RPC | 链上铸造/冻结权限验证 | 备用验证方式 |

## 风险检查（共10项）

| 编号 | 检查项 | 权重 | 检测内容 |
|---|-------|--------|----------------|
| 1 | 铸造权限 | 2.0 | 创建者能否无限铸造代币？ |
| 2 | 冻结权限 | 1.5 | 创建者能否冻结持有者的钱包？ |
| 3 | 持有者集中度 | 1.5 | 代币是否集中在少数钱包中？ |
| 4 | LP锁定状态 | 2.0 | 流动性是否可以被提取？（经典诈骗手段） |
| 5 | 代币年龄 | 1.0 | 代币创建多久了？ |
| 6 | 流动性深度 | 1.0 | 是否有足够的流动性进行交易？ |
| 7 | Rugcheck标志 | 1.0 | Rugcheck.xyz提供的自动化风险标志 |
| 8 | 内部交易活动 | 1.5 | 是否检测到协同操作的交易网络？ |
| 9 | 转移费用 | 1.0 | 转移过程中是否存在隐藏费用？ |
| 10 | 验证状态 | 0.5 | 该代币是否在Jupiter平台上列出？ |

## 安全性说明

### ⚠️ 本技能仅提供信息性风险提示

本技能仅提供**风险信息**。代理**严禁**：
- 推荐购买或出售任何代币
- 使用任何暗示代币“值得购买”或“安全投资”的语言
- 将分析结果作为投资建议
- 保证任何代币的安全性
- 替代专业金融建议
- 考虑链下风险（团队、法律、监管、市场情绪）

**风险评分较低**仅表示**检测到较低的链上风险指标**——但这并不意味着该代币就是好的投资或完全没有风险。

### 🔒 只读功能

本技能：
- **绝不**与任何钱包交互
- **绝不**签署或执行任何交易
- **绝不**请求私钥或助记词
- **绝不**发送代币或资金
- 仅使用公开可用的链上数据和公共API接口

## 示例提示

```
"Rug check DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263"
"Is BONK safe?"
"Check this token for me: 5smiafTeV4ATT6naUWTwzcsvix4VU9nQ7ReyzKiqpump"
"Is this a rug pull? [address]"
"Analyze the risk on this Solana token"
"Do a safety check on $WIF"
```

## 所需依赖项

- `bash` 4+
- `curl`
- `jq`
- `bc`（用于浮点数比较）
- 可访问以下网站：`api.rugcheck.xyz`、`api.dexscreener.com`、`api.mainnet-beta.solana.com`