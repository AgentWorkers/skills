---
name: subagent-driven-development
model: standard
description: **使用说明：**  
当在当前会话中执行包含独立任务的实施计划时，请使用此方法。
---

# 基于子代理的开发模式（Subagent-Driven Development）

该模式通过为每个任务分配一个新的子代理来执行计划，并在每个任务完成后进行两阶段审查：首先是规范合规性审查，其次是代码质量审查。

**核心原则：**  
为每个任务分配新的子代理 + 两阶段审查（先规范合规性，再代码质量） = 高质量、快速迭代

## 安装

### OpenClaw / Moltbot / Clawbot  
（安装步骤请参考相应的文档或官方指南。）

## 适用场景  

（请根据实际需求填写适用场景。）

**与“执行计划”模式（Parallel Session）的对比：**  
- **执行计划模式：**  
  - 在同一会话中执行所有任务（导致上下文混乱）  
  - 每个任务使用相同的子代理（可能影响审查效果）  
  - 每个任务完成后仅进行一次审查  

- **基于子代理的模式：**  
  - 为每个任务分配新的子代理（避免上下文混乱）  
  - 每个任务完成后进行两阶段审查  
  - 迭代速度更快（无需人工在任务之间切换上下文）  

## 工作流程  

（请根据实际需求填写工作流程。）

## 提示模板  

- `./implementer-prompt.md`：用于调度实现子代理  
- `./spec-reviewer-prompt.md`：用于调度规范合规性审查子代理  
- `./code-quality-reviewer-prompt.md`：用于调度代码质量审查子代理  

## 示例工作流程  

（请根据实际需求填写示例工作流程。）

## 相比手动执行的优点：**  
- 子代理自然遵循测试驱动开发（Test-Driven Development, TDD）的原则  
- 每个任务都有清晰的上下文信息（避免混淆）  
- 支持并行执行（子代理之间不会相互干扰）  
- 子代理可以在工作开始前和过程中提出问题  

**与“执行计划”模式的对比：**  
- 手动执行模式：  
  - 在同一会话中完成所有任务（导致上下文混乱）  
  - 进度不连续（需要等待）  
  - 审查节点需要人工干预  

**效率提升：**  
- 无需读取文件（控制器提供完整的信息）  
- 控制器精确地提供所需的上下文  
- 子代理能提前获取所有必要信息  
- 问题能在工作开始前被发现  

**质量保障机制：**  
- 自我审查机制能提前发现潜在问题  
- 两阶段审查确保问题得到有效解决  
- 规范合规性审查防止过度或不足的实现  
- 代码质量审查确保实现质量  

**成本考虑：**  
- 需要更多的子代理（每个任务需要一个实现子代理和两个审查子代理）  
- 控制器需要更多的准备工作（提前提取所有任务信息）  
- 审查过程会增加迭代次数  
- 但能更早发现问题（比后期调试更经济）  

## 注意事项：**  
- **绝对禁止**：  
  - 跳过任何阶段的审查  
  - 在问题未解决的情况下继续执行  
  - 并行调度多个实现子代理（可能导致冲突）  
  - 让子代理直接读取计划文件（应提供完整的上下文信息）  
  - 忽略子代理的提问  
  - 对规范合规性的审查结果敷衍了事（即使审查者发现了问题，也需要重新审查）  
  - 在规范合规性审查未通过前就开始代码质量审查  
  - 在任一阶段的审查未完成时直接进入下一个任务  

**子代理使用建议：**  
- 如果子代理有问题，请清晰、完整地回答它们  
- 如有必要，提供额外的上下文信息  
- 不要催促子代理立即开始实现  

**问题处理流程：**  
- 如果审查者发现问题，由同一子代理负责修复  
- 审查者需再次进行审查  
- 重复此流程直至问题得到解决  
- 严禁跳过重新审查环节  

**子代理任务失败时的处理：**  
- 发送带有具体指令的修复子代理  
- 不要尝试手动修复问题（以免干扰审查流程）  

## 集成要求：**  
- 需要具备以下工作流程相关技能：  
  - `writing-plans`：用于创建执行计划  
  `requesting-code-review`：用于生成代码审查模板  
  `finishing-a-development-branch`：用于完成所有任务的开发  

**子代理应使用的功能：**  
- `test-driven-development`：确保子代理在每个任务中遵循测试驱动开发的原则  

**替代工作流程：**  
- `executing-plans`：适用于需要在同一会话中执行多个任务的场景