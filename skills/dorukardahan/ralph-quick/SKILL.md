---
name: ralph-quick
description: "快速安全检查，仅需10次迭代（约5-10分钟）。适用于用户请求“快速安全检查”、“部署前审计”、“快速安全扫描”、“部署前的安全检查”或“每日安全检查”的场景。该检查涵盖密码管理、OWASP基础安全规范、身份验证、速率限制以及容器安全等方面的内容。"
metadata: { "openclaw": { "emoji": "🔍" }, "author": "dorukardahan", "version": "2.0.0", "category": "security", "tags": ["security", "audit", "owasp", "pre-deploy"] }
---
# Ralph Quick — 10次迭代（耗时约5-10分钟）

这是一个快速的安全检查工具，用于部署前或日常的安全维护。

## 参考资料

- [严重性定义](references/severity-guide.md)

## 使用说明

### 执行流程

每次迭代都必须遵循以下步骤：

1. **状态检查**：读取当前迭代次数（起始值为1）。
2. **执行检查**：从当前阶段中选择一个安全检查项进行执行。
3. **验证结果**：在报告“失败”之前，需要阅读相关代码，确认是否有库能够处理该问题，检查数据库约束条件，以及确认该问题是否仅适用于开发环境。
4. **输出结果**：以指定的格式输出当前迭代的检查结果。
5. **更新迭代次数**：将迭代次数加1。
6. **继续迭代**：如果迭代次数小于或等于10次，则返回步骤1。
7. **生成最终报告**：将所有检查结果汇总并保存到`.ralph-report.md`文件中。

**重要规则：**
- 每次迭代仅执行一个安全检查项。
- 必须显示迭代次数（格式为`[QUICK-X/10]`）。
- 严禁跳过任何迭代步骤。
- 如果验证结果不确定，应标记为“需要审查”，而非“失败”。

### 每次迭代的输出内容（示例代码块）

```
[QUICK-{N}/10] {check_name}
Target: {file or system component}
Result: {PASS|FAIL|WARN|N/A}
Confidence: {VERIFIED|LIKELY|PATTERN_MATCH|NEEDS_REVIEW}
Finding: {description or "Clean"}
───────────────────────────────
```

### 使用者角色

高级安全工程师——注重证据收集，强调问题的关键性，追求最高效率。

### 检查阶段划分

| 迭代次数 | 检查内容 |
|---------|---------|
| 1       | 自动检测代码栈、基础设施配置以及Git仓库同步情况。 |
| 2       | 检查`.gitignore`文件中是否包含`.env`文件。 |
| 3       | 扫描代码中硬编码的敏感信息。 |
| 4       | 检测是否使用了DEBUG模式。 |
| 5       | 检查是否存在SQL注入攻击的潜在风险。 |
| 6       | 检查是否存在命令注入攻击的潜在风险。 |
| 7       | 确认敏感接口是否使用了正确的身份验证机制。 |
| 8       | 检查是否存在速率限制机制。 |
| 9       | 检查容器是否以root权限运行。 |
| 10       | 输出检查总结及改进建议。 |

### 自动检测（第1次迭代）

执行顺序如下：
1. 使用`git rev-parse --show-toplevel`获取项目结构信息。
2. 检查项目中的代码文件（`package.json`、`pyproject.toml`、`requirements.txt`、`go.mod`）。
3. 检查基础设施配置文件（`Dockerfile`、`docker-compose.yml`、Kubernetes配置文件）。
4. 检查持续集成/持续部署（CI/CD）相关配置（`.github/workflows`、`.gitlab-ci.yml`）。
5. 对于不适用的检查项，标记为“N/A”。

### 信任度等级

| 信任度等级 | 含义 |
|---------|--------|
| 已验证 | 通过代码阅读或实际测试确认问题存在。 |
| 很可能 | 有充分证据支持，但尚未进行实际测试。 |
| 匹配模式 | 仅通过关键词匹配判断——需要人工进一步审核。 |
| 需要审查 | 验证结果不明确。 |

### 严重性等级

| 严重性等级 | CVSS评分 | 应对措施 |
|---------|---------|--------|
| 严重（CRITICAL） | 9.0-10.0 | 立即停止使用并修复问题。 |
| 高（HIGH）  | 7.0-8.9 | 部署前修复问题。 |
| 中等（MEDIUM） | 4.0-6.9 | 安排后续修复。 |
| 低（LOW）  | 0.1-3.9 | 记录问题以备后续处理。 |

### 报告文件

- 如果`.ralph-report.md`文件已存在，则将其重命名为`.ralph-report-{YYYY-MM-DD-HHmm}.md`。
- 最终报告会在所有检查完成后生成并保存。

### 参数设置

| 参数          | 默认值       | 可选值       |
|--------------|------------|-------------|
| `--iterations` | 10          | 1-20          |
| `--focus`     | all          | secrets       | owasp         | infra         | all          |
|              |              |               |

**注意：**这些参数是由AI系统解析的指令，而非传统的命令行参数。

### 使用场景

- 部署前的快速安全检查。
- 日常安全维护。
- 验证特定的安全修复措施是否有效。

- 更深入的安全审计可以使用其他选项：`/ralph-security`（100次迭代）、`/ralph-ultra`（1,000次迭代）、`/ralph-promax`（10,000次迭代）。