---
name: skeall
description: >
  **Agent Skills (SKILL.md)**  
  这是一个用于构建、审核和优化跨平台大型语言模型（LLM）代理的工具。  
  支持以下操作：  
  - 创建新技能（`skeall`）  
  - 构建现有技能  
  - 优化技能性能  
  - 审核技能质量  
  - 进行技能评估  
  - 以及与技能相关的任何其他操作。  
  遵循 `agentskills.io` 的标准格式。
---
# Skeall

本工具用于根据[Agent Skills开放标准](https://agentskills.io)创建、优化和审计代理技能。这些技能整合了实际开发经验与跨平台兼容性测试的结果。

## 快速入门

---

## 模式 1：创建新技能（构建技能框架）

### 流程

1. 与用户进行交流（务必询问问题1-4；如果用户未指定技能的复杂度或适用范围，再询问问题5-6）：
   - 该技能的功能是什么？（用一句话概括）
   - 属于哪一类技能？参考/任务/MCP增强/混合类型。详见[references/advanced-patterns.md]
   - 什么触发条件会激活该技能？（用户可能输入的关键词）
   - 该技能是否接受参数？（例如文件路径、主题——在技能文档中使用`$ARGUMENTS`或`$ARGUMENTS[N]`）
   - 技能的复杂程度如何？（是单一文件还是需要引用其他文件）
   - 该技能是否会被共享？（个人使用/项目内部/公开使用）——这会影响README文件、许可证和元数据设置

2. 生成技能的框架结构：

---

3. 按照以下规则编写SKILL.md文件：
   - 使用YAML格式编写前置内容，包含`name`和`description`字段（详见前置内容部分）
   - 正文部分不超过500行，字符数不超过5000个
   - 采用基于指令的编写方式，而非基于角色的描述
   - 实现逐步披露信息：核心内容放在SKILL.md中，详细信息放在参考文件中

4. 将生成的SKILL.md展示给用户审阅

5. 对生成的技能文件运行`--scan`命令进行检查。如果发现任何严重问题，请在交付前修复它们。

**下一步：**“是否需要使用Reprompter进行优化？”（可选，详见Reprompter部分）。然后建议用户安装该技能。

---

## 模式 2：优化现有技能（重构技能）

### 流程

1. 首先阅读SKILL.md文件。只有在扫描发现需要修改的问题时（如链接失效、路由表不匹配等情况）才阅读参考文件。
2. 运行扫描检查清单（详见模式3）。
3. 对于每个问题，提出具体的修改建议（修改前/修改后的对比）。
4. 按优先级对修改建议进行排序：先处理高优先级的问题，再处理中等优先级的问题，最后处理低优先级的问题。
5. 询问用户：“全部修改吗？逐一检查吗？还是只修改高优先级的问题？”（建议：自动修复所有高优先级的问题，然后检查中等优先级的问题）

6. 应用经过审核的修改建议。
7. 重新运行扫描。如果出现新的问题，请报告，但不要陷入无限修改的循环。

**下一步：**“运行`--scan`命令进行验证？”或“提交更改？”

### 常见优化点

| 问题 | 解决方案 |
|---------|-----|
| 正文部分超过5000个字符 | 将详细内容移至参考文件中 |
| 冗余内容 | 保持信息来源的唯一性，引用其他参考文件 |
| 基于角色的描述方式 | 改为基于指令的描述方式 |
| 描述字段中缺少触发词 | 在描述字段中添加相关关键词 |
| 特定平台的格式 | 使用通用格式替代 |
| 缺乏逐步披露信息 | 在参考文件中添加路由表 |

---

## 模式 3：扫描（审计并生成报告）

### 流程

1. 阅读技能的SKILL.md文件及其目录结构。
2. 检查以下检查清单中的每一项。
3. 生成带有严重程度标签的报告。

### 报告格式

---

**扫描后的下一步：**“需要我帮忙修复这些问题吗？运行 `/skeall --improve <path>`**

### 错误处理

| 输入 | 处理方式 |
|-------|----------|
| 未在指定路径找到SKILL.md文件 | “在{path}路径下未找到技能文件。您是想使用`--create`命令吗？” |
| `--scan-all`命令执行后目录为空 | “在{dir}目录下未找到技能文件。技能文件必须包含SKILL.md文件。” |
| YAML前置内容无效 | 报告解析错误，并建议先修复前置内容 |
| 在非技能文件上使用`--improve`命令 | “文件不是有效的技能文件（缺少YAML前置内容）。请尝试使用`--create`命令。” |
| 在评分为10/10的技能上使用`--improve`命令 | “扫描未发现任何问题（评分10.0/10）。无需修改。可以考虑运行触发测试和功能测试。” |

---

## Agent Skills规范参考

### 前置内容（必填）

---

**名称规则：**
- 名称必须与父目录名称匹配
- 仅允许使用小写字母、数字和连字符（允许使用Unicode小写字母）
- 名称长度为1-64个字符，不能以连字符开头或结尾，也不能连续使用连字符
- 不能包含空格或特殊字符，也不能使用保留字（如“anthropic”、“claude”）
- 建议使用动名词形式（如`processing-pdfs`、`testing-code`）或描述性名词（如`pdf-processor`）

**描述规则：**
- 需要说明技能的功能以及使用场景
- 用第三人称进行描述（例如“该技能用于处理文件”，而非“我可以处理文件”或“您可以使用该技能”）
- 包含用户实际会输入的触发词
- 将最重要的关键词放在描述的开头（优先考虑与平台相关的关键词）
- 规范长度限制为1024个字符。建议控制在300个字符以内，以获得更好的匹配效果
- 使用名词短语形式（如“X指南”，而非“X领域的专家”）
- 前置内容中不得使用XML标签（`<`、`>`）

### 可选的前置内容字段

这些字段会被不支持它们的平台忽略：

---

### 目录结构

---

### 字符数预算

| 类型 | 内容 | 字符数预算 |
|-------|---------|--------|
| 元数据（YAML前置内容） | `name` + `description` | 约100个字符 |
| 指令内容（SKILL.md正文） | 由LLM自动加载 | 不超过5000个字符 |
| 参考文件 | 按需加载 | 每个文件约2000-3000个字符 |

**估算：**对于混合了代码和 prose 的markdown 文件，每个字符大约需要1.5个字符。

**逐步披露信息原则：**SKILL.md正文应满足用户需求的70%，其余30%的内容由参考文件提供（包括详细的工作流程和示例）。

### 行数限制

| 规范 | 限制 |
|-------|-------|
| SKILL.md正文 | 不超过500行（对于包含大量参考文件的复杂技能，可适当放宽限制） |
| 参考文件 | 没有严格限制，但每个文件建议不超过700行。如果文件超过100行，请在文件开头添加目录结构）

---

## 扫描检查清单

### 结构检查

| 编号 | 严重程度 | 检查内容 |
|----|----------|-------|
| S1 | 高 | SKILL.md文件存在于技能目录的根目录下 |
| S2 | 高 | 前置内容使用`---`作为分隔符 |
| S3 | 高 | `name`字段存在且格式正确（小写、包含连字符、长度为1-64个字符，且不能连续使用连字符） |
| S4 | 高 | 参考文件（位于`references/`目录下）存在 |
| S5 | 低 | 如果技能托管在GitHub上，必须存在README.md文件 |
| S7 | 低 | 目录中不应包含不必要的文件（如`node_modules`、`.DS_Store`等） |
| S8 | 高 | `name`字段与父目录名称一致 |

### 前置内容检查

| 编号 | 严重程度 | 检查内容 |
|----|----------|-------|
| F1 | 高 | 描述长度不超过1024个字符（符合规范限制） |
| F1b | 低 | 描述长度建议不超过300个字符（以便更好地匹配） |
| F2 | 高 | 描述中包含触发词 |
| F3 | 中等 | 描述以名词短语开头 |
| F4 | 中等 | 名称长度为1-64个字符，不能以连字符开头或结尾 |
| F5 | 低 | 描述中不应包含特定于平台的字段（保持通用兼容性） |

### 内容检查

| 编号 | 严重程度 | 检查内容 |
|----|----------|-------|
| C1 | 高 | 正文部分不超过500行 |
| C2 | 高 | 预计的字符数不超过5000个 |
| C3 | 高 | SKILL.md正文内容中没有重复的内容（参考文件中的重复内容是可以接受的） |
| C4 | 高 | 代码示例使用正确且经过验证的格式 |
| C5 | 中等 | 采用基于指令的描述方式（而非“您是专家”这样的表述） |
| C6 | 中等 | 必须包含指向参考文件的路由表（如果存在参考文件的话） |
| C7 | 中等 | 必须包含故障排除部分（对于包含代码块或CLI命令的技能） |
| C8 | 低 | 正文开头不应包含过时的内容（避免浪费字符空间） |
| C9 | 中等 | 路由表是否完整：如果存在参考文件，SKILL.md中应列出所有参考文件的名称 |
| C10 | 中等 | 内部统计信息是否一致：声明的统计数量（如“34种模式”、“8个阶段”）与实际内容相符 |

### 适合LLM的编写规范

### 规范内容：

- **使用表格而非项目符号列表**来呈现结构化数据
- 对于多次出现的概念，使用**单一的信息来源**
- **基于指令的描述方式**：“该技能提供以下操作指南。请严格按照这些步骤操作。”
- **使用祈使句式**（如“执行X操作”，而非“您应该考虑X”）
- 在文件顶部提供**简洁的路由表**，指向参考文件
- 在代码块中内嵌参数注释（例如`providerAddress, // 第一个参数：钱包地址`）
- 为多步骤工作流程提供**可复制的检查清单**（以便LLM跟踪完成情况）
- 对于对质量要求较高的输出，提供**验证反馈循环**（生成结果、评分、必要时重新尝试）
- 每个部分的**难度级别要统一**——不要将具体的脚本与模糊的指导混合使用。详见[references/advanced-patterns.md]

### 不建议的做法：

- **基于角色的描述方式**（如“您是……领域的专家”）——其他LLM对基于指令的描述响应更好
- 在标题或结构元素中使用**表情符号**（这会消耗更多字符，并且不同LLM的解析结果可能不一致）
- 在标题或结构元素中使用**Unicode箭头**来表示数据流向（使用表格或纯文本描述）
- 在SKILL.md顶部使用**大括号引号**（这会浪费字符空间，并可能引起误解）
- 使用包含10个以上项目的**“用户常见问题解答”清单**（这样会掩盖关键规则，建议使用表格）
- 对同一概念使用**重复的表述**（可能导致LLM混淆）

### 描述字段的优化示例：

---

## 跨平台兼容性

### 通用格式（适用于所有平台）

仅在前置内容中使用`name`和`description`字段。正文部分使用标准markdown格式。路径使用相对路径，避免使用特定于平台的语法。

### 各平台的技能查找路径

| 平台 | 全局范围 | 项目内部 |
|----------|-----------|---------|
| Claude Code | `~/.claude/skills/{name}/` | `.claude/skills/{name}/` |
| OpenAI Codex | `~/.agents/skills/{name}/` | `.agents/skills/{name}/` |
| OpenClaw | `~/.openclaw/skills/{name}/` | `.openclaw/skills/{name}/` |
| Cursor | 使用标准的SKILL.md查找机制 | 在项目技能目录中查找 |
| Gemini CLI | 使用标准的SKILL.md查找机制 | 在项目技能目录中查找 |

### Codex平台的特殊要求

OpenAI Codex要求在SKILL.md文件旁边添加一个可选的`openai.yaml`文件，用于存储平台元数据（如`interface`、`policy`、`dependencies`）。SKILL.md文件本身保持跨平台通用格式。详情请参阅[references/advanced-patterns.md]。

### 可能导致跨平台兼容性问题的情况

| 规范问题 | 解决方案 |
|---------|---------|-----|
| 使用`{baseDir`占位符** | 仅OpenClaw平台会解析该占位符 | 使用相对路径 |
| 使用特定于平台的指令** | 可能导致其他LLM混淆 | 保持指令的通用性 |
| 硬编码的路径** | 可能在其他操作系统或平台上无法正常工作 | 使用SKILL.md中的相对路径 |

## 字符数估算

估算方法：`wc -w SKILL.md` × 1.5（针对纯文本文件）或 × 1.7（针对包含大量代码的文件）。

### 资源分配建议

| 技能复杂度 | SKILL.md文件长度 | 是否需要参考文件？ |
|-----------------|-----------------|-------------------|
| 简单技能（一个主题，少量命令） | 100-200行 / 约1500个字符 | 不需要参考文件 |
| 中等复杂度技能（多个功能，包含部分代码） | 200-350行 / 约3000个字符 | 需要1-2个参考文件 |
| 高复杂度技能（多领域，包含多种模式） | 300-450行 / 约4500个字符 | 需要3-5个参考文件 |

## 问题严重程度分级

| 严重程度 | 含义 | 处理方式 |
|----------|---------|--------|
| 高 | 违反规范或导致LLM理解错误 | 必须修复 |
| 中等 | 降低技能质量或影响跨平台兼容性 | 建议修复 |
| 低 | 有改进空间 | 如果时间允许，可以修复 |

---

## 模式 4：批量扫描（扫描所有技能）

一次性扫描目录中的所有技能。适用于审计整个技能集合。

### 流程

1. 列出目标目录（默认为`~/.claude/skills/`）下所有包含SKILL.md文件的子目录。
2. 对每个技能运行模式3（扫描）并输出每个技能的评分结果。
3. 按评分从低到高排序输出结果。

### 报告格式

---

**通过标准：**评分高于7分且没有高优先级问题。

**下一步：**“从评分最低的技能开始优化。运行 `/skeall --improve <path>` 对其进行优化。”

---

## 模式 5：运行时健康检查

检查技能在运行时是否能够正常工作——这超出了静态扫描的范围。首先运行静态扫描（模式3），并在进行健康检查之前修复所有高优先级的问题。

### 流程

1. 对目标技能执行R1-R7阶段的检查。
2. 对于`--healthcheck-all`命令，检查是否存在重复的技能（R2）和触发条件冲突（R3）。
3. 生成带有严重程度标签的报告，包括`RUNTIME`、`DUPLICATES`、`TRIGGER COLLISIONS`等部分。
4. 标记：高优先级问题标记为`[FAIL]`，中等优先级问题标记为`[WARN]`，低优先级问题标记为`[INFO]`。

有关检测算法、报告格式和批量输出格式的详细信息，请参阅[references/healthcheck.md]。

---

## 评分方法

**评分公式：**`Score = max(0, 10 - (高优先级问题的数量 × 1.5) - (中等优先级问题的数量 × 0.5, 3) - (低优先级问题的数量 × 0.2, 1)`

**通过标准：**评分高于7分且没有高优先级问题。详细信息请参阅[references/scoring.md]。

---

## 故障排除

| 问题 | 解决方案 |
|-------|-----|
| 字符数估算有误 | 使用`wc -w`命令并乘以1.5（针对纯文本文件）或1.7（针对包含大量代码的文件） |
| 扫描报告显示问题存在，但实际上技能可以正常使用 | 高优先级问题通常表示规范或LLM方面的问题，但仍需修复 |
| 批量扫描遗漏了某个技能 | 技能目录的根目录下必须存在SKILL.md文件 |
| 两个修改建议相互矛盾 | 标记冲突，并询问用户选择解决方案（例如“缩短文件长度”或“添加新的内容”） |
| 评分高于7分但仍有改进空间 | 重新检查高优先级问题。无论评分如何，高优先级问题都需要修复 |

---

## 参考资料

有关详细的检查清单和示例，请参阅：
- [反例及修改建议](references/anti-patterns.md)
- **运行时健康检查算法及实际示例**（references/healthcheck.md）
- **完整的SKILL.md模板**（references/template.md）
- **评分方法详细信息**（references/scoring.md）
- **测试规范及示例**（references/testing.md）
- **高级优化技巧：分类、难度级别、适用范围、MCP、工作流程**（references/advanced-patterns.md）

**技能测试建议：**创建或优化技能后，测试技能的触发条件是否能够正常工作（使用3-5个关键词进行测试），检查功能输出是否正确，以及是否存在无关的错误。详情请参阅[references/testing.md]。

**MCP集成建议：**使用完整的工具名称（如`mcp__server__tool_name`）。记录所需的MCP服务器并提供备用方案。详情请参阅[references/advanced-patterns.md]。

**Reprompter集成（可选）：**在使用`--create`命令后，可以询问用户“使用reprompter优化”来评估描述内容的多样性和验证代码示例。如果未安装Reprompter，该功能也可以独立使用。