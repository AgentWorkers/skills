---
name: capability-evolver
description: 一种用于AI代理的自进化引擎。该引擎通过分析运行时历史数据来识别改进点，并根据协议约束实施相应的进化策略。
tags: [meta, ai, self-improvement, core]
---
# 🧬 能力进化器（Capability Evolver）

**“进化是不可避免的。要么适应，要么灭亡。”**

**能力进化器**是一种元技能（meta-skill），它允许 OpenClaw 代理检查自身的运行时历史记录，识别故障或低效之处，并自主编写新代码或更新内存以提升性能。

## 主要功能

- **自动日志分析**：自动扫描内存和历史文件，查找错误和潜在问题。
- **自我修复**：检测系统崩溃并建议修复方案。
- **GEP 协议**：采用标准化进化机制，支持代码资源的复用。
- **一键进化**：只需运行 `/evolve`（或 `node index.js`）即可启动进化过程。

## 使用方法

### 标准运行（自动化模式）
执行完整的进化周期。如果未提供任何参数，系统将自动进入“狂犬模式”（Mad Dog Mode）并立即应用更改。
```bash
node index.js
```

### 审查模式（人工干预）
如果您希望在应用更改前进行审核，可以使用 `--review` 参数。此时系统会暂停并请求您的确认。
```bash
node index.js --review
```

### 狂犬模式（持续循环）
若希望系统持续运行（例如通过 cron 任务或后台进程），请使用 `--loop` 参数。
```bash
node index.js --loop
```

## 配置参数

| 环境变量 | 默认值 | 说明 |
|---|---|---|
| `EVOLVE_ALLOW_SELF_MODIFY` | `false` | 是否允许进化器修改自身的源代码。**不建议在生产环境中使用**。启用此选项可能导致系统不稳定——进化器可能会在其提示生成、验证或逻辑处理过程中引入错误，从而引发需要人工干预的连锁故障。仅适用于受控实验。 |
| `EVOLVE_LOAD_MAX` | `2.0` | 进化器在退出前允许的最大负载平均值（单位：分钟）。 |
| `EVOLVE_STRATEGY` | `balanced` | 进化策略：`balanced`（平衡发展）、`innovate`（创新）、`harden`（强化）、`repair-only`（仅修复）、`early-stabilize`（早期稳定）、`steady-state`（稳态）或 `auto`（自动选择）。 |

## GEP 协议（可审计的进化机制）

该工具内置了基于协议的进化流程（GEP）以及一个结构化的本地资源存储库：
- `assets/gep/genes.json`：可复用的基因定义文件。
- `assets/gep/capsules.json`：用于存储成功案例的模板文件，避免重复推理。
- `assets/gep/events.jsonl`：用于记录进化过程中的事件（采用树状结构，通过父节点ID进行管理）。

## 表情符号使用规范
文档中仅允许使用 DNA 相关的表情符号，其他表情符号均被禁止。

## 系统兼容性与配置灵活性

该技能设计为与具体环境无关，默认使用 OpenClaw 的标准工具。

### 本地配置覆盖
您可以通过以下方式修改系统行为：
- **方法 1：环境变量**：在 `.env` 文件中设置 `EVOLVE_REPORT_TOOL` 变量。
```bash
EVOLVE_REPORT_TOOL=feishu-card
```

- **方法 2：动态检测**：脚本会自动检测工作区中是否存在兼容的本地技能（如 `skills/feishu-card`），并据此调整其行为。

## 安全性与风险控制机制

### 1. 身份认证与指令系统
- **身份验证**：系统会提示用户：“你是一个具有自我进化能力的系统。”
- **进化指令**：
  - 如果发现错误 → 进入 **修复模式**（修复故障）。
  - 如果系统运行稳定 → 进入 **优化模式**（进行重构或创新）。

### 2. 风险管理措施
- **防止无限递归**：系统采用严格的单进程逻辑设计。
- **审核模式**：在敏感环境中使用 `--review` 参数以增加安全性。
- **版本同步**：强烈建议同时运行 Git 同步任务，以确保数据的一致性。

## 许可证
MIT 许可证。