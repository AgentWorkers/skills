---
name: npkill
description: 使用 `npkill` 清理 `node_modules` 和 `.next` 文件夹，以释放磁盘空间。该工具专为 JavaScript 和 Next.js 开发者设计，旨在帮助他们清除累积的构建产物（这些产物会占用大量存储空间）。它提供了交互式和自动化的清理选项，并带有安全检查机制，以保护重要的系统目录。
---

# NPkill – 用于清理 Node.js 和 Next.js 构建产物的工具

该工具利用 `npkill` 命令来清除在 JavaScript 和 Next.js 开发过程中逐渐积累的 `node_modules` 文件夹及 `.next` 文件夹，从而释放大量磁盘空间。

## 目的

该工具旨在解决 JavaScript 和 Next.js 开发者面临的一个常见问题：随着项目的发展，`node_modules` 和 `.next` 文件夹会不断增大，占用大量磁盘空间。它提供了一种安全、高效的方法来识别并删除这些不必要的文件夹。

## 适用场景

在以下情况下使用该工具：
- 由于 `node_modules` 文件夹的积累，导致磁盘空间不足；
- 需要清理旧的 Next.js 构建产物（`.next` 文件夹）；
- 希望保持开发环境的整洁；
- 需要了解哪些项目占用了最多的磁盘空间；
- 需要对开发工作区进行定期维护。

## 核心命令

### 交互式清理（推荐使用）
```bash
npkill
```
启动交互式界面，您可以浏览并选择性地删除 `node_modules` 文件夹。这是最安全的方法，因为它允许您在删除前逐一查看每个文件夹。

### 专门针对 `.next` 文件夹进行清理
```bash
npkill --target .next
```
专门搜索 Next.js 项目使用的 `.next` 文件夹，而不是所有的 `node_modules` 文件夹。

### 干运行（强烈建议先执行）
```bash
npkill --dry-run
```
模拟删除操作，而不会实际删除任何文件。此功能可帮助您预览删除结果。

### 自动化清理（请谨慎使用）
```bash
npkill --delete-all --yes
```
自动删除所有找到的 `node_modules` 文件夹。请仅在完成干运行后使用此选项。

### 以吉字节显示文件夹大小
```bash
npkill --gb
```
以吉字节为单位显示文件夹大小，便于阅读。

### 从指定目录开始扫描
```bash
npkill --directory /path/to/search/from
```
从指定目录开始扫描，而不是当前目录。

## 安全特性

- **受保护目录的警告**：`npkill` 会用 ⚠️ 符号标出不应被删除的系统或应用程序目录；
- **交互式确认**：在交互模式下需要手动确认删除操作；
- **干运行选项**：在执行删除前预览更改内容；
- **排除选项**：可以排除某些目录，避免被扫描。

## Next.js 开发者的常见使用场景

- **安全地清理 `.next` 文件夹**；
- **定期维护开发环境**；
- **检查磁盘使用情况**。

## 最佳实践

1. **始终先使用 `--dry-run` 选项查看删除内容**；
2. **仔细阅读关于受保护目录的警告**；
- **使用交互式模式进行更安全的删除操作**；
- **如有需要，使用 `--exclude` 选项排除重要项目目录**；
- **定期安排清理任务，防止文件积累过多**。

## 安装要求

使用该工具前，需要全局安装 `npkill` 命令行工具：
```bash
npm install -g npkill
```

## 限制

- 需要单独安装 `npkill` 工具；
- 可能无法在所有环境中检测到所有受保护的系统目录；
- 交互式模式需要支持箭头键的终端环境。